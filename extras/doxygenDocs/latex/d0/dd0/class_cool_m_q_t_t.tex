\hypertarget{class_cool_m_q_t_t}{}\section{Cool\+M\+Q\+TT Class Reference}
\label{class_cool_m_q_t_t}\index{Cool\+M\+Q\+TT@{Cool\+M\+Q\+TT}}


This class handles the mqtt client.  




{\ttfamily \#include $<$Cool\+M\+Q\+T\+T.\+h$>$}



Collaboration diagram for Cool\+M\+Q\+TT\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=550pt]{da/def/class_cool_m_q_t_t__coll__graph}
\end{center}
\end{figure}
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
void \hyperlink{class_cool_m_q_t_t_ac9248808641ebf3054ed0620ea9d0100}{begin} ()
\item 
int \hyperlink{class_cool_m_q_t_t_a50075d0ab23a327ab897fd6adad20eda}{connect} (unsigned long keep\+Alive)
\item 
bool \hyperlink{class_cool_m_q_t_t_ace977b3e90ab14b1199fe5c4fb0a13ec}{publish} (const char $\ast$data)
\item 
bool \hyperlink{class_cool_m_q_t_t_a613c5e3927ae85bb94fbf648d84d8780}{publish} (const char $\ast$data, unsigned long log\+Interval)
\item 
String \hyperlink{class_cool_m_q_t_t_ae3c18f6ae9723746d32765f1c8f176ca}{read} ()
\item 
void \hyperlink{class_cool_m_q_t_t_a9b703de4f1358f0ee7a5e8c44979c648}{config} (const char \hyperlink{class_cool_m_q_t_t_ab8bb951f87ddbf92db74c2ad16a3e53e}{mqtt\+Server}\mbox{[}$\,$\mbox{]}, const char \hyperlink{class_cool_m_q_t_t_a4492f52a441e83cc5151010317fdb52d}{in\+Topic}\mbox{[}$\,$\mbox{]}, const char \hyperlink{class_cool_m_q_t_t_a109c786a17b463f9eeba046194279522}{out\+Topic}\mbox{[}$\,$\mbox{]}, const char \hyperlink{class_cool_m_q_t_t_a8cd47e45d457f908d4b4390b35aaee83}{user}\mbox{[}$\,$\mbox{]}, int \hyperlink{class_cool_m_q_t_t_a7f3cf26b51d6770f216e42c5ef13ca9f}{buffer\+Size})
\item 
bool \hyperlink{class_cool_m_q_t_t_a6571671781a505feca9a8a56e256c6bc}{config} ()
\item 
void \hyperlink{class_cool_m_q_t_t_a30d82ad665bfb603f46ecdbc290775df}{callback} (char $\ast$topic, byte $\ast$payload, unsigned int length)
\item 
void \hyperlink{class_cool_m_q_t_t_a40553a0ad4b5ecf1cb4411ab54ca85fb}{print\+Conf} ()
\item 
int \hyperlink{class_cool_m_q_t_t_a5d003307eff78efbd585e42b43b72b6d}{state} ()
\item 
bool \hyperlink{class_cool_m_q_t_t_aa5eaae967b562b62cbcf2b8d81f6e5d5}{mqtt\+Loop} ()
\item 
String \hyperlink{class_cool_m_q_t_t_a373cc92fca7760d886f02d8a6e5b3f63}{get\+User} ()
\end{DoxyCompactItemize}
\subsection*{Private Attributes}
\begin{DoxyCompactItemize}
\item 
char \hyperlink{class_cool_m_q_t_t_ab8bb951f87ddbf92db74c2ad16a3e53e}{mqtt\+Server} \mbox{[}50\mbox{]} =\{\textquotesingle{}0\textquotesingle{}\}
\item 
String \hyperlink{class_cool_m_q_t_t_af6b19e7074dbbb4ae493c44dcb53f7ff}{msg} =\char`\"{}\char`\"{}
\item 
char \hyperlink{class_cool_m_q_t_t_a4492f52a441e83cc5151010317fdb52d}{in\+Topic} \mbox{[}50\mbox{]} =\{\textquotesingle{}0\textquotesingle{}\}
\item 
char \hyperlink{class_cool_m_q_t_t_a109c786a17b463f9eeba046194279522}{out\+Topic} \mbox{[}50\mbox{]} =\{\textquotesingle{}0\textquotesingle{}\}
\item 
char \hyperlink{class_cool_m_q_t_t_a8cd47e45d457f908d4b4390b35aaee83}{user} \mbox{[}50\mbox{]} =\{\textquotesingle{}0\textquotesingle{}\}
\item 
int \hyperlink{class_cool_m_q_t_t_a7f3cf26b51d6770f216e42c5ef13ca9f}{buffer\+Size} =3000
\item 
Wi\+Fi\+Client \hyperlink{class_cool_m_q_t_t_acc30a0200967374a524092a8a806502a}{esp\+Client}
\item 
\hyperlink{class_cool_pub_sub_client}{Cool\+Pub\+Sub\+Client} \hyperlink{class_cool_m_q_t_t_afed1372683c44893b4668d0f1771f514}{client}
\item 
bool \hyperlink{class_cool_m_q_t_t_a3240388137b885775aadf38e96b24c6b}{new\+Msg} =0
\item 
unsigned long \hyperlink{class_cool_m_q_t_t_a3db37ef9ed3b05b2a8d44edba0e7d3cc}{previous\+Log\+Time} =0
\end{DoxyCompactItemize}


\subsection{Detailed Description}
This class handles the mqtt client. 

Definition at line 43 of file Cool\+M\+Q\+T\+T.\+h.



\subsection{Member Function Documentation}
\mbox{\Hypertarget{class_cool_m_q_t_t_ac9248808641ebf3054ed0620ea9d0100}\label{class_cool_m_q_t_t_ac9248808641ebf3054ed0620ea9d0100}} 
\index{Cool\+M\+Q\+TT@{Cool\+M\+Q\+TT}!begin@{begin}}
\index{begin@{begin}!Cool\+M\+Q\+TT@{Cool\+M\+Q\+TT}}
\subsubsection{\texorpdfstring{begin()}{begin()}}
{\footnotesize\ttfamily void Cool\+M\+Q\+T\+T\+::begin (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

\hyperlink{class_cool_m_q_t_t_ac9248808641ebf3054ed0620ea9d0100}{Cool\+M\+Q\+T\+T\+::begin()}\+: This method is provided to set the mqtt client\textquotesingle{}s parameters\+: -\/client -\/server -\/callback method -\/buffer size 

Definition at line 51 of file Cool\+M\+Q\+T\+T.\+cpp.


\begin{DoxyCode}
52 \{ 
53 
54 \textcolor{preprocessor}{#if DEBUG == 1 }
55 
56     Serial.println( F(\textcolor{stringliteral}{"Entering CoolMQTT.begin()"}) );
57     Serial.println();
58 
59 \textcolor{preprocessor}{#endif}
60 
61     \hyperlink{class_cool_m_q_t_t_afed1372683c44893b4668d0f1771f514}{client}.\hyperlink{class_cool_pub_sub_client_a7ee119b786010561ab6a9afa0798e91d}{setClient}(\hyperlink{class_cool_m_q_t_t_acc30a0200967374a524092a8a806502a}{espClient});
62     \hyperlink{class_cool_m_q_t_t_afed1372683c44893b4668d0f1771f514}{client}.\hyperlink{class_cool_pub_sub_client_a947e70c394c66c7d08d0c53caf8425e3}{setServer}(\hyperlink{class_cool_m_q_t_t_ab8bb951f87ddbf92db74c2ad16a3e53e}{mqttServer}, 1883);    
63     \hyperlink{class_cool_m_q_t_t_afed1372683c44893b4668d0f1771f514}{client}.\hyperlink{class_cool_pub_sub_client_ac5cab7658f1bdded32131241e468e661}{setCallback}([\textcolor{keyword}{this}] (\textcolor{keywordtype}{char}* topic, byte* payload, \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} length) \{ this->
      \hyperlink{class_cool_m_q_t_t_a30d82ad665bfb603f46ecdbc290775df}{callback}(topic, payload, length); \});
64     \hyperlink{class_cool_m_q_t_t_afed1372683c44893b4668d0f1771f514}{client}.\hyperlink{class_cool_pub_sub_client_a4f83e54f1ba96e32f725d93cdec283b7}{setBufferSize}((\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{short})\hyperlink{class_cool_m_q_t_t_a7f3cf26b51d6770f216e42c5ef13ca9f}{bufferSize});
65 
66 \}
\end{DoxyCode}
Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d0/dd0/class_cool_m_q_t_t_ac9248808641ebf3054ed0620ea9d0100_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=302pt]{d0/dd0/class_cool_m_q_t_t_ac9248808641ebf3054ed0620ea9d0100_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{class_cool_m_q_t_t_a30d82ad665bfb603f46ecdbc290775df}\label{class_cool_m_q_t_t_a30d82ad665bfb603f46ecdbc290775df}} 
\index{Cool\+M\+Q\+TT@{Cool\+M\+Q\+TT}!callback@{callback}}
\index{callback@{callback}!Cool\+M\+Q\+TT@{Cool\+M\+Q\+TT}}
\subsubsection{\texorpdfstring{callback()}{callback()}}
{\footnotesize\ttfamily void Cool\+M\+Q\+T\+T\+::callback (\begin{DoxyParamCaption}\item[{char $\ast$}]{topic,  }\item[{byte $\ast$}]{payload,  }\item[{unsigned int}]{length }\end{DoxyParamCaption})}

Cool\+M\+Q\+T\+T\+::callback(in topic, incoming message , message length)\+: This method is provided to handle incoming messages from the subscribed in\+Topic.

Arguments are automatically assigned in client.\+set\+Callback() 

Definition at line 307 of file Cool\+M\+Q\+T\+T.\+cpp.


\begin{DoxyCode}
308 \{
309 
310 \textcolor{preprocessor}{#if DEBUG == 1}
311 
312     Serial.println( F(\textcolor{stringliteral}{"Entering CoolMQTT.callback() "}) );
313     Serial.println();
314 
315 \textcolor{preprocessor}{#endif }
316 
317     \textcolor{keywordflow}{if}(this->\hyperlink{class_cool_m_q_t_t_a3240388137b885775aadf38e96b24c6b}{newMsg}==\textcolor{keyword}{false})
318     \{
319         \textcolor{keywordtype}{char} \hyperlink{_irene3000_8h_a5905d48604152cf57aa6bfa087b49173}{temp}[length+1];
320 
321 \textcolor{preprocessor}{    #if DEBUG == 1}
322 
323         Serial.println( F(\textcolor{stringliteral}{"received temp msg : "}) );
324         
325 \textcolor{preprocessor}{    #endif}
326         
327         \textcolor{keywordflow}{for} (\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} i = 0; i < length; i++) 
328         \{
329             temp[i]=(char)payload[i];
330         
331 \textcolor{preprocessor}{        #if DEBUG == 1 }
332 
333             Serial.print( (\textcolor{keywordtype}{char})payload[i] );
334         
335 \textcolor{preprocessor}{        #endif}
336 
337         \}
338     
339 \textcolor{preprocessor}{    #if DEBUG == 1 }
340 
341         Serial.println();
342         Serial.println( F(\textcolor{stringliteral}{"storing new message : "}) );
343 
344         Serial.print(F(\textcolor{stringliteral}{"length : "}));
345         Serial.println(length);
346         
347         Serial.print(F(\textcolor{stringliteral}{"size : "}));
348         Serial.print(\textcolor{keyword}{sizeof}(payload));
349         Serial.println();
350     
351 \textcolor{preprocessor}{    #endif}
352 
353         this->\hyperlink{class_cool_m_q_t_t_a3240388137b885775aadf38e96b24c6b}{newMsg}=\textcolor{keyword}{true};
354 
355         temp[length+1]=\textcolor{charliteral}{'\(\backslash\)0'};
356 
357         this->\hyperlink{class_cool_m_q_t_t_af6b19e7074dbbb4ae493c44dcb53f7ff}{msg}=String(temp);
358         this->\hyperlink{class_cool_m_q_t_t_af6b19e7074dbbb4ae493c44dcb53f7ff}{msg}.remove(length,1);
359     
360 \textcolor{preprocessor}{    #if DEBUG == 1 }
361 
362         Serial.println( F(\textcolor{stringliteral}{"stored message : "}) );
363         Serial.println(this->\hyperlink{class_cool_m_q_t_t_af6b19e7074dbbb4ae493c44dcb53f7ff}{msg});
364     
365 \textcolor{preprocessor}{    #endif}
366 
367     \}
368     \textcolor{keywordflow}{else}
369     \{
370     
371 \textcolor{preprocessor}{    #if DEBUG == 1}
372 
373         Serial.println( F(\textcolor{stringliteral}{"did not read last message"}) );
374     
375 \textcolor{preprocessor}{    #endif }
376         
377     \}
378 
379 \}
\end{DoxyCode}
Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d0/dd0/class_cool_m_q_t_t_a30d82ad665bfb603f46ecdbc290775df_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{class_cool_m_q_t_t_a9b703de4f1358f0ee7a5e8c44979c648}\label{class_cool_m_q_t_t_a9b703de4f1358f0ee7a5e8c44979c648}} 
\index{Cool\+M\+Q\+TT@{Cool\+M\+Q\+TT}!config@{config}}
\index{config@{config}!Cool\+M\+Q\+TT@{Cool\+M\+Q\+TT}}
\subsubsection{\texorpdfstring{config()}{config()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily void Cool\+M\+Q\+T\+T\+::config (\begin{DoxyParamCaption}\item[{const char}]{mqtt\+Server\mbox{[}$\,$\mbox{]},  }\item[{const char}]{in\+Topic\mbox{[}$\,$\mbox{]},  }\item[{const char}]{out\+Topic\mbox{[}$\,$\mbox{]},  }\item[{const char}]{user\mbox{[}$\,$\mbox{]},  }\item[{int}]{buffer\+Size }\end{DoxyParamCaption})}

Cool\+M\+Q\+T\+T\+::config(server,in topic, out topic , user Id, buffer size)\+: This method is provided to manually configure the mqtt client 

Definition at line 624 of file Cool\+M\+Q\+T\+T.\+cpp.


\begin{DoxyCode}
625 \{
626 
627 \textcolor{preprocessor}{#if DEBUG == 1}
628 
629     Serial.println( F(\textcolor{stringliteral}{"Entering CoolMQTT.config() , no SPIFFS variant"}) );
630     Serial.println();
631 
632 \textcolor{preprocessor}{#endif}
633 
634     \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int} i =0;i< 50 ;i++)
635     \{
636         this->\hyperlink{class_cool_m_q_t_t_ab8bb951f87ddbf92db74c2ad16a3e53e}{mqttServer}[i]=\hyperlink{class_cool_m_q_t_t_ab8bb951f87ddbf92db74c2ad16a3e53e}{mqttServer}[i];
637         this->\hyperlink{class_cool_m_q_t_t_a4492f52a441e83cc5151010317fdb52d}{inTopic}[i]=\hyperlink{class_cool_m_q_t_t_a4492f52a441e83cc5151010317fdb52d}{inTopic}[i];
638         this->\hyperlink{class_cool_m_q_t_t_a109c786a17b463f9eeba046194279522}{outTopic}[i]=\hyperlink{class_cool_m_q_t_t_a109c786a17b463f9eeba046194279522}{outTopic}[i];
639         this->\hyperlink{class_cool_m_q_t_t_a8cd47e45d457f908d4b4390b35aaee83}{user}[i]=\hyperlink{class_cool_m_q_t_t_a8cd47e45d457f908d4b4390b35aaee83}{user}[i];
640     \}
641     this->\hyperlink{class_cool_m_q_t_t_a7f3cf26b51d6770f216e42c5ef13ca9f}{bufferSize}=\hyperlink{class_cool_m_q_t_t_a7f3cf26b51d6770f216e42c5ef13ca9f}{bufferSize};
642     
643 
644 \}
\end{DoxyCode}
Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=305pt]{d0/dd0/class_cool_m_q_t_t_a9b703de4f1358f0ee7a5e8c44979c648_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{class_cool_m_q_t_t_a6571671781a505feca9a8a56e256c6bc}\label{class_cool_m_q_t_t_a6571671781a505feca9a8a56e256c6bc}} 
\index{Cool\+M\+Q\+TT@{Cool\+M\+Q\+TT}!config@{config}}
\index{config@{config}!Cool\+M\+Q\+TT@{Cool\+M\+Q\+TT}}
\subsubsection{\texorpdfstring{config()}{config()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily bool Cool\+M\+Q\+T\+T\+::config (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

\hyperlink{class_cool_m_q_t_t_a6571671781a505feca9a8a56e256c6bc}{Cool\+M\+Q\+T\+T\+::config()}\+: This method is provided to configure the mqtt\+Client \+: -\/server -\/in\+Topic -\/out\+Topic -\/client Id -\/buffer size

\begin{DoxyReturn}{Returns}
true if successful,false otherwise 
\end{DoxyReturn}


Definition at line 427 of file Cool\+M\+Q\+T\+T.\+cpp.


\begin{DoxyCode}
428 \{
429 
430 \textcolor{preprocessor}{#if DEBUG == 1 }
431 
432     Serial.println( F(\textcolor{stringliteral}{"Entering CoolMQTT.config()"}) );
433     Serial.println();
434 
435 \textcolor{preprocessor}{#endif}
436 
437     \textcolor{comment}{//read config file}
438     \textcolor{comment}{//update data}
439     File configFile = SPIFFS.open(\textcolor{stringliteral}{"/mqttConfig.json"}, \textcolor{stringliteral}{"r"});
440 
441     \textcolor{keywordflow}{if} (!configFile) 
442     \{
443     
444 \textcolor{preprocessor}{    #if DEBUG == 1 }
445 
446         Serial.println( F(\textcolor{stringliteral}{"failed to read /mqttConfig.json"}) );
447         Serial.println();
448 
449 \textcolor{preprocessor}{    #endif}
450 
451         \textcolor{keywordflow}{return}(\textcolor{keyword}{false});
452     \}
453     \textcolor{keywordflow}{else}
454     \{
455         \textcolor{keywordtype}{size\_t} size = configFile.size();
456         \textcolor{comment}{// Allocate a buffer to store contents of the file.}
457         std::unique\_ptr<char[]> buf(\textcolor{keyword}{new} \textcolor{keywordtype}{char}[size]);
458 
459         configFile.readBytes(buf.get(), size);
460         DynamicJsonBuffer jsonBuffer;
461         JsonObject& json = jsonBuffer.parseObject(buf.get());
462         \textcolor{keywordflow}{if} (!json.success()) 
463         \{
464         
465 \textcolor{preprocessor}{        #if DEBUG == 1 }
466 
467             Serial.println( F(\textcolor{stringliteral}{"failed to parse json "}) );
468             Serial.println();
469         
470 \textcolor{preprocessor}{        #endif}
471             
472             \textcolor{keywordflow}{return}(\textcolor{keyword}{false});
473         \} 
474         \textcolor{keywordflow}{else}
475         \{
476         
477 \textcolor{preprocessor}{        #if DEBUG == 1 }
478         
479             Serial.println( F(\textcolor{stringliteral}{"configuration json is "}) );
480             json.printTo(Serial);
481             Serial.println();
482 
483             Serial.print(F(\textcolor{stringliteral}{"jsonBuffer size: "}));
484             Serial.println(jsonBuffer.size());
485             Serial.println();
486 
487 
488 \textcolor{preprocessor}{        #endif}
489 
490             \textcolor{keywordflow}{if}(json[\textcolor{stringliteral}{"mqttServer"}].success() )
491             \{           
492                 \textcolor{keyword}{const} \textcolor{keywordtype}{char}* tempmqttServer = json[\textcolor{stringliteral}{"mqttServer"}]; 
493                 \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int} i =0;i< 50 ;i++)
494                 \{
495                     \hyperlink{class_cool_m_q_t_t_ab8bb951f87ddbf92db74c2ad16a3e53e}{mqttServer}[i]=tempmqttServer[i];
496                 \}
497             \}
498             \textcolor{keywordflow}{else}
499             \{
500                 \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int} i =0;i< 50 ;i++)
501                 \{
502                     this->\hyperlink{class_cool_m_q_t_t_ab8bb951f87ddbf92db74c2ad16a3e53e}{mqttServer}[i]=this->\hyperlink{class_cool_m_q_t_t_ab8bb951f87ddbf92db74c2ad16a3e53e}{mqttServer}[i];
503                 \}
504 
505             \}
506             json[\textcolor{stringliteral}{"mqttServer"}]=this->\hyperlink{class_cool_m_q_t_t_ab8bb951f87ddbf92db74c2ad16a3e53e}{mqttServer};
507 
508             
509             \textcolor{keywordflow}{if}(json[\textcolor{stringliteral}{"inTopic"}].success() )
510             \{
511                 \textcolor{keyword}{const} \textcolor{keywordtype}{char}* tempInTopic = json[\textcolor{stringliteral}{"inTopic"}]; 
512                 \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int} i =0;i< 50;i++)
513                 \{
514                     \hyperlink{class_cool_m_q_t_t_a4492f52a441e83cc5151010317fdb52d}{inTopic}[i]=tempInTopic[i];
515                 \}
516             \}
517             \textcolor{keywordflow}{else}
518             \{
519                 String tempMAC = WiFi.macAddress();
520                 tempMAC.replace(\textcolor{stringliteral}{":"},\textcolor{stringliteral}{""});
521                 snprintf(\hyperlink{class_cool_m_q_t_t_a4492f52a441e83cc5151010317fdb52d}{inTopic}, 50, \textcolor{stringliteral}{"$aws/things/%s/shadow/update/delta"}, tempMAC.c\_str());    
522             
523 \textcolor{preprocessor}{            #if DEBUG == 1              }
524                 
525                 Serial.print( F(\textcolor{stringliteral}{"Set Incomming MQTT Channel to : "}) );
526                 Serial.println(\hyperlink{class_cool_m_q_t_t_a4492f52a441e83cc5151010317fdb52d}{inTopic});
527             
528 \textcolor{preprocessor}{            #endif  }
529 
530             \}
531             json[\textcolor{stringliteral}{"inTopic"}]=this->\hyperlink{class_cool_m_q_t_t_a4492f52a441e83cc5151010317fdb52d}{inTopic};
532             
533             
534             \textcolor{keywordflow}{if}(json[\textcolor{stringliteral}{"outTopic"}].success() )
535             \{
536                 \textcolor{keyword}{const} \textcolor{keywordtype}{char}* tempOutTopic = json[\textcolor{stringliteral}{"outTopic"}]; 
537                 \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int} i =0;i<50;i++)
538                 \{
539                     \hyperlink{class_cool_m_q_t_t_a109c786a17b463f9eeba046194279522}{outTopic}[i]=tempOutTopic[i];
540                 \}
541             \}
542             \textcolor{keywordflow}{else}
543             \{
544                 String tempMAC = WiFi.macAddress();
545                 tempMAC.replace(\textcolor{stringliteral}{":"},\textcolor{stringliteral}{""});
546                 snprintf(\hyperlink{class_cool_m_q_t_t_a109c786a17b463f9eeba046194279522}{outTopic}, 50, \textcolor{stringliteral}{"$aws/things/%s/shadow/update"}, tempMAC.c\_str());
547             
548 \textcolor{preprocessor}{            #if DEBUG == 1 }
549 
550                 Serial.print( F(\textcolor{stringliteral}{"Set Outgoing MQTT Channel to : "}) );
551                 Serial.println(\hyperlink{class_cool_m_q_t_t_a109c786a17b463f9eeba046194279522}{outTopic});
552             
553 \textcolor{preprocessor}{            #endif}
554 
555             \}
556             json[\textcolor{stringliteral}{"outTopic"}]=this->\hyperlink{class_cool_m_q_t_t_a109c786a17b463f9eeba046194279522}{outTopic};
557         
558             
559             \textcolor{keywordflow}{if}(json[\textcolor{stringliteral}{"user"}].success() )
560             \{               
561                 \textcolor{keyword}{const} \textcolor{keywordtype}{char}* tempUser = json[\textcolor{stringliteral}{"user"}]; 
562                 \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int} i =0;i<50;i++)
563                 \{
564                     \hyperlink{class_cool_m_q_t_t_a8cd47e45d457f908d4b4390b35aaee83}{user}[i]=tempUser[i];
565                 \}
566             \}
567             \textcolor{keywordflow}{else}
568             \{
569                 \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int} i=0;i<50;i++)
570                 \{
571                     this->\hyperlink{class_cool_m_q_t_t_a8cd47e45d457f908d4b4390b35aaee83}{user}[i]=this->\hyperlink{class_cool_m_q_t_t_a8cd47e45d457f908d4b4390b35aaee83}{user}[i];
572                 \}               
573             \}
574             json[\textcolor{stringliteral}{"user"}]=this->\hyperlink{class_cool_m_q_t_t_a8cd47e45d457f908d4b4390b35aaee83}{user};
575             
576             \textcolor{keywordflow}{if}(json[\textcolor{stringliteral}{"bufferSize"}].success() )
577             \{
578                 \textcolor{keywordtype}{int} tempBufferSize = json[\textcolor{stringliteral}{"bufferSize"}]; 
579                 \hyperlink{class_cool_m_q_t_t_a7f3cf26b51d6770f216e42c5ef13ca9f}{bufferSize}=tempBufferSize;
580             \}
581             \textcolor{keywordflow}{else}
582             \{
583                 this->\hyperlink{class_cool_m_q_t_t_a7f3cf26b51d6770f216e42c5ef13ca9f}{bufferSize}=this->\hyperlink{class_cool_m_q_t_t_a7f3cf26b51d6770f216e42c5ef13ca9f}{bufferSize};
584             \}
585             json[\textcolor{stringliteral}{"bufferSize"}]=this->\hyperlink{class_cool_m_q_t_t_a7f3cf26b51d6770f216e42c5ef13ca9f}{bufferSize};
586 
587             configFile.close();
588             configFile = SPIFFS.open(\textcolor{stringliteral}{"/mqttConfig.json"}, \textcolor{stringliteral}{"w"});
589             \textcolor{keywordflow}{if}(!configFile)
590             \{
591             
592 \textcolor{preprocessor}{            #if DEBUG == 1 }
593 
594                 Serial.println( F(\textcolor{stringliteral}{"failed to write to /mqttConfig.json"}) );
595             
596 \textcolor{preprocessor}{            #endif}
597 
598                 \textcolor{keywordflow}{return}(\textcolor{keyword}{false});              
599             \}
600             
601             json.printTo(configFile);
602             configFile.close();
603 
604 \textcolor{preprocessor}{        #if DEBUG == 1 }
605 
606             Serial.println( F(\textcolor{stringliteral}{"saved configuration is :"}) );
607             json.printTo(Serial);
608             Serial.println();
609         
610 \textcolor{preprocessor}{        #endif}
611 
612             \textcolor{keywordflow}{return}(\textcolor{keyword}{true}); 
613         \}
614     \}   
615     
616 
617 \}
\end{DoxyCode}
\mbox{\Hypertarget{class_cool_m_q_t_t_a50075d0ab23a327ab897fd6adad20eda}\label{class_cool_m_q_t_t_a50075d0ab23a327ab897fd6adad20eda}} 
\index{Cool\+M\+Q\+TT@{Cool\+M\+Q\+TT}!connect@{connect}}
\index{connect@{connect}!Cool\+M\+Q\+TT@{Cool\+M\+Q\+TT}}
\subsubsection{\texorpdfstring{connect()}{connect()}}
{\footnotesize\ttfamily int Cool\+M\+Q\+T\+T\+::connect (\begin{DoxyParamCaption}\item[{unsigned long}]{keep\+Alive }\end{DoxyParamCaption})}

Cool\+M\+Q\+T\+T\+::connect( time to keep the connection alive in seconds )\+: This method is provided to connect the client to the server, publish to the out topic , subscribe to the in topic and set the keep\+Alive time.

\begin{DoxyReturn}{Returns}
mqtt client state 
\end{DoxyReturn}


Definition at line 107 of file Cool\+M\+Q\+T\+T.\+cpp.


\begin{DoxyCode}
108 \{       
109 
110     \textcolor{keywordtype}{int} i=0;
111 
112 \textcolor{preprocessor}{#if DEBUG == 1 }
113 
114     Serial.println( F(\textcolor{stringliteral}{"Entering CoolMQTT.connect()"}) );
115 
116 \textcolor{preprocessor}{#endif}
117     Serial.println( F(\textcolor{stringliteral}{"MQTT connecting..."}) );
118     
119     \textcolor{keywordflow}{while}( ( !this->\hyperlink{class_cool_m_q_t_t_afed1372683c44893b4668d0f1771f514}{client}.\hyperlink{class_cool_pub_sub_client_a3d5a5da4ddb1e5c1bea64d80c665d148}{connected}() ) && ( i<100 ) ) 
120     \{
121         \textcolor{comment}{// Attempt to connect}
122         \textcolor{keywordflow}{if}( this->\hyperlink{class_cool_m_q_t_t_afed1372683c44893b4668d0f1771f514}{client}.\hyperlink{class_cool_pub_sub_client_a2664c2ebc302b2fa49f493a339ecc891}{connect}( this-> \hyperlink{class_cool_m_q_t_t_a8cd47e45d457f908d4b4390b35aaee83}{user},keepAlive*10  ) )
123         \{
124             \hyperlink{class_cool_m_q_t_t_afed1372683c44893b4668d0f1771f514}{client}.\hyperlink{class_cool_pub_sub_client_ac1ebc9ad874128aefa985d78496d2e8f}{subscribe}( this->\hyperlink{class_cool_m_q_t_t_a4492f52a441e83cc5151010317fdb52d}{inTopic} );
125 
126 \textcolor{preprocessor}{        #if DEBUG == 1 }
127 
128             Serial.println( F(\textcolor{stringliteral}{" subscribed , leavin "}) ) ;
129         
130 \textcolor{preprocessor}{        #endif}
131 
132             \textcolor{keywordflow}{return}( this->\hyperlink{class_cool_m_q_t_t_a5d003307eff78efbd585e42b43b72b6d}{state}() );
133         \}
134 
135         \textcolor{keywordflow}{else}
136         \{
137         
138 \textcolor{preprocessor}{        #if DEBUG == 1 }
139 
140             Serial.println( F(\textcolor{stringliteral}{"not connected , retrying"}) );
141         
142 \textcolor{preprocessor}{        #endif}
143 
144             
145         \}
146 
147     delay(5);
148     i++;
149     \}
150     \textcolor{keywordflow}{if} (\hyperlink{class_cool_m_q_t_t_a5d003307eff78efbd585e42b43b72b6d}{state}() == 0)
151     \{
152         Serial.println( F(\textcolor{stringliteral}{"MQTT connected : OK"}) );
153         Serial.println();
154     \}
155     \textcolor{keywordflow}{else} Serial.println( F(\textcolor{stringliteral}{"MQTT not jet connected..."}));
156     \textcolor{keywordflow}{return}( this->\hyperlink{class_cool_m_q_t_t_a5d003307eff78efbd585e42b43b72b6d}{state}() );
157 
158 \}
\end{DoxyCode}
Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d0/dd0/class_cool_m_q_t_t_a50075d0ab23a327ab897fd6adad20eda_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d0/dd0/class_cool_m_q_t_t_a50075d0ab23a327ab897fd6adad20eda_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{class_cool_m_q_t_t_a373cc92fca7760d886f02d8a6e5b3f63}\label{class_cool_m_q_t_t_a373cc92fca7760d886f02d8a6e5b3f63}} 
\index{Cool\+M\+Q\+TT@{Cool\+M\+Q\+TT}!get\+User@{get\+User}}
\index{get\+User@{get\+User}!Cool\+M\+Q\+TT@{Cool\+M\+Q\+TT}}
\subsubsection{\texorpdfstring{get\+User()}{getUser()}}
{\footnotesize\ttfamily String Cool\+M\+Q\+T\+T\+::get\+User (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

\hyperlink{class_cool_m_q_t_t_a373cc92fca7760d886f02d8a6e5b3f63}{Cool\+M\+Q\+T\+T\+::get\+User()}\+: This method is provided to get the user name 

Definition at line 687 of file Cool\+M\+Q\+T\+T.\+cpp.


\begin{DoxyCode}
688 \{
689 
690 \textcolor{preprocessor}{#if DEBUG == 1 }
691     Serial.println( F(\textcolor{stringliteral}{"Entering CoolMQTT.getUser()"}) );
692     Serial.println();
693     
694     Serial.print( F(\textcolor{stringliteral}{"user : "}) );
695     Serial.println(this->\hyperlink{class_cool_m_q_t_t_a8cd47e45d457f908d4b4390b35aaee83}{user});
696 
697 \textcolor{preprocessor}{#endif}
698 
699     \textcolor{keywordflow}{return} String(this->\hyperlink{class_cool_m_q_t_t_a8cd47e45d457f908d4b4390b35aaee83}{user});
700 \}
\end{DoxyCode}
Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d0/dd0/class_cool_m_q_t_t_a373cc92fca7760d886f02d8a6e5b3f63_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{class_cool_m_q_t_t_aa5eaae967b562b62cbcf2b8d81f6e5d5}\label{class_cool_m_q_t_t_aa5eaae967b562b62cbcf2b8d81f6e5d5}} 
\index{Cool\+M\+Q\+TT@{Cool\+M\+Q\+TT}!mqtt\+Loop@{mqtt\+Loop}}
\index{mqtt\+Loop@{mqtt\+Loop}!Cool\+M\+Q\+TT@{Cool\+M\+Q\+TT}}
\subsubsection{\texorpdfstring{mqtt\+Loop()}{mqttLoop()}}
{\footnotesize\ttfamily bool Cool\+M\+Q\+T\+T\+::mqtt\+Loop (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

\hyperlink{class_cool_m_q_t_t_aa5eaae967b562b62cbcf2b8d81f6e5d5}{Cool\+M\+Q\+T\+T\+::mqtt\+Loop()}\+: This method is provided to allow the client to process the data

\begin{DoxyReturn}{Returns}
true if successful,false otherwise 
\end{DoxyReturn}


Definition at line 271 of file Cool\+M\+Q\+T\+T.\+cpp.


\begin{DoxyCode}
272 \{
273 
274     \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{long} lastTime=millis();
275 
276 \textcolor{preprocessor}{#if DEBUG == 1}
277 
278     Serial.println( F(\textcolor{stringliteral}{"Entering CoolMQTT.mqttLoop()"}) );
279     Serial.println();
280 
281 \textcolor{preprocessor}{#endif  }
282 
283     \textcolor{keywordflow}{while}( ( millis() - lastTime ) < 1000)
284     \{
285         this->\hyperlink{class_cool_m_q_t_t_afed1372683c44893b4668d0f1771f514}{client}.\hyperlink{class_cool_pub_sub_client_afc15900f0fc4886a19394508e61793b8}{loop}();
286         yield();
287     \}
288 
289 \textcolor{preprocessor}{#if DEBUG == 1 }
290     
291     Serial.print( F(\textcolor{stringliteral}{"loop result : "}) );
292     Serial.println( this->\hyperlink{class_cool_m_q_t_t_afed1372683c44893b4668d0f1771f514}{client}.\hyperlink{class_cool_pub_sub_client_afc15900f0fc4886a19394508e61793b8}{loop}() );
293     Serial.println();
294 
295 \textcolor{preprocessor}{#endif}
296 
297     \textcolor{keywordflow}{return}( this->\hyperlink{class_cool_m_q_t_t_afed1372683c44893b4668d0f1771f514}{client}.\hyperlink{class_cool_pub_sub_client_afc15900f0fc4886a19394508e61793b8}{loop}() );
298 \}
\end{DoxyCode}
Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d0/dd0/class_cool_m_q_t_t_aa5eaae967b562b62cbcf2b8d81f6e5d5_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d0/dd0/class_cool_m_q_t_t_aa5eaae967b562b62cbcf2b8d81f6e5d5_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{class_cool_m_q_t_t_a40553a0ad4b5ecf1cb4411ab54ca85fb}\label{class_cool_m_q_t_t_a40553a0ad4b5ecf1cb4411ab54ca85fb}} 
\index{Cool\+M\+Q\+TT@{Cool\+M\+Q\+TT}!print\+Conf@{print\+Conf}}
\index{print\+Conf@{print\+Conf}!Cool\+M\+Q\+TT@{Cool\+M\+Q\+TT}}
\subsubsection{\texorpdfstring{print\+Conf()}{printConf()}}
{\footnotesize\ttfamily void Cool\+M\+Q\+T\+T\+::print\+Conf (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

\hyperlink{class_cool_m_q_t_t_a40553a0ad4b5ecf1cb4411ab54ca85fb}{Cool\+M\+Q\+T\+T\+::print\+Conf()}\+: This method is provided to print the configuration to the Serial Monitor 

Definition at line 651 of file Cool\+M\+Q\+T\+T.\+cpp.


\begin{DoxyCode}
652 \{
653 
654 \textcolor{preprocessor}{#if DEBUG == 1 }
655 
656     Serial.println( F(\textcolor{stringliteral}{"Entering CoolMQTT.printConf()"}) );
657     Serial.println();   
658 
659 \textcolor{preprocessor}{#endif}
660     
661     Serial.println(\textcolor{stringliteral}{"MQTT configuration "});
662 
663     Serial.print(\textcolor{stringliteral}{"mqttServer : "});
664     Serial.println(this->\hyperlink{class_cool_m_q_t_t_ab8bb951f87ddbf92db74c2ad16a3e53e}{mqttServer});
665 
666     Serial.print(\textcolor{stringliteral}{"inTopic : "});
667     Serial.println(this->\hyperlink{class_cool_m_q_t_t_a4492f52a441e83cc5151010317fdb52d}{inTopic});
668 
669     Serial.print(\textcolor{stringliteral}{"outTopic : "});
670     Serial.println(this->\hyperlink{class_cool_m_q_t_t_a109c786a17b463f9eeba046194279522}{outTopic});
671 
672     Serial.print(\textcolor{stringliteral}{"user : "});
673     Serial.println(this->\hyperlink{class_cool_m_q_t_t_a8cd47e45d457f908d4b4390b35aaee83}{user});
674 
675     Serial.print(\textcolor{stringliteral}{"bufferSize : "});
676     Serial.println(this->\hyperlink{class_cool_m_q_t_t_a7f3cf26b51d6770f216e42c5ef13ca9f}{bufferSize});
677 
678     Serial.println();
679 
680 
681 \}
\end{DoxyCode}
Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=318pt]{d0/dd0/class_cool_m_q_t_t_a40553a0ad4b5ecf1cb4411ab54ca85fb_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{class_cool_m_q_t_t_ace977b3e90ab14b1199fe5c4fb0a13ec}\label{class_cool_m_q_t_t_ace977b3e90ab14b1199fe5c4fb0a13ec}} 
\index{Cool\+M\+Q\+TT@{Cool\+M\+Q\+TT}!publish@{publish}}
\index{publish@{publish}!Cool\+M\+Q\+TT@{Cool\+M\+Q\+TT}}
\subsubsection{\texorpdfstring{publish()}{publish()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily bool Cool\+M\+Q\+T\+T\+::publish (\begin{DoxyParamCaption}\item[{const char $\ast$}]{data }\end{DoxyParamCaption})}

Cool\+M\+Q\+T\+T\+::publish(data)\+: This method is provided to publish data to the out topic

\begin{DoxyReturn}{Returns}
true if publish successful, false otherwise 
\end{DoxyReturn}


Definition at line 168 of file Cool\+M\+Q\+T\+T.\+cpp.


\begin{DoxyCode}
169 \{
170 
171 \textcolor{preprocessor}{#if DEBUG == 1 }
172 
173     Serial.println( F(\textcolor{stringliteral}{"Entering CoolMQTT.publish()"}) );
174     Serial.println();
175     \textcolor{comment}{//data is in JSON, publish it directly}
176 
177     Serial.println( F(\textcolor{stringliteral}{"data to publish : "}) );
178     Serial.println(data);
179     Serial.print( F(\textcolor{stringliteral}{"data size : "}) );
180     Serial.println(strlen(data));
181 
182     Serial.println();
183 
184 \textcolor{preprocessor}{#endif}
185 \textcolor{preprocessor}{#if DEBUG == 0}
186     Serial.println( F(\textcolor{stringliteral}{"Publishing Message : "}));
187     Serial.println(data);
188     Serial.println();
189 \textcolor{preprocessor}{#endif}
190 
191     \textcolor{keywordtype}{bool} pub=\hyperlink{class_cool_m_q_t_t_afed1372683c44893b4668d0f1771f514}{client}.\hyperlink{class_cool_pub_sub_client_ab6ad5fa2d3db8f91454027257f225a89}{publish}( this->\hyperlink{class_cool_m_q_t_t_a109c786a17b463f9eeba046194279522}{outTopic},(byte*) data,strlen(data),\textcolor{keyword}{false}  );
192 
193 \textcolor{preprocessor}{#if DEBUG == 1 }
194 
195     Serial.print( F(\textcolor{stringliteral}{"success : "}) );
196     Serial.println(pub);    
197 
198 \textcolor{preprocessor}{#endif}
199 \textcolor{preprocessor}{#if DEBUG == 0}
200     \textcolor{keywordflow}{if} (pub == 1)
201     \{
202         Serial.println( F(\textcolor{stringliteral}{"Publish : OK"}));
203     \}
204     \textcolor{keywordflow}{else} Serial.println( F(\textcolor{stringliteral}{"Publish : FAIL!!!"}));
205 \textcolor{preprocessor}{#endif}
206 
207     \textcolor{keywordflow}{return}(pub);
208 
209 \}
\end{DoxyCode}
Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d0/dd0/class_cool_m_q_t_t_ace977b3e90ab14b1199fe5c4fb0a13ec_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d0/dd0/class_cool_m_q_t_t_ace977b3e90ab14b1199fe5c4fb0a13ec_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{class_cool_m_q_t_t_a613c5e3927ae85bb94fbf648d84d8780}\label{class_cool_m_q_t_t_a613c5e3927ae85bb94fbf648d84d8780}} 
\index{Cool\+M\+Q\+TT@{Cool\+M\+Q\+TT}!publish@{publish}}
\index{publish@{publish}!Cool\+M\+Q\+TT@{Cool\+M\+Q\+TT}}
\subsubsection{\texorpdfstring{publish()}{publish()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily bool Cool\+M\+Q\+T\+T\+::publish (\begin{DoxyParamCaption}\item[{const char $\ast$}]{data,  }\item[{unsigned long}]{log\+Interval }\end{DoxyParamCaption})}

Cool\+M\+Q\+T\+T\+::publish(data)\+: This method is provided to publish data to the out topic every log\+Interval in seconds

\begin{DoxyReturn}{Returns}
true if publish successful, false otherwise 
\end{DoxyReturn}


Definition at line 219 of file Cool\+M\+Q\+T\+T.\+cpp.


\begin{DoxyCode}
220 \{
221 
222 \textcolor{preprocessor}{#if DEBUG == 1 }
223 
224     Serial.println( F(\textcolor{stringliteral}{"Entering CoolMQTT.publish() every logInterval "}) );
225     Serial.println();
226 
227 \textcolor{preprocessor}{#endif }
228     \textcolor{comment}{//log interval is passed in seconds, logInteral*1000 = logInterval in ms}
229     \textcolor{keywordflow}{if}( ( millis() - ( this->\hyperlink{class_cool_m_q_t_t_a3db37ef9ed3b05b2a8d44edba0e7d3cc}{previousLogTime})  ) >= ( logInterval*1000 ) )
230     \{
231     
232 \textcolor{preprocessor}{    #if DEBUG == 1}
233 
234         Serial.println( F(\textcolor{stringliteral}{"log Interval has passed "}) );
235         Serial.println();
236     
237 \textcolor{preprocessor}{    #endif}
238 
239         this->\hyperlink{class_cool_m_q_t_t_ace977b3e90ab14b1199fe5c4fb0a13ec}{publish}(data);
240 
241         this->\hyperlink{class_cool_m_q_t_t_a3db37ef9ed3b05b2a8d44edba0e7d3cc}{previousLogTime}=millis();
242     
243 \textcolor{preprocessor}{    #if DEBUG == 1 }
244 
245         Serial.print( F(\textcolor{stringliteral}{"last log time : "}) );
246         Serial.println(this->\hyperlink{class_cool_m_q_t_t_a3db37ef9ed3b05b2a8d44edba0e7d3cc}{previousLogTime});
247 
248 \textcolor{preprocessor}{    #endif}
249 
250         \textcolor{keywordflow}{return}(\textcolor{keyword}{true});
251     \}
252 
253 \textcolor{preprocessor}{#if DEBUG == 1 }
254 
255     Serial.println( F(\textcolor{stringliteral}{"log Interval still didn't pass "}) ); 
256     Serial.println();
257 
258 \textcolor{preprocessor}{#endif}
259 
260     \textcolor{keywordflow}{return}(\textcolor{keyword}{false});
261 \}
\end{DoxyCode}
Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d0/dd0/class_cool_m_q_t_t_a613c5e3927ae85bb94fbf648d84d8780_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{class_cool_m_q_t_t_ae3c18f6ae9723746d32765f1c8f176ca}\label{class_cool_m_q_t_t_ae3c18f6ae9723746d32765f1c8f176ca}} 
\index{Cool\+M\+Q\+TT@{Cool\+M\+Q\+TT}!read@{read}}
\index{read@{read}!Cool\+M\+Q\+TT@{Cool\+M\+Q\+TT}}
\subsubsection{\texorpdfstring{read()}{read()}}
{\footnotesize\ttfamily String Cool\+M\+Q\+T\+T\+::read (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

\hyperlink{class_cool_m_q_t_t_ae3c18f6ae9723746d32765f1c8f176ca}{Cool\+M\+Q\+T\+T\+::read()}\+: This method is provided to return the last read message. 

Definition at line 386 of file Cool\+M\+Q\+T\+T.\+cpp.


\begin{DoxyCode}
387 \{   
388 
389 \textcolor{preprocessor}{#if DEBUG == 1 }
390 
391     Serial.println( F(\textcolor{stringliteral}{"Entering CoolMQTT.read()"}) );
392     Serial.println();
393 
394 \textcolor{preprocessor}{#endif }
395 
396     \textcolor{keywordflow}{if}(this->\hyperlink{class_cool_m_q_t_t_a3240388137b885775aadf38e96b24c6b}{newMsg}==\textcolor{keyword}{true})
397     \{
398         
399         this->\hyperlink{class_cool_m_q_t_t_a3240388137b885775aadf38e96b24c6b}{newMsg}=\textcolor{keyword}{false};
400 
401 \textcolor{preprocessor}{#if DEBUG == 1 }
402         Serial.println( F(\textcolor{stringliteral}{"received new message"}) );
403         Serial.println( F(\textcolor{stringliteral}{"message : "}) );
404         Serial.println(this->\hyperlink{class_cool_m_q_t_t_af6b19e7074dbbb4ae493c44dcb53f7ff}{msg});
405         Serial.println();
406 
407 \textcolor{preprocessor}{#endif}
408 
409         \textcolor{keywordflow}{return}(this->\hyperlink{class_cool_m_q_t_t_af6b19e7074dbbb4ae493c44dcb53f7ff}{msg});
410         
411     \}
412     \textcolor{keywordflow}{return}(\textcolor{stringliteral}{""});
413 
414 \}
\end{DoxyCode}
Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=326pt]{d0/dd0/class_cool_m_q_t_t_ae3c18f6ae9723746d32765f1c8f176ca_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{class_cool_m_q_t_t_a5d003307eff78efbd585e42b43b72b6d}\label{class_cool_m_q_t_t_a5d003307eff78efbd585e42b43b72b6d}} 
\index{Cool\+M\+Q\+TT@{Cool\+M\+Q\+TT}!state@{state}}
\index{state@{state}!Cool\+M\+Q\+TT@{Cool\+M\+Q\+TT}}
\subsubsection{\texorpdfstring{state()}{state()}}
{\footnotesize\ttfamily int Cool\+M\+Q\+T\+T\+::state (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

\hyperlink{class_cool_m_q_t_t_a5d003307eff78efbd585e42b43b72b6d}{Cool\+M\+Q\+T\+T\+::state()}\+: This method is provided to return the mqtt client\textquotesingle{}s state. \begin{DoxyReturn}{Returns}
mqtt client state\+: -\/4 \+: M\+Q\+T\+T\+\_\+\+C\+O\+N\+N\+E\+C\+T\+I\+O\+N\+\_\+\+T\+I\+M\+E\+O\+UT -\/ the server didn\textquotesingle{}t respond within the keepalive time -\/3 \+: M\+Q\+T\+T\+\_\+\+C\+O\+N\+N\+E\+C\+T\+I\+O\+N\+\_\+\+L\+O\+ST -\/ the network connection was broken -\/2 \+: M\+Q\+T\+T\+\_\+\+C\+O\+N\+N\+E\+C\+T\+\_\+\+F\+A\+I\+L\+ED -\/ the network connection failed -\/1 \+: M\+Q\+T\+T\+\_\+\+D\+I\+S\+C\+O\+N\+N\+E\+C\+T\+ED -\/ the client is disconnected cleanly 0 \+: M\+Q\+T\+T\+\_\+\+C\+O\+N\+N\+E\+C\+T\+ED -\/ the cient is connected 1 \+: M\+Q\+T\+T\+\_\+\+C\+O\+N\+N\+E\+C\+T\+\_\+\+B\+A\+D\+\_\+\+P\+R\+O\+T\+O\+C\+OL -\/ the server doesn\textquotesingle{}t support the requested version of M\+Q\+TT 2 \+: M\+Q\+T\+T\+\_\+\+C\+O\+N\+N\+E\+C\+T\+\_\+\+B\+A\+D\+\_\+\+C\+L\+I\+E\+N\+T\+\_\+\+ID -\/ the server rejected the client identifier 3 \+: M\+Q\+T\+T\+\_\+\+C\+O\+N\+N\+E\+C\+T\+\_\+\+U\+N\+A\+V\+A\+I\+L\+A\+B\+LE -\/ the server was unable to accept the connection 4 \+: M\+Q\+T\+T\+\_\+\+C\+O\+N\+N\+E\+C\+T\+\_\+\+B\+A\+D\+\_\+\+C\+R\+E\+D\+E\+N\+T\+I\+A\+LS -\/ the username/password were rejected 5 \+: M\+Q\+T\+T\+\_\+\+C\+O\+N\+N\+E\+C\+T\+\_\+\+U\+N\+A\+U\+T\+H\+O\+R\+I\+Z\+ED -\/ the client was not authorized to connect 
\end{DoxyReturn}


Definition at line 84 of file Cool\+M\+Q\+T\+T.\+cpp.


\begin{DoxyCode}
85 \{
86 
87 \textcolor{preprocessor}{#if DEBUG == 1 }
88 
89     Serial.println( F(\textcolor{stringliteral}{"Entering CoolMQTT.state()"}) );
90     Serial.println();   
91     Serial.print( F(\textcolor{stringliteral}{"state : "}) );
92     Serial.println( this->\hyperlink{class_cool_m_q_t_t_afed1372683c44893b4668d0f1771f514}{client}.\hyperlink{class_cool_pub_sub_client_a3245a5afc6d22e61270dcfe392ccb866}{state}() );
93 
94 \textcolor{preprocessor}{#endif}
95     
96     \textcolor{keywordflow}{return}( this->\hyperlink{class_cool_m_q_t_t_afed1372683c44893b4668d0f1771f514}{client}.\hyperlink{class_cool_pub_sub_client_a3245a5afc6d22e61270dcfe392ccb866}{state}() );
97 \}
\end{DoxyCode}
Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=333pt]{d0/dd0/class_cool_m_q_t_t_a5d003307eff78efbd585e42b43b72b6d_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d0/dd0/class_cool_m_q_t_t_a5d003307eff78efbd585e42b43b72b6d_icgraph}
\end{center}
\end{figure}


\subsection{Member Data Documentation}
\mbox{\Hypertarget{class_cool_m_q_t_t_a7f3cf26b51d6770f216e42c5ef13ca9f}\label{class_cool_m_q_t_t_a7f3cf26b51d6770f216e42c5ef13ca9f}} 
\index{Cool\+M\+Q\+TT@{Cool\+M\+Q\+TT}!buffer\+Size@{buffer\+Size}}
\index{buffer\+Size@{buffer\+Size}!Cool\+M\+Q\+TT@{Cool\+M\+Q\+TT}}
\subsubsection{\texorpdfstring{buffer\+Size}{bufferSize}}
{\footnotesize\ttfamily int Cool\+M\+Q\+T\+T\+::buffer\+Size =3000\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 84 of file Cool\+M\+Q\+T\+T.\+h.

\mbox{\Hypertarget{class_cool_m_q_t_t_afed1372683c44893b4668d0f1771f514}\label{class_cool_m_q_t_t_afed1372683c44893b4668d0f1771f514}} 
\index{Cool\+M\+Q\+TT@{Cool\+M\+Q\+TT}!client@{client}}
\index{client@{client}!Cool\+M\+Q\+TT@{Cool\+M\+Q\+TT}}
\subsubsection{\texorpdfstring{client}{client}}
{\footnotesize\ttfamily \hyperlink{class_cool_pub_sub_client}{Cool\+Pub\+Sub\+Client} Cool\+M\+Q\+T\+T\+::client\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 88 of file Cool\+M\+Q\+T\+T.\+h.

\mbox{\Hypertarget{class_cool_m_q_t_t_acc30a0200967374a524092a8a806502a}\label{class_cool_m_q_t_t_acc30a0200967374a524092a8a806502a}} 
\index{Cool\+M\+Q\+TT@{Cool\+M\+Q\+TT}!esp\+Client@{esp\+Client}}
\index{esp\+Client@{esp\+Client}!Cool\+M\+Q\+TT@{Cool\+M\+Q\+TT}}
\subsubsection{\texorpdfstring{esp\+Client}{espClient}}
{\footnotesize\ttfamily Wi\+Fi\+Client Cool\+M\+Q\+T\+T\+::esp\+Client\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 86 of file Cool\+M\+Q\+T\+T.\+h.

\mbox{\Hypertarget{class_cool_m_q_t_t_a4492f52a441e83cc5151010317fdb52d}\label{class_cool_m_q_t_t_a4492f52a441e83cc5151010317fdb52d}} 
\index{Cool\+M\+Q\+TT@{Cool\+M\+Q\+TT}!in\+Topic@{in\+Topic}}
\index{in\+Topic@{in\+Topic}!Cool\+M\+Q\+TT@{Cool\+M\+Q\+TT}}
\subsubsection{\texorpdfstring{in\+Topic}{inTopic}}
{\footnotesize\ttfamily char Cool\+M\+Q\+T\+T\+::in\+Topic\mbox{[}50\mbox{]} =\{\textquotesingle{}0\textquotesingle{}\}\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 78 of file Cool\+M\+Q\+T\+T.\+h.

\mbox{\Hypertarget{class_cool_m_q_t_t_ab8bb951f87ddbf92db74c2ad16a3e53e}\label{class_cool_m_q_t_t_ab8bb951f87ddbf92db74c2ad16a3e53e}} 
\index{Cool\+M\+Q\+TT@{Cool\+M\+Q\+TT}!mqtt\+Server@{mqtt\+Server}}
\index{mqtt\+Server@{mqtt\+Server}!Cool\+M\+Q\+TT@{Cool\+M\+Q\+TT}}
\subsubsection{\texorpdfstring{mqtt\+Server}{mqttServer}}
{\footnotesize\ttfamily char Cool\+M\+Q\+T\+T\+::mqtt\+Server\mbox{[}50\mbox{]} =\{\textquotesingle{}0\textquotesingle{}\}\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 74 of file Cool\+M\+Q\+T\+T.\+h.

\mbox{\Hypertarget{class_cool_m_q_t_t_af6b19e7074dbbb4ae493c44dcb53f7ff}\label{class_cool_m_q_t_t_af6b19e7074dbbb4ae493c44dcb53f7ff}} 
\index{Cool\+M\+Q\+TT@{Cool\+M\+Q\+TT}!msg@{msg}}
\index{msg@{msg}!Cool\+M\+Q\+TT@{Cool\+M\+Q\+TT}}
\subsubsection{\texorpdfstring{msg}{msg}}
{\footnotesize\ttfamily String Cool\+M\+Q\+T\+T\+::msg =\char`\"{}\char`\"{}\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 76 of file Cool\+M\+Q\+T\+T.\+h.

\mbox{\Hypertarget{class_cool_m_q_t_t_a3240388137b885775aadf38e96b24c6b}\label{class_cool_m_q_t_t_a3240388137b885775aadf38e96b24c6b}} 
\index{Cool\+M\+Q\+TT@{Cool\+M\+Q\+TT}!new\+Msg@{new\+Msg}}
\index{new\+Msg@{new\+Msg}!Cool\+M\+Q\+TT@{Cool\+M\+Q\+TT}}
\subsubsection{\texorpdfstring{new\+Msg}{newMsg}}
{\footnotesize\ttfamily bool Cool\+M\+Q\+T\+T\+::new\+Msg =0\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 90 of file Cool\+M\+Q\+T\+T.\+h.

\mbox{\Hypertarget{class_cool_m_q_t_t_a109c786a17b463f9eeba046194279522}\label{class_cool_m_q_t_t_a109c786a17b463f9eeba046194279522}} 
\index{Cool\+M\+Q\+TT@{Cool\+M\+Q\+TT}!out\+Topic@{out\+Topic}}
\index{out\+Topic@{out\+Topic}!Cool\+M\+Q\+TT@{Cool\+M\+Q\+TT}}
\subsubsection{\texorpdfstring{out\+Topic}{outTopic}}
{\footnotesize\ttfamily char Cool\+M\+Q\+T\+T\+::out\+Topic\mbox{[}50\mbox{]} =\{\textquotesingle{}0\textquotesingle{}\}\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 80 of file Cool\+M\+Q\+T\+T.\+h.

\mbox{\Hypertarget{class_cool_m_q_t_t_a3db37ef9ed3b05b2a8d44edba0e7d3cc}\label{class_cool_m_q_t_t_a3db37ef9ed3b05b2a8d44edba0e7d3cc}} 
\index{Cool\+M\+Q\+TT@{Cool\+M\+Q\+TT}!previous\+Log\+Time@{previous\+Log\+Time}}
\index{previous\+Log\+Time@{previous\+Log\+Time}!Cool\+M\+Q\+TT@{Cool\+M\+Q\+TT}}
\subsubsection{\texorpdfstring{previous\+Log\+Time}{previousLogTime}}
{\footnotesize\ttfamily unsigned long Cool\+M\+Q\+T\+T\+::previous\+Log\+Time =0\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 92 of file Cool\+M\+Q\+T\+T.\+h.

\mbox{\Hypertarget{class_cool_m_q_t_t_a8cd47e45d457f908d4b4390b35aaee83}\label{class_cool_m_q_t_t_a8cd47e45d457f908d4b4390b35aaee83}} 
\index{Cool\+M\+Q\+TT@{Cool\+M\+Q\+TT}!user@{user}}
\index{user@{user}!Cool\+M\+Q\+TT@{Cool\+M\+Q\+TT}}
\subsubsection{\texorpdfstring{user}{user}}
{\footnotesize\ttfamily char Cool\+M\+Q\+T\+T\+::user\mbox{[}50\mbox{]} =\{\textquotesingle{}0\textquotesingle{}\}\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 82 of file Cool\+M\+Q\+T\+T.\+h.



The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
/home/ashiroji/\+Arduino/libraries/\+Cool\+Board/src/\hyperlink{_cool_m_q_t_t_8h}{Cool\+M\+Q\+T\+T.\+h}\item 
/home/ashiroji/\+Arduino/libraries/\+Cool\+Board/src/\hyperlink{_cool_m_q_t_t_8cpp}{Cool\+M\+Q\+T\+T.\+cpp}\end{DoxyCompactItemize}
