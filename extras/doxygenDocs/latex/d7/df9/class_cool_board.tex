\hypertarget{class_cool_board}{}\section{Cool\+Board Class Reference}
\label{class_cool_board}\index{Cool\+Board@{Cool\+Board}}


This class manages the \hyperlink{class_cool_board}{Cool\+Board} and all of Its functions.  




{\ttfamily \#include $<$Cool\+Board.\+h$>$}



Collaboration diagram for Cool\+Board\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d5/d3a/class_cool_board__coll__graph}
\end{center}
\end{figure}
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{class_cool_board_a8b88fd781e22e93025dd63474113b7e4}{Cool\+Board} ()
\item 
void \hyperlink{class_cool_board_acba7c5aef7268b2c0044bdb54d3b9d76}{begin} ()
\item 
bool \hyperlink{class_cool_board_a583a874c09c07e70a6eb9229fc4beddb}{config} ()
\item 
void \hyperlink{class_cool_board_a8612756d3f73198cdde857a66f0fe690}{update} (const char $\ast$\hyperlink{class_cool_board_a7b835fafd449e5282f7f91d787a2dc15}{answer})
\item 
void \hyperlink{class_cool_board_ae6b5e1274d760462290192acea4adca8}{off\+Line\+Mode} ()
\item 
void \hyperlink{class_cool_board_aa0bbc4bc605e35618d18e68795c61363}{on\+Line\+Mode} ()
\item 
int \hyperlink{class_cool_board_a519de78b807f8ec6463ff484eb925918}{connect} ()
\item 
int \hyperlink{class_cool_board_ad7442cf4b62c7b0d5bd62a0f75ffc065}{is\+Connected} ()
\item 
unsigned long \hyperlink{class_cool_board_a7508e029f2ee17bb747ffab599285e0d}{get\+Log\+Interval} ()
\item 
void \hyperlink{class_cool_board_a486507b8f0981d3cc671ed31c2145755}{print\+Conf} ()
\item 
void \hyperlink{class_cool_board_a069952cdcb2e7f68518aa429eceadb6e}{sleep} (unsigned long interval)
\item 
String \hyperlink{class_cool_board_ad03abdce2e65f520bbf2cff0f2d083cf}{read\+Sensors} ()
\item 
void \hyperlink{class_cool_board_a397b46fadab8f530a8cf4d914c561366}{init\+Read\+I2C} ()
\item 
String \hyperlink{class_cool_board_ae7358fb6e623cfc81b775f5f1734909b}{user\+Data} ()
\end{DoxyCompactItemize}
\subsection*{Private Attributes}
\begin{DoxyCompactItemize}
\item 
\hyperlink{class_cool_file_system}{Cool\+File\+System} \hyperlink{class_cool_board_a42c2586fbb13ff7f06538e9284e8538d}{file\+System}
\item 
\hyperlink{class_cool_board_sensors}{Cool\+Board\+Sensors} \hyperlink{class_cool_board_af102be5288bd7f7a8e59b13f86e26a00}{cool\+Board\+Sensors}
\item 
\hyperlink{class_cool_board_led}{Cool\+Board\+Led} \hyperlink{class_cool_board_a1b1d3c684a5baa56b08486e192fd8e97}{cool\+Board\+Led}
\item 
\hyperlink{class_cool_time}{Cool\+Time} \hyperlink{class_cool_board_a50d2a6716879d64a85f3c6b44ad63275}{rtc}
\item 
\hyperlink{class_cool_wifi}{Cool\+Wifi} \hyperlink{class_cool_board_acd88e6003606b47479ebba81e4aceeca}{wifi\+Manager}
\item 
\hyperlink{class_cool_m_q_t_t}{Cool\+M\+Q\+TT} \hyperlink{class_cool_board_a2399f44d7c23c1149a335cb3b46d90f1}{mqtt}
\item 
\hyperlink{class_jetpack}{Jetpack} \hyperlink{class_cool_board_a30b1357881b01ccbec676856a91e48e9}{jet\+Pack}
\item 
\hyperlink{class_irene3000}{Irene3000} \hyperlink{class_cool_board_ad103718ce316006c4695b8eb312eaf11}{irene3000}
\item 
\hyperlink{class_external_sensors}{External\+Sensors} \hyperlink{class_cool_board_a09e26264839c65873eb56af476eff6b2}{external\+Sensors}
\item 
\hyperlink{class_cool_board_actor}{Cool\+Board\+Actor} \hyperlink{class_cool_board_a4ac693895c21025b8808653f2a4316e6}{on\+Board\+Actor}
\item 
bool \hyperlink{class_cool_board_a6395459131d6889a3005f79c7a35e964}{user\+Active} =0
\item 
bool \hyperlink{class_cool_board_a9c3f7ac625481ee2ae802a25d97a4ae0}{irene\+Active} =0
\item 
bool \hyperlink{class_cool_board_a9be03a913d26e558328935ca3b59a75e}{jetpack\+Active} =0
\item 
bool \hyperlink{class_cool_board_a638b00b76aeb819ecfd4c10b8cdd7bb7}{external\+Sensors\+Active} =0
\item 
bool \hyperlink{class_cool_board_a0a51b2287139f66c738101fb53139230}{sleep\+Active} =0
\item 
bool \hyperlink{class_cool_board_a7c8e505a5804b109e112d5a03df6ea2b}{manual} =0
\item 
unsigned long \hyperlink{class_cool_board_a84bc94413b64973e4aba8c467c97006c}{log\+Interval} =1
\item 
String \hyperlink{class_cool_board_a427fb753dd8575bdf821c70a5c63d695}{data} =\char`\"{}\char`\"{}
\item 
String \hyperlink{class_cool_board_a7b835fafd449e5282f7f91d787a2dc15}{answer} =\char`\"{}\char`\"{}
\item 
const int \hyperlink{class_cool_board_af1fe1376fc66f93dee80b327ca695377}{En\+I2C} = 5
\end{DoxyCompactItemize}


\subsection{Detailed Description}
This class manages the \hyperlink{class_cool_board}{Cool\+Board} and all of Its functions. 

Definition at line 34 of file Cool\+Board.\+h.



\subsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{class_cool_board_a8b88fd781e22e93025dd63474113b7e4}\label{class_cool_board_a8b88fd781e22e93025dd63474113b7e4}} 
\index{Cool\+Board@{Cool\+Board}!Cool\+Board@{Cool\+Board}}
\index{Cool\+Board@{Cool\+Board}!Cool\+Board@{Cool\+Board}}
\subsubsection{\texorpdfstring{Cool\+Board()}{CoolBoard()}}
{\footnotesize\ttfamily Cool\+Board\+::\+Cool\+Board (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

\hyperlink{class_cool_board_a8b88fd781e22e93025dd63474113b7e4}{Cool\+Board\+::\+Cool\+Board()}\+: This Constructor is provided to start the I2C interface and Init the different used pins 

Definition at line 28 of file Cool\+Board.\+cpp.


\begin{DoxyCode}
29 \{
30 
31 \textcolor{preprocessor}{#if DEBUG == 1}
32 
33     Serial.println( F(\textcolor{stringliteral}{"Entering CoolBoard Constructor"}) );
34     Serial.println();
35 
36 \textcolor{preprocessor}{#endif}
37     
38     Wire.begin(2, 14);                       \textcolor{comment}{//I2C init }
39 
40     pinMode(\hyperlink{class_cool_board_af1fe1376fc66f93dee80b327ca695377}{EnI2C}, OUTPUT);           \textcolor{comment}{//Declare I2C Enable pin }
41 
42 \}
\end{DoxyCode}


\subsection{Member Function Documentation}
\mbox{\Hypertarget{class_cool_board_acba7c5aef7268b2c0044bdb54d3b9d76}\label{class_cool_board_acba7c5aef7268b2c0044bdb54d3b9d76}} 
\index{Cool\+Board@{Cool\+Board}!begin@{begin}}
\index{begin@{begin}!Cool\+Board@{Cool\+Board}}
\subsubsection{\texorpdfstring{begin()}{begin()}}
{\footnotesize\ttfamily void Cool\+Board\+::begin (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

\hyperlink{class_cool_board_acba7c5aef7268b2c0044bdb54d3b9d76}{Cool\+Board\+::begin()}\+: This method is provided to configure and start the used Cool\+Kit Parts. It also starts the first connection try If Serial is enabled,it prints the configuration of the used parts. 

Definition at line 53 of file Cool\+Board.\+cpp.


\begin{DoxyCode}
54 \{
55 
56 \textcolor{preprocessor}{#if DEBUG == 1}
57 
58     Serial.println( F(\textcolor{stringliteral}{"Starting the CoolBoard  "})  );
59     Serial.println( F(\textcolor{stringliteral}{"Entering CoolBoard.begin() "})  );
60     Serial.println();
61 \textcolor{preprocessor}{#endif  }
62 
63 \textcolor{preprocessor}{#if DEBUG == 0}
64     Serial.println( F(\textcolor{stringliteral}{"Starting Coolboard..."}));
65 \textcolor{preprocessor}{#endif}
66 
67 
68     delay(100);
69     
70     \hyperlink{class_cool_board_a1b1d3c684a5baa56b08486e192fd8e97}{coolBoardLed}.\hyperlink{class_cool_board_led_a30fadd4cbec17ceea428bf7a32207e87}{write}(255,128,0);\textcolor{comment}{//orange}
71 
72     this->\hyperlink{class_cool_board_a397b46fadab8f530a8cf4d914c561366}{initReadI2C}();
73     delay(50);
74 
75     \hyperlink{class_cool_board_af102be5288bd7f7a8e59b13f86e26a00}{coolBoardSensors}.\hyperlink{class_cool_board_sensors_a9a218895c5423375c33c08f2c56fb23a}{config}();
76     \hyperlink{class_cool_board_af102be5288bd7f7a8e59b13f86e26a00}{coolBoardSensors}.\hyperlink{class_cool_board_sensors_a97095823ef7c8f5290812f1405b966b3}{begin}();
77     delay(100);
78     
79     \hyperlink{class_cool_board_a4ac693895c21025b8808653f2a4316e6}{onBoardActor}.\hyperlink{class_cool_board_actor_a5af5538fc7d169f63127e06d5219bcd4}{config}();
80     \hyperlink{class_cool_board_a4ac693895c21025b8808653f2a4316e6}{onBoardActor}.\hyperlink{class_cool_board_actor_a7f4422fd85a5510bc2cdfd68e109be5e}{begin}();
81     delay(100);
82     
83     \hyperlink{class_cool_board_acd88e6003606b47479ebba81e4aceeca}{wifiManager}.\hyperlink{class_cool_wifi_a4eb2f6b9b09dd588964b88b6c70122c0}{config}();
84     \hyperlink{class_cool_board_acd88e6003606b47479ebba81e4aceeca}{wifiManager}.\hyperlink{class_cool_wifi_a46942fed90e475112cc10b78a32e7aaa}{begin}();
85     delay(100);
86 
87     \hyperlink{class_cool_board_a2399f44d7c23c1149a335cb3b46d90f1}{mqtt}.\hyperlink{class_cool_m_q_t_t_a9b703de4f1358f0ee7a5e8c44979c648}{config}();
88     \hyperlink{class_cool_board_a2399f44d7c23c1149a335cb3b46d90f1}{mqtt}.\hyperlink{class_cool_m_q_t_t_ac9248808641ebf3054ed0620ea9d0100}{begin}();
89     delay(100);
90 
91 \textcolor{preprocessor}{#if DEBUG == 1}
92 
93     \hyperlink{class_cool_board_a1b1d3c684a5baa56b08486e192fd8e97}{coolBoardLed}.\hyperlink{class_cool_board_led_a8ed3053a36f0ed4a131f43b5b17efb61}{printConf}();
94 
95     \hyperlink{class_cool_board_af102be5288bd7f7a8e59b13f86e26a00}{coolBoardSensors}.\hyperlink{class_cool_board_sensors_af6fd79505815b204c178617ecf54c873}{printConf}();
96 
97     \hyperlink{class_cool_board_a4ac693895c21025b8808653f2a4316e6}{onBoardActor}.\hyperlink{class_cool_board_actor_aabb10e7aebc3249ffc940530de29f84a}{printConf}();
98 
99     \hyperlink{class_cool_board_acd88e6003606b47479ebba81e4aceeca}{wifiManager}.\hyperlink{class_cool_wifi_a9e6105c6d13d35ec510f6633da9e0223}{printConf}();
100 
101     \hyperlink{class_cool_board_a2399f44d7c23c1149a335cb3b46d90f1}{mqtt}.\hyperlink{class_cool_m_q_t_t_a40553a0ad4b5ecf1cb4411ab54ca85fb}{printConf}();
102     
103 
104 \textcolor{preprocessor}{#endif}
105 
106 
107     \textcolor{keywordflow}{if} (\hyperlink{class_cool_board_a9be03a913d26e558328935ca3b59a75e}{jetpackActive})
108     \{
109         \hyperlink{class_cool_board_a30b1357881b01ccbec676856a91e48e9}{jetPack}.\hyperlink{class_jetpack_ab065ee83e244265a2223a22f3ee4a719}{config}();
110         \hyperlink{class_cool_board_a30b1357881b01ccbec676856a91e48e9}{jetPack}.\hyperlink{class_jetpack_a5a53e1ebf7aaf3bf3e0d37ea64ca09a7}{begin}();
111 
112 \textcolor{preprocessor}{    #if DEBUG == 1}
113         
114         \hyperlink{class_cool_board_a30b1357881b01ccbec676856a91e48e9}{jetPack}.\hyperlink{class_jetpack_ac54a7bb4f9166bee32052253d9b1d306}{printConf}();
115 
116 \textcolor{preprocessor}{    #endif}
117         delay(100);
118     \}
119 
120     \textcolor{keywordflow}{if} (\hyperlink{class_cool_board_a9c3f7ac625481ee2ae802a25d97a4ae0}{ireneActive})
121     \{
122         \hyperlink{class_cool_board_ad103718ce316006c4695b8eb312eaf11}{irene3000}.\hyperlink{class_irene3000_afed5c35e4b23963c157847ef27c11e9c}{config}();
123         \hyperlink{class_cool_board_ad103718ce316006c4695b8eb312eaf11}{irene3000}.\hyperlink{class_irene3000_ad5891806c500ae1007afe52b9e304c2b}{begin}();
124 
125 \textcolor{preprocessor}{    #if DEBUG == 1}
126 
127         \hyperlink{class_cool_board_ad103718ce316006c4695b8eb312eaf11}{irene3000}.\hyperlink{class_irene3000_a7bc2414100b5e19eacc6630fa34b2654}{printConf}();
128 
129 \textcolor{preprocessor}{    #endif}
130         delay(100);
131     \}
132 
133     \textcolor{keywordflow}{if} (\hyperlink{class_cool_board_a638b00b76aeb819ecfd4c10b8cdd7bb7}{externalSensorsActive})
134     \{
135         \hyperlink{class_cool_board_a09e26264839c65873eb56af476eff6b2}{externalSensors}.\hyperlink{class_external_sensors_a862a4bd11346b37270d0244c2adabe5a}{config}();
136         \hyperlink{class_cool_board_a09e26264839c65873eb56af476eff6b2}{externalSensors}.\hyperlink{class_external_sensors_a58ede0d786a86417254708870f04a21e}{begin}();
137 
138 \textcolor{preprocessor}{    #if DEBUG == 1}
139 
140         \hyperlink{class_cool_board_a09e26264839c65873eb56af476eff6b2}{externalSensors}.\hyperlink{class_external_sensors_a78c2bf55084435dd51d3c559b2d3c6f3}{printConf}();
141 
142 \textcolor{preprocessor}{    #endif}
143         delay(100);
144     \}
145     
146     \hyperlink{class_cool_board_a1b1d3c684a5baa56b08486e192fd8e97}{coolBoardLed}.\hyperlink{class_cool_board_led_a93d545679237e8cc858324367149775c}{fadeOut}(255,128,0,0.5);\textcolor{comment}{//orange}
147 
148     this->\hyperlink{class_cool_board_a519de78b807f8ec6463ff484eb925918}{connect}();
149     delay(100);
150 
151     \hyperlink{class_cool_board_a50d2a6716879d64a85f3c6b44ad63275}{rtc}.\hyperlink{class_cool_time_a87c28260c1bc77091162cbcf1ee2e129}{config}();
152     \hyperlink{class_cool_board_a50d2a6716879d64a85f3c6b44ad63275}{rtc}.\hyperlink{class_cool_time_ab1976cf718b950bc31e003c3323b8adb}{begin}();
153 
154 \textcolor{preprocessor}{#if DEBUG == 1}
155 
156     \hyperlink{class_cool_board_a50d2a6716879d64a85f3c6b44ad63275}{rtc}.\hyperlink{class_cool_time_af355e7f9b3898211cd2ff25eab5933b1}{printConf}();
157 
158 \textcolor{preprocessor}{#endif}
159     delay(100);
160     
161     \hyperlink{class_cool_board_a1b1d3c684a5baa56b08486e192fd8e97}{coolBoardLed}.\hyperlink{class_cool_board_led_a96e1ea13003eee34c9dbcef340404426}{blink}(0,255,0,0.5);\textcolor{comment}{//green}
162 
163 \}
\end{DoxyCode}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=550pt]{d7/df9/class_cool_board_acba7c5aef7268b2c0044bdb54d3b9d76_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{class_cool_board_a583a874c09c07e70a6eb9229fc4beddb}\label{class_cool_board_a583a874c09c07e70a6eb9229fc4beddb}} 
\index{Cool\+Board@{Cool\+Board}!config@{config}}
\index{config@{config}!Cool\+Board@{Cool\+Board}}
\subsubsection{\texorpdfstring{config()}{config()}}
{\footnotesize\ttfamily bool Cool\+Board\+::config (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

\hyperlink{class_cool_board_a583a874c09c07e70a6eb9229fc4beddb}{Cool\+Board\+::config()}\+: This method is provided to configure the \hyperlink{class_cool_board}{Cool\+Board} \+: -\/log interval -\/irene3000 activated/deactivated -\/jetpack activated/deactivated -\/external Sensors activated/deactivated -\/mqtt server timeout

\begin{DoxyReturn}{Returns}
true if configuration is done, false otherwise 
\end{DoxyReturn}


Definition at line 705 of file Cool\+Board.\+cpp.


\begin{DoxyCode}
706 \{
707     yield();
708 
709 \textcolor{preprocessor}{#if DEBUG == 1}
710 
711     Serial.println( F(\textcolor{stringliteral}{"Entering CoolBoard.config() "}) );
712     Serial.println();
713 
714 \textcolor{preprocessor}{#endif}
715 \textcolor{preprocessor}{#if DEBUG == 0}
716     Serial.println();
717     Serial.println( F(\textcolor{stringliteral}{"Loading configuration for this CoolBoard..."}));
718 \textcolor{preprocessor}{#endif }
719 
720     \textcolor{comment}{//open file system}
721     \hyperlink{class_cool_board_a42c2586fbb13ff7f06538e9284e8538d}{fileSystem}.\hyperlink{class_cool_file_system_a6ba6f666ed4c530174f8569d2c636748}{begin}();
722     
723     \textcolor{comment}{//start the led}
724     \hyperlink{class_cool_board_a1b1d3c684a5baa56b08486e192fd8e97}{coolBoardLed}.\hyperlink{class_cool_board_led_a1b60e5e30bea96c49ed62ed1bf1ffc8b}{config}();
725     \hyperlink{class_cool_board_a1b1d3c684a5baa56b08486e192fd8e97}{coolBoardLed}.\hyperlink{class_cool_board_led_ae3cbde8affcc6f011cbd698c8ef911f6}{begin}();
726     \hyperlink{class_cool_board_a1b1d3c684a5baa56b08486e192fd8e97}{coolBoardLed}.\hyperlink{class_cool_board_led_ab778f5e7bed0ab74e3906d82110493c3}{fadeIn}(243,171,46,0.5);\textcolor{comment}{//shade of orange     }
727 
728     
729     \textcolor{comment}{//open configuration file}
730     File configFile = SPIFFS.open(\textcolor{stringliteral}{"/coolBoardConfig.json"}, \textcolor{stringliteral}{"r"});
731     
732     \textcolor{keywordflow}{if} (!configFile)
733 
734     \{
735     
736         Serial.println( F(\textcolor{stringliteral}{"failed to read /coolBoardConfig.json  "}) );
737 
738         \hyperlink{class_cool_board_a1b1d3c684a5baa56b08486e192fd8e97}{coolBoardLed}.\hyperlink{class_cool_board_led_a96e1ea13003eee34c9dbcef340404426}{blink}(255,0,0,0.5);\textcolor{comment}{//shade of red     }
739         \textcolor{keywordflow}{return}(\textcolor{keyword}{false});
740     \}
741 
742     \textcolor{keywordflow}{else}
743     \{
744         \textcolor{keywordtype}{size\_t} size = configFile.size();
745 
746         \textcolor{comment}{// Allocate a buffer to store contents of the file.}
747         std::unique\_ptr < char[] > buf(\textcolor{keyword}{new} \textcolor{keywordtype}{char}[size]);
748 
749         configFile.readBytes(buf.get(), size);
750 
751         DynamicJsonBuffer jsonBuffer;
752 
753         JsonObject & json = jsonBuffer.parseObject(buf.get());
754 
755         \textcolor{keywordflow}{if} (!json.success())
756         \{
757         
758             Serial.println( F(\textcolor{stringliteral}{"failed to parse CoolBoard Config json object "}) );
759     
760             \hyperlink{class_cool_board_a1b1d3c684a5baa56b08486e192fd8e97}{coolBoardLed}.\hyperlink{class_cool_board_led_a96e1ea13003eee34c9dbcef340404426}{blink}(255,0,0,0.5);\textcolor{comment}{//shade of red     }
761             \textcolor{keywordflow}{return}(\textcolor{keyword}{false});
762         \}
763 
764         \textcolor{keywordflow}{else}
765         \{   
766         
767 \textcolor{preprocessor}{        #if DEBUG == 1}
768             
769             Serial.println( F(\textcolor{stringliteral}{"configuration json : "}) );
770             json.printTo(Serial);
771             Serial.println();
772             
773             Serial.print(F(\textcolor{stringliteral}{"jsonBuffer size : "}));
774             Serial.print(jsonBuffer.size());
775             Serial.println();
776 
777 \textcolor{preprocessor}{        #endif}
778             
779             \textcolor{comment}{//parsing userActive Key}
780             \textcolor{keywordflow}{if} (json[\textcolor{stringliteral}{"userActive"}].success())
781             \{
782                 \textcolor{keyword}{this} -> \hyperlink{class_cool_board_a6395459131d6889a3005f79c7a35e964}{userActive} = json[\textcolor{stringliteral}{"userActive"}];
783             \}
784 
785             \textcolor{keywordflow}{else}
786             \{
787                 \textcolor{keyword}{this} -> \hyperlink{class_cool_board_a6395459131d6889a3005f79c7a35e964}{userActive} = \textcolor{keyword}{this} -> \hyperlink{class_cool_board_a6395459131d6889a3005f79c7a35e964}{userActive};
788             \}
789             json[\textcolor{stringliteral}{"userActive"}] = \textcolor{keyword}{this} -> \hyperlink{class_cool_board_a6395459131d6889a3005f79c7a35e964}{userActive};
790 
791             \textcolor{comment}{//parsing logInterval key}
792             \textcolor{keywordflow}{if} (json[\textcolor{stringliteral}{"logInterval"}].success())
793             \{
794                 \textcolor{keyword}{this} -> \hyperlink{class_cool_board_a84bc94413b64973e4aba8c467c97006c}{logInterval} = json[\textcolor{stringliteral}{"logInterval"}];
795             \}
796             \textcolor{keywordflow}{else}
797             \{
798                 \textcolor{keyword}{this} -> \hyperlink{class_cool_board_a84bc94413b64973e4aba8c467c97006c}{logInterval} = \textcolor{keyword}{this} -> \hyperlink{class_cool_board_a84bc94413b64973e4aba8c467c97006c}{logInterval};
799             \}
800             json[\textcolor{stringliteral}{"logInterval"}] = \textcolor{keyword}{this} -> \hyperlink{class_cool_board_a84bc94413b64973e4aba8c467c97006c}{logInterval};
801             
802             \textcolor{comment}{//parsing ireneActive key           }
803             \textcolor{keywordflow}{if} (json[\textcolor{stringliteral}{"ireneActive"}].success())
804             \{
805                 \textcolor{keyword}{this} -> \hyperlink{class_cool_board_a9c3f7ac625481ee2ae802a25d97a4ae0}{ireneActive} = json[\textcolor{stringliteral}{"ireneActive"}];
806             \}
807             \textcolor{keywordflow}{else}
808             \{
809                 \textcolor{keyword}{this} -> \hyperlink{class_cool_board_a9c3f7ac625481ee2ae802a25d97a4ae0}{ireneActive} = \textcolor{keyword}{this} -> \hyperlink{class_cool_board_a9c3f7ac625481ee2ae802a25d97a4ae0}{ireneActive};
810             \}
811             json[\textcolor{stringliteral}{"ireneActive"}] = \textcolor{keyword}{this} -> \hyperlink{class_cool_board_a9c3f7ac625481ee2ae802a25d97a4ae0}{ireneActive};
812             
813             \textcolor{comment}{//parsing jetpackActive key}
814             \textcolor{keywordflow}{if} (json[\textcolor{stringliteral}{"jetpackActive"}].success())
815             \{
816                 \textcolor{keyword}{this} -> \hyperlink{class_cool_board_a9be03a913d26e558328935ca3b59a75e}{jetpackActive} = json[\textcolor{stringliteral}{"jetpackActive"}];
817             \}
818             \textcolor{keywordflow}{else}
819             \{
820                 \textcolor{keyword}{this} -> \hyperlink{class_cool_board_a9be03a913d26e558328935ca3b59a75e}{jetpackActive} = \textcolor{keyword}{this} -> \hyperlink{class_cool_board_a9be03a913d26e558328935ca3b59a75e}{jetpackActive};
821             \}
822             json[\textcolor{stringliteral}{"jetpackActive"}] = \textcolor{keyword}{this} -> \hyperlink{class_cool_board_a9be03a913d26e558328935ca3b59a75e}{jetpackActive};
823 
824             \textcolor{comment}{//parsing externalSensorsActive key}
825             \textcolor{keywordflow}{if} (json[\textcolor{stringliteral}{"externalSensorsActive"}].success())
826             \{
827                 \textcolor{keyword}{this} -> \hyperlink{class_cool_board_a638b00b76aeb819ecfd4c10b8cdd7bb7}{externalSensorsActive} = json[\textcolor{stringliteral}{"externalSensorsActive"}];
828             \}
829             \textcolor{keywordflow}{else}
830             \{
831                 \textcolor{keyword}{this} -> \hyperlink{class_cool_board_a638b00b76aeb819ecfd4c10b8cdd7bb7}{externalSensorsActive} = \textcolor{keyword}{this} -> 
      \hyperlink{class_cool_board_a638b00b76aeb819ecfd4c10b8cdd7bb7}{externalSensorsActive};
832             \}
833             json[\textcolor{stringliteral}{"externalSensorsActive"}] = \textcolor{keyword}{this} -> \hyperlink{class_cool_board_a638b00b76aeb819ecfd4c10b8cdd7bb7}{externalSensorsActive};
834 
835             
836             \textcolor{comment}{//parsing sleepActive key}
837             \textcolor{keywordflow}{if} (json[\textcolor{stringliteral}{"sleepActive"}].success())
838             \{
839                 \textcolor{keyword}{this} -> \hyperlink{class_cool_board_a0a51b2287139f66c738101fb53139230}{sleepActive} = json[\textcolor{stringliteral}{"sleepActive"}];
840             \}
841             \textcolor{keywordflow}{else}
842             \{
843                 \textcolor{keyword}{this} -> \hyperlink{class_cool_board_a0a51b2287139f66c738101fb53139230}{sleepActive} = \textcolor{keyword}{this} -> \hyperlink{class_cool_board_a0a51b2287139f66c738101fb53139230}{sleepActive};
844             \}
845             json[\textcolor{stringliteral}{"sleepActive"}] = \textcolor{keyword}{this} -> \hyperlink{class_cool_board_a0a51b2287139f66c738101fb53139230}{sleepActive};
846 
847 
848             \textcolor{comment}{//parsing manual key}
849             \textcolor{keywordflow}{if} (json[\textcolor{stringliteral}{"manual"}].success())
850             \{
851                 \textcolor{keyword}{this} -> \hyperlink{class_cool_board_a7c8e505a5804b109e112d5a03df6ea2b}{manual} = json[\textcolor{stringliteral}{"manual"}];
852             \}
853             \textcolor{keywordflow}{else}
854             \{
855                 \textcolor{keyword}{this} -> \hyperlink{class_cool_board_a7c8e505a5804b109e112d5a03df6ea2b}{manual} = \textcolor{keyword}{this} -> \hyperlink{class_cool_board_a7c8e505a5804b109e112d5a03df6ea2b}{manual};
856             \}
857             json[\textcolor{stringliteral}{"manual"}] = \textcolor{keyword}{this} -> \hyperlink{class_cool_board_a7c8e505a5804b109e112d5a03df6ea2b}{manual};
858 
859 
860 
861             \textcolor{comment}{//saving the current/correct configuration}
862             configFile.close();
863             configFile = SPIFFS.open(\textcolor{stringliteral}{"/coolBoardConfig.json"}, \textcolor{stringliteral}{"w"});
864             \textcolor{keywordflow}{if} (!configFile)
865             \{
866             
867                 Serial.println( F(\textcolor{stringliteral}{"failed to write to /coolBoardConfig.json"}) );
868                 Serial.println();
869 
870                 \hyperlink{class_cool_board_a1b1d3c684a5baa56b08486e192fd8e97}{coolBoardLed}.\hyperlink{class_cool_board_led_a96e1ea13003eee34c9dbcef340404426}{blink}(255,0,0,0.5);\textcolor{comment}{//shade of red     }
871                 \textcolor{keywordflow}{return}(\textcolor{keyword}{false});
872             \}
873 
874             json.printTo(configFile);
875             configFile.close();
876 \textcolor{preprocessor}{            #if DEBUG == 0}
877 
878                 Serial.println( F(\textcolor{stringliteral}{"Configuration loaded : OK"}));
879                 Serial.println();
880 
881 \textcolor{preprocessor}{            #endif}
882 
883             \textcolor{keywordflow}{return}(\textcolor{keyword}{true});
884         \}
885     \}
886 
887     \hyperlink{class_cool_board_a1b1d3c684a5baa56b08486e192fd8e97}{coolBoardLed}.\hyperlink{class_cool_board_led_ad5f0de4c628cbfbf49896042831c64ad}{strobe}(243,171,46,0.5);\textcolor{comment}{//shade of orange}
888     
889     \hyperlink{class_cool_board_a1b1d3c684a5baa56b08486e192fd8e97}{coolBoardLed}.\hyperlink{class_cool_board_led_a93d545679237e8cc858324367149775c}{fadeOut}(243,171,46,0.5);\textcolor{comment}{//shade of orange               }
890 \}
\end{DoxyCode}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d7/df9/class_cool_board_a583a874c09c07e70a6eb9229fc4beddb_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{class_cool_board_a519de78b807f8ec6463ff484eb925918}\label{class_cool_board_a519de78b807f8ec6463ff484eb925918}} 
\index{Cool\+Board@{Cool\+Board}!connect@{connect}}
\index{connect@{connect}!Cool\+Board@{Cool\+Board}}
\subsubsection{\texorpdfstring{connect()}{connect()}}
{\footnotesize\ttfamily int Cool\+Board\+::connect (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

\hyperlink{class_cool_board_a519de78b807f8ec6463ff484eb925918}{Cool\+Board\+::connect()}\+: This method is provided to manage the network connection and the mqtt connection.

\begin{DoxyReturn}{Returns}
mqtt client state 
\end{DoxyReturn}


Definition at line 224 of file Cool\+Board.\+cpp.


\begin{DoxyCode}
225 \{
226 
227 \textcolor{preprocessor}{#if DEBUG == 1  }
228 
229     Serial.println( F(\textcolor{stringliteral}{"Entering CoolBoard.connect "}) );
230     Serial.println();
231     Serial.println( F(\textcolor{stringliteral}{"Connecting the CoolBoard  "}) );
232     delay(100);
233 
234 \textcolor{preprocessor}{#endif}
235     \hyperlink{class_cool_board_a1b1d3c684a5baa56b08486e192fd8e97}{coolBoardLed}.\hyperlink{class_cool_board_led_a30fadd4cbec17ceea428bf7a32207e87}{write}(0,0,255);\textcolor{comment}{//blue}
236 
237     
238             
239     
240 \textcolor{preprocessor}{#if DEBUG == 1      }
241 
242     Serial.println( F(\textcolor{stringliteral}{"Launching CoolWifi"}) );
243     Serial.println();
244 
245 \textcolor{preprocessor}{#endif}
246     \hyperlink{class_cool_board_acd88e6003606b47479ebba81e4aceeca}{wifiManager}.\hyperlink{class_cool_wifi_ad060353050f40d032a2dbf9e54a768bf}{connect}();
247     delay(100);
248 
249 
250     \textcolor{comment}{//only attempt MQTT connection when Wifi is Connected}
251     \textcolor{keywordflow}{if} (\hyperlink{class_cool_board_acd88e6003606b47479ebba81e4aceeca}{wifiManager}.\hyperlink{class_cool_wifi_a1c7b4d82a4098d346e7593dce92039fa}{state}() == WL\_CONNECTED)
252     \{
253 
254 \textcolor{preprocessor}{    #if DEBUG == 1  }
255     
256         Serial.println( F(\textcolor{stringliteral}{"Launching mqtt.connect()"}) );
257         Serial.println();
258     
259 \textcolor{preprocessor}{    #endif  }
260         \textcolor{comment}{//logInterval in seconds}
261         \hyperlink{class_cool_board_a2399f44d7c23c1149a335cb3b46d90f1}{mqtt}.\hyperlink{class_cool_m_q_t_t_a50075d0ab23a327ab897fd6adad20eda}{connect}(\textcolor{keyword}{this} -> \hyperlink{class_cool_board_a7508e029f2ee17bb747ffab599285e0d}{getLogInterval}()*2);
262         delay(100);
263     \}
264     
265         
266     
267     
268 \textcolor{preprocessor}{#if DEBUG == 1}
269 
270     Serial.println( F(\textcolor{stringliteral}{"mqtt state is :"}) );
271     Serial.println(\hyperlink{class_cool_board_a2399f44d7c23c1149a335cb3b46d90f1}{mqtt}.\hyperlink{class_cool_m_q_t_t_a5d003307eff78efbd585e42b43b72b6d}{state}());
272     Serial.println();
273     delay(100);
274 
275 \textcolor{preprocessor}{#endif}
276 
277     \hyperlink{class_cool_board_a1b1d3c684a5baa56b08486e192fd8e97}{coolBoardLed}.\hyperlink{class_cool_board_led_a96e1ea13003eee34c9dbcef340404426}{blink}(0,0,255,0.5);\textcolor{comment}{//blue}
278 
279     \textcolor{keywordflow}{return}(\hyperlink{class_cool_board_a2399f44d7c23c1149a335cb3b46d90f1}{mqtt}.\hyperlink{class_cool_m_q_t_t_a5d003307eff78efbd585e42b43b72b6d}{state}());
280 \}
\end{DoxyCode}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d7/df9/class_cool_board_a519de78b807f8ec6463ff484eb925918_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=341pt]{d7/df9/class_cool_board_a519de78b807f8ec6463ff484eb925918_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{class_cool_board_a7508e029f2ee17bb747ffab599285e0d}\label{class_cool_board_a7508e029f2ee17bb747ffab599285e0d}} 
\index{Cool\+Board@{Cool\+Board}!get\+Log\+Interval@{get\+Log\+Interval}}
\index{get\+Log\+Interval@{get\+Log\+Interval}!Cool\+Board@{Cool\+Board}}
\subsubsection{\texorpdfstring{get\+Log\+Interval()}{getLogInterval()}}
{\footnotesize\ttfamily unsigned long Cool\+Board\+::get\+Log\+Interval (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

\hyperlink{class_cool_board_a7508e029f2ee17bb747ffab599285e0d}{Cool\+Board\+::get\+Log\+Interval()}\+: This method is provided to get the log interval

\begin{DoxyReturn}{Returns}
interval value in s 
\end{DoxyReturn}


Definition at line 1129 of file Cool\+Board.\+cpp.


\begin{DoxyCode}
1130 \{
1131 
1132 \textcolor{preprocessor}{#if DEBUG == 1}
1133 
1134     Serial.println( F(\textcolor{stringliteral}{"Entering CoolBoard.getLogInterval() "}) );
1135     Serial.println();
1136     Serial.println( F(\textcolor{stringliteral}{"log Interval is :"}) );
1137     Serial.println(\hyperlink{class_cool_board_a84bc94413b64973e4aba8c467c97006c}{logInterval});
1138     Serial.println();
1139 
1140 \textcolor{preprocessor}{#endif}
1141 
1142     \textcolor{keywordflow}{return}(\textcolor{keyword}{this} -> \hyperlink{class_cool_board_a84bc94413b64973e4aba8c467c97006c}{logInterval});
1143 \}
\end{DoxyCode}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d7/df9/class_cool_board_a7508e029f2ee17bb747ffab599285e0d_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{class_cool_board_a397b46fadab8f530a8cf4d914c561366}\label{class_cool_board_a397b46fadab8f530a8cf4d914c561366}} 
\index{Cool\+Board@{Cool\+Board}!init\+Read\+I2C@{init\+Read\+I2C}}
\index{init\+Read\+I2C@{init\+Read\+I2C}!Cool\+Board@{Cool\+Board}}
\subsubsection{\texorpdfstring{init\+Read\+I2\+C()}{initReadI2C()}}
{\footnotesize\ttfamily void Cool\+Board\+::init\+Read\+I2C (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

\hyperlink{class_cool_board_a397b46fadab8f530a8cf4d914c561366}{Cool\+Board\+::init\+Read\+I2\+C()}\+: This method is provided to enable the I2C Interface. 

Definition at line 1224 of file Cool\+Board.\+cpp.


\begin{DoxyCode}
1225 \{
1226 
1227 \textcolor{preprocessor}{#if DEBUG == 1}
1228 
1229     Serial.println( F(\textcolor{stringliteral}{"Entering CoolBoard.initReadI2C()"}) );
1230     Serial.println();
1231 
1232 \textcolor{preprocessor}{#endif}
1233  
1234     digitalWrite(\hyperlink{class_cool_board_af1fe1376fc66f93dee80b327ca695377}{EnI2C},HIGH);\textcolor{comment}{//HIGH= I2C Enable}
1235 
1236 \}
\end{DoxyCode}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d7/df9/class_cool_board_a397b46fadab8f530a8cf4d914c561366_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{class_cool_board_ad7442cf4b62c7b0d5bd62a0f75ffc065}\label{class_cool_board_ad7442cf4b62c7b0d5bd62a0f75ffc065}} 
\index{Cool\+Board@{Cool\+Board}!is\+Connected@{is\+Connected}}
\index{is\+Connected@{is\+Connected}!Cool\+Board@{Cool\+Board}}
\subsubsection{\texorpdfstring{is\+Connected()}{isConnected()}}
{\footnotesize\ttfamily int Cool\+Board\+::is\+Connected (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

\hyperlink{class_cool_board_ad7442cf4b62c7b0d5bd62a0f75ffc065}{Cool\+Board\+::is\+Connected()}

This method is provided to check if the card is connected to Wifi and M\+Q\+TT

\begin{DoxyReturn}{Returns}
0 \+: connected -\/1\+: Wifi Not Connected -\/2\+: M\+Q\+TT Not Connected 
\end{DoxyReturn}


Definition at line 176 of file Cool\+Board.\+cpp.


\begin{DoxyCode}
177 \{
178 
179 \textcolor{preprocessor}{#if DEBUG == 1  }
180 
181     Serial.println( F(\textcolor{stringliteral}{"Entering CoolBoard.isConnected "}) );
182     Serial.println();
183 
184 \textcolor{preprocessor}{#endif}
185     \textcolor{keywordflow}{if} (\hyperlink{class_cool_board_acd88e6003606b47479ebba81e4aceeca}{wifiManager}.\hyperlink{class_cool_wifi_a1c7b4d82a4098d346e7593dce92039fa}{state}() != WL\_CONNECTED)
186     \{
187     
188         Serial.println(F(\textcolor{stringliteral}{"Wifi Not Connected"}));
189 
190 \textcolor{preprocessor}{    #if DEBUG == 1}
191 
192         Serial.println(F(\textcolor{stringliteral}{"Wifi State is "}));
193         Serial.println(\hyperlink{class_cool_board_acd88e6003606b47479ebba81e4aceeca}{wifiManager}.\hyperlink{class_cool_wifi_a1c7b4d82a4098d346e7593dce92039fa}{state}());
194         
195 \textcolor{preprocessor}{    #endif}
196         \textcolor{keywordflow}{return}(-1);
197     \}
198     
199     \textcolor{keywordflow}{if}(\hyperlink{class_cool_board_a2399f44d7c23c1149a335cb3b46d90f1}{mqtt}.\hyperlink{class_cool_m_q_t_t_a5d003307eff78efbd585e42b43b72b6d}{state}() != 0)
200     \{
201         
202         Serial.println( F(\textcolor{stringliteral}{"MQTT not Connected"}));
203 
204 \textcolor{preprocessor}{    #if DEBUG==1}
205         Serial.println( F(\textcolor{stringliteral}{"mqtt state is :"}) );
206         Serial.println(\hyperlink{class_cool_board_a2399f44d7c23c1149a335cb3b46d90f1}{mqtt}.\hyperlink{class_cool_m_q_t_t_a5d003307eff78efbd585e42b43b72b6d}{state}());  
207     
208 \textcolor{preprocessor}{    #endif}
209 
210     \}
211     
212     \textcolor{keywordflow}{return}(0);
213 
214 \}
\end{DoxyCode}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d7/df9/class_cool_board_ad7442cf4b62c7b0d5bd62a0f75ffc065_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{class_cool_board_ae6b5e1274d760462290192acea4adca8}\label{class_cool_board_ae6b5e1274d760462290192acea4adca8}} 
\index{Cool\+Board@{Cool\+Board}!off\+Line\+Mode@{off\+Line\+Mode}}
\index{off\+Line\+Mode@{off\+Line\+Mode}!Cool\+Board@{Cool\+Board}}
\subsubsection{\texorpdfstring{off\+Line\+Mode()}{offLineMode()}}
{\footnotesize\ttfamily void Cool\+Board\+::off\+Line\+Mode (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

Cool\+Board\+::offline\+Mode()\+: This method is provided to manage the off\+Line mode\+: -\/read sensors -\/do actions -\/save data in the file system -\/if there is Wi\+Fi but no Internet \+: make data available over AP -\/if there is no connection \+: retry to connect 

Definition at line 551 of file Cool\+Board.\+cpp.


\begin{DoxyCode}
552 \{
553     \hyperlink{class_cool_board_a1b1d3c684a5baa56b08486e192fd8e97}{coolBoardLed}.\hyperlink{class_cool_board_led_af1cacbaa88db8bcf6042c1083ba41155}{fade}(51,100,50,0.5);\textcolor{comment}{//dark shade of green  }
554 \textcolor{preprocessor}{#if DEBUG == 1  }
555     
556     Serial.println( F(\textcolor{stringliteral}{"Entering off line mode "}) ); 
557     
558 \textcolor{preprocessor}{#endif}
559 
560 \textcolor{preprocessor}{#if DEBUG == 0}
561 
562     Serial.println( F(\textcolor{stringliteral}{"CoolBoard is in Offline Mode"}));
563 
564 \textcolor{preprocessor}{#endif}
565 
566     \textcolor{comment}{//read user data if user is active}
567     \textcolor{keywordflow}{if}(\hyperlink{class_cool_board_a6395459131d6889a3005f79c7a35e964}{userActive})
568     \{
569 
570         \hyperlink{class_cool_board_a1b1d3c684a5baa56b08486e192fd8e97}{coolBoardLed}.\hyperlink{class_cool_board_led_ab778f5e7bed0ab74e3906d82110493c3}{fadeIn}(245,237,27,0.5);\textcolor{comment}{//shade of yellow}
571 
572 \textcolor{preprocessor}{    #if DEBUG == 1}
573         
574         Serial.println( F(\textcolor{stringliteral}{"User is Active"}) );
575         Serial.println( F(\textcolor{stringliteral}{"Collecting User's data ( mac,username,timeStamp )"}) );
576         Serial.println();
577 
578 \textcolor{preprocessor}{    #endif}
579 
580         \hyperlink{class_cool_board_a1b1d3c684a5baa56b08486e192fd8e97}{coolBoardLed}.\hyperlink{class_cool_board_led_a96e1ea13003eee34c9dbcef340404426}{blink}(245,237,27,0.5);\textcolor{comment}{//shade of yellow   }
581 
582         \textcolor{comment}{//reading user data}
583         \hyperlink{class_cool_board_a427fb753dd8575bdf821c70a5c63d695}{data}=this->\hyperlink{class_cool_board_ae7358fb6e623cfc81b775f5f1734909b}{userData}();\textcolor{comment}{//\{"":"","":"","",""\}}
584 
585         \textcolor{comment}{//formatting json }
586         \hyperlink{class_cool_board_a427fb753dd8575bdf821c70a5c63d695}{data}.setCharAt( \hyperlink{class_cool_board_a427fb753dd8575bdf821c70a5c63d695}{data}.lastIndexOf(\textcolor{charliteral}{'\}'}) , \textcolor{charliteral}{','});\textcolor{comment}{//\{"":"","":"","","",}
587         
588                 
589         \textcolor{comment}{//read sensors data}
590 
591         Serial.println( F(\textcolor{stringliteral}{"Collecting sensors data "}) );
592         Serial.println();
593 
594         \hyperlink{class_cool_board_a427fb753dd8575bdf821c70a5c63d695}{data}+=this->\hyperlink{class_cool_board_ad03abdce2e65f520bbf2cff0f2d083cf}{readSensors}();\textcolor{comment}{//\{"":"","":"","","",\{.......\}}
595 
596         
597 
598         \textcolor{comment}{//formatting json correctly}
599         \hyperlink{class_cool_board_a427fb753dd8575bdf821c70a5c63d695}{data}.remove(\hyperlink{class_cool_board_a427fb753dd8575bdf821c70a5c63d695}{data}.lastIndexOf(\textcolor{charliteral}{'\{'}), 1);\textcolor{comment}{//\{"":"","":"","","",.......\}}
600 
601         \hyperlink{class_cool_board_a1b1d3c684a5baa56b08486e192fd8e97}{coolBoardLed}.\hyperlink{class_cool_board_led_a93d545679237e8cc858324367149775c}{fadeOut}(245,237,27,0.5);\textcolor{comment}{//shade of yellow}
602                 
603     \}   
604     \textcolor{keywordflow}{else}
605     \{
606         \textcolor{comment}{//read sensors data}
607 \textcolor{preprocessor}{    #if DEBUG == 1}
608 
609         Serial.println( F(\textcolor{stringliteral}{"Collecting sensors data "}) );
610         Serial.println();
611 
612 \textcolor{preprocessor}{    #endif}
613 
614         \hyperlink{class_cool_board_a1b1d3c684a5baa56b08486e192fd8e97}{coolBoardLed}.\hyperlink{class_cool_board_led_af1cacbaa88db8bcf6042c1083ba41155}{fade}(190,100,150,0.5);\textcolor{comment}{//shade of violet        }
615 
616         \hyperlink{class_cool_board_a427fb753dd8575bdf821c70a5c63d695}{data}=this->\hyperlink{class_cool_board_ad03abdce2e65f520bbf2cff0f2d083cf}{readSensors}();\textcolor{comment}{//\{..,..,..\}}
617     \}
618 
619     \hyperlink{class_cool_board_a1b1d3c684a5baa56b08486e192fd8e97}{coolBoardLed}.\hyperlink{class_cool_board_led_af1cacbaa88db8bcf6042c1083ba41155}{fade}(51,100,50,0.5);\textcolor{comment}{//dark shade of green  }
620 
621     \textcolor{comment}{//do action}
622 
623     \textcolor{keywordflow}{if} (\hyperlink{class_cool_board_a9be03a913d26e558328935ca3b59a75e}{jetpackActive})
624     \{
625     
626 
627 
628 \textcolor{preprocessor}{    #if DEBUG == 1}
629 
630         Serial.println( F(\textcolor{stringliteral}{"jetpack is Active "}) );
631         Serial.println( F(\textcolor{stringliteral}{"jetpack doing action "}) );
632         Serial.println();
633     
634 \textcolor{preprocessor}{    #endif}
635         \hyperlink{class_cool_board_a1b1d3c684a5baa56b08486e192fd8e97}{coolBoardLed}.\hyperlink{class_cool_board_led_af1cacbaa88db8bcf6042c1083ba41155}{fade}(100,100,150,0.5);\textcolor{comment}{//dark shade of blue }
636     
637         \hyperlink{class_cool_board_a30b1357881b01ccbec676856a91e48e9}{jetPack}.\hyperlink{class_jetpack_a9e703197093094b963f9ad57817495b8}{doAction}( \hyperlink{class_cool_board_a427fb753dd8575bdf821c70a5c63d695}{data}.c\_str() );
638     \}
639     
640     delay(100);
641 
642     \hyperlink{class_cool_board_a4ac693895c21025b8808653f2a4316e6}{onBoardActor}.\hyperlink{class_cool_board_actor_a96a45658d32c6b95caa2f385c7da32cd}{doAction}( \hyperlink{class_cool_board_a427fb753dd8575bdf821c70a5c63d695}{data}.c\_str() );  
643 
644 
645     \hyperlink{class_cool_board_a1b1d3c684a5baa56b08486e192fd8e97}{coolBoardLed}.\hyperlink{class_cool_board_led_af1cacbaa88db8bcf6042c1083ba41155}{fade}(51,100,50,0.5);\textcolor{comment}{//dark shade of green  }
646     
647     \textcolor{comment}{//saving data in the file system}
648     
649     \hyperlink{class_cool_board_a42c2586fbb13ff7f06538e9284e8538d}{fileSystem}.\hyperlink{class_cool_file_system_afa3a4feae94871d4d3b6bebb701c2e67}{saveSensorData}( \hyperlink{class_cool_board_a427fb753dd8575bdf821c70a5c63d695}{data}.c\_str() );
650 
651 \textcolor{preprocessor}{    #if DEBUG == 0}
652 
653         Serial.println( F(\textcolor{stringliteral}{"saving Data in Memory : OK"}));
654 
655 \textcolor{preprocessor}{    #endif}
656 
657     \hyperlink{class_cool_board_a1b1d3c684a5baa56b08486e192fd8e97}{coolBoardLed}.\hyperlink{class_cool_board_led_a93d545679237e8cc858324367149775c}{fadeOut}(51,100,50,0.5);\textcolor{comment}{//dark shade of green}
658 
659     \textcolor{comment}{//case we have wifi but no internet}
660     \textcolor{keywordflow}{if}( (\hyperlink{class_cool_board_acd88e6003606b47479ebba81e4aceeca}{wifiManager}.\hyperlink{class_cool_wifi_a1c7b4d82a4098d346e7593dce92039fa}{state}() == WL\_CONNECTED) && ( \hyperlink{class_cool_board_a2399f44d7c23c1149a335cb3b46d90f1}{mqtt}.
      \hyperlink{class_cool_m_q_t_t_a5d003307eff78efbd585e42b43b72b6d}{state}()!=0 ) )
661     \{
662         
663         Serial.println(F(\textcolor{stringliteral}{"there is Wifi but no Internet"}));
664         Serial.println(F(\textcolor{stringliteral}{"lunching AP to check saved files"}));
665         Serial.println(F(\textcolor{stringliteral}{"and Add new WiFi if needed"}));
666         
667         \hyperlink{class_cool_board_acd88e6003606b47479ebba81e4aceeca}{wifiManager}.\hyperlink{class_cool_wifi_a7c857f27161782f5ef1d62d552aff971}{connectAP}();
668         
669     \}
670     
671     \textcolor{comment}{//case we have no connection at all}
672     \textcolor{keywordflow}{if}( \hyperlink{class_cool_board_acd88e6003606b47479ebba81e4aceeca}{wifiManager}.\hyperlink{class_cool_wifi_a1c7b4d82a4098d346e7593dce92039fa}{state}() != WL\_CONNECTED )
673     \{
674     
675 \textcolor{preprocessor}{    #if DEBUG == 1}
676         
677         Serial.println(F(\textcolor{stringliteral}{"there is No Wifi "}));
678         Serial.println(F(\textcolor{stringliteral}{"retrying to connect"}));
679     
680 \textcolor{preprocessor}{    #endif}
681 
682 \textcolor{preprocessor}{    #if DEBUG == 0}
683         Serial.println( F(\textcolor{stringliteral}{"there is no WiFi..."}));
684 \textcolor{preprocessor}{    #endif}
685         
686         this->\hyperlink{class_cool_board_a519de78b807f8ec6463ff484eb925918}{connect}();\textcolor{comment}{//nomad case : just run wifiMulti}
687                 \textcolor{comment}{//normal case : run wifiMulti+AP}
688         
689     \}   
690 
691 \}
\end{DoxyCode}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d7/df9/class_cool_board_ae6b5e1274d760462290192acea4adca8_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{class_cool_board_aa0bbc4bc605e35618d18e68795c61363}\label{class_cool_board_aa0bbc4bc605e35618d18e68795c61363}} 
\index{Cool\+Board@{Cool\+Board}!on\+Line\+Mode@{on\+Line\+Mode}}
\index{on\+Line\+Mode@{on\+Line\+Mode}!Cool\+Board@{Cool\+Board}}
\subsubsection{\texorpdfstring{on\+Line\+Mode()}{onLineMode()}}
{\footnotesize\ttfamily void Cool\+Board\+::on\+Line\+Mode (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

\hyperlink{class_cool_board_aa0bbc4bc605e35618d18e68795c61363}{Cool\+Board\+::on\+Line\+Mode()}\+: This method is provided to manage the online mode\+: -\/update clock -\/read sensor -\/do actions -\/publish data -\/read answer -\/update config 

Definition at line 292 of file Cool\+Board.\+cpp.


\begin{DoxyCode}
293 \{
294 
295     \hyperlink{class_cool_board_a1b1d3c684a5baa56b08486e192fd8e97}{coolBoardLed}.\hyperlink{class_cool_board_led_ab778f5e7bed0ab74e3906d82110493c3}{fadeIn}(128,255,50,0.5);\textcolor{comment}{//shade of green}
296 
297 \textcolor{preprocessor}{#if DEBUG == 1}
298 
299     Serial.println( F(\textcolor{stringliteral}{"Entering CoolBoard.onLineMode() "}) );
300     Serial.println();
301 
302 \textcolor{preprocessor}{#endif}
303 \textcolor{preprocessor}{#if DEBUG == 0}
304 
305     Serial.println( F(\textcolor{stringliteral}{"CoolBoard is in Online Mode"}));
306 
307 \textcolor{preprocessor}{#endif}
308 
309     \hyperlink{class_cool_board_a427fb753dd8575bdf821c70a5c63d695}{data}=\textcolor{stringliteral}{""};
310     \hyperlink{class_cool_board_a7b835fafd449e5282f7f91d787a2dc15}{answer}=\textcolor{stringliteral}{""};
311 
312     \textcolor{comment}{//send saved data if any}
313     \textcolor{keywordflow}{if}(\hyperlink{class_cool_board_a42c2586fbb13ff7f06538e9284e8538d}{fileSystem}.\hyperlink{class_cool_file_system_ac86a40e7c3a1842f7342f698d34324f9}{isDataSaved}())
314     \{
315 
316         \hyperlink{class_cool_board_a1b1d3c684a5baa56b08486e192fd8e97}{coolBoardLed}.\hyperlink{class_cool_board_led_ab778f5e7bed0ab74e3906d82110493c3}{fadeIn}(128,128,255,0.5);\textcolor{comment}{//shade of blue}
317 
318         Serial.println( F(\textcolor{stringliteral}{"There is data saved on the File System"}) );
319         Serial.println( F(\textcolor{stringliteral}{"Sending saved data over MQTT "}) );
320         Serial.println();
321         \hyperlink{class_cool_board_a1b1d3c684a5baa56b08486e192fd8e97}{coolBoardLed}.\hyperlink{class_cool_board_led_ad5f0de4c628cbfbf49896042831c64ad}{strobe}(128,128,255,0.5);\textcolor{comment}{//shade of blue }
322 
323         \hyperlink{class_cool_board_a2399f44d7c23c1149a335cb3b46d90f1}{mqtt}.\hyperlink{class_cool_m_q_t_t_ace977b3e90ab14b1199fe5c4fb0a13ec}{publish}(\textcolor{stringliteral}{"sending saved data"});
324         \hyperlink{class_cool_board_a2399f44d7c23c1149a335cb3b46d90f1}{mqtt}.\hyperlink{class_cool_m_q_t_t_aa5eaae967b562b62cbcf2b8d81f6e5d5}{mqttLoop}();
325 
326 
327         
328         \textcolor{keywordtype}{int} size=0;
329         std::unique\_ptr<String[]> savedData(std::move(\hyperlink{class_cool_board_a42c2586fbb13ff7f06538e9284e8538d}{fileSystem}.
      \hyperlink{class_cool_file_system_a3223ffff4266a6300988fab956d6b4b2}{getSensorSavedData}(size)));\textcolor{comment}{//\{..,..,..\}}
330 
331         \textcolor{keywordtype}{int} i=0;
332         \textcolor{comment}{//loop through the array}
333         \textcolor{keywordflow}{while}(i<size)
334         \{
335             \textcolor{comment}{//formatting data:}
336         
337             String jsonData = \textcolor{stringliteral}{"\{\(\backslash\)"state\(\backslash\)":\{\(\backslash\)"reported\(\backslash\)":"};
338             jsonData += savedData[i]; \textcolor{comment}{// \{"state":\{"reported":\{..,..,..,..,..,..,..,..\}}
339             jsonData += \textcolor{stringliteral}{" \} \}"}; \textcolor{comment}{// \{"state":\{"reported":\{..,..,..,..,..,..,..,..\}  \} \}}
340 
341 \textcolor{preprocessor}{        #if DEBUG == 1 }
342             Serial.println(F(\textcolor{stringliteral}{"Size is : "}));
343             Serial.println(size);
344             Serial.print(F(\textcolor{stringliteral}{"sending line N°"}));
345             Serial.println(i);
346             Serial.println(jsonData);
347             Serial.println();
348 
349 \textcolor{preprocessor}{        #endif}
350 
351             \hyperlink{class_cool_board_a1b1d3c684a5baa56b08486e192fd8e97}{coolBoardLed}.\hyperlink{class_cool_board_led_ad5f0de4c628cbfbf49896042831c64ad}{strobe}(128,128,255,0.5);\textcolor{comment}{//shade of blue}
352         
353             \hyperlink{class_cool_board_a2399f44d7c23c1149a335cb3b46d90f1}{mqtt}.\hyperlink{class_cool_m_q_t_t_ace977b3e90ab14b1199fe5c4fb0a13ec}{publish}( jsonData.c\_str() );
354             \hyperlink{class_cool_board_a2399f44d7c23c1149a335cb3b46d90f1}{mqtt}.\hyperlink{class_cool_m_q_t_t_aa5eaae967b562b62cbcf2b8d81f6e5d5}{mqttLoop}();
355         
356             \hyperlink{class_cool_board_a1b1d3c684a5baa56b08486e192fd8e97}{coolBoardLed}.\hyperlink{class_cool_board_led_a93d545679237e8cc858324367149775c}{fadeOut}(128,128,255,0.5);\textcolor{comment}{//shade of blue}
357             
358             i++;
359             yield();
360         \}       
361 
362 
363 \textcolor{preprocessor}{    #if DEBUG == 1}
364 
365         Serial.println( F(\textcolor{stringliteral}{"Saved data sent "}) );
366         Serial.println();
367     
368 \textcolor{preprocessor}{    #endif}
369 
370     \}
371 
372     \hyperlink{class_cool_board_a1b1d3c684a5baa56b08486e192fd8e97}{coolBoardLed}.\hyperlink{class_cool_board_led_a96e1ea13003eee34c9dbcef340404426}{blink}(128,255,50,0.5);\textcolor{comment}{//shade of green}
373 
374     \textcolor{comment}{//clock update}
375     Serial.println( F(\textcolor{stringliteral}{"Re-checking RTC..."}));
376     \hyperlink{class_cool_board_a50d2a6716879d64a85f3c6b44ad63275}{rtc}.\hyperlink{class_cool_time_aae601f795452cfa48d9fb337aed483a8}{update}();
377 
378     \textcolor{comment}{//read user data if user is active}
379     \textcolor{keywordflow}{if}(\hyperlink{class_cool_board_a6395459131d6889a3005f79c7a35e964}{userActive})
380     \{
381         \hyperlink{class_cool_board_a1b1d3c684a5baa56b08486e192fd8e97}{coolBoardLed}.\hyperlink{class_cool_board_led_ab778f5e7bed0ab74e3906d82110493c3}{fadeIn}(245,237,27,0.5);\textcolor{comment}{//shade of yellow}
382     
383 \textcolor{preprocessor}{    #if DEBUG == 1}
384 
385         Serial.println( F(\textcolor{stringliteral}{"User is Active"}) );
386         Serial.println( F(\textcolor{stringliteral}{"Collecting User's data ( mac,username,timeStamp )"}) );
387         Serial.println();
388     
389 \textcolor{preprocessor}{    #endif  }
390         \hyperlink{class_cool_board_a1b1d3c684a5baa56b08486e192fd8e97}{coolBoardLed}.\hyperlink{class_cool_board_led_a96e1ea13003eee34c9dbcef340404426}{blink}(245,237,27,0.5);\textcolor{comment}{//shade of yellow   }
391 
392         \textcolor{comment}{//reading user data}
393         \hyperlink{class_cool_board_a427fb753dd8575bdf821c70a5c63d695}{data}=this->\hyperlink{class_cool_board_ae7358fb6e623cfc81b775f5f1734909b}{userData}();\textcolor{comment}{//\{"":"","":"","",""\}}
394 
395         \textcolor{comment}{//formatting json }
396         \hyperlink{class_cool_board_a427fb753dd8575bdf821c70a5c63d695}{data}.setCharAt( \hyperlink{class_cool_board_a427fb753dd8575bdf821c70a5c63d695}{data}.lastIndexOf(\textcolor{charliteral}{'\}'}) , \textcolor{charliteral}{','});\textcolor{comment}{//\{"":"","":"","","",}
397                 
398         \textcolor{comment}{//read sensors data}
399 \textcolor{preprocessor}{    #if DEBUG == 1}
400 
401         Serial.println( F(\textcolor{stringliteral}{"Collecting sensors data "}) );
402         Serial.println();
403     
404 \textcolor{preprocessor}{    #endif}
405 
406         \hyperlink{class_cool_board_a427fb753dd8575bdf821c70a5c63d695}{data}+=this->\hyperlink{class_cool_board_ad03abdce2e65f520bbf2cff0f2d083cf}{readSensors}();\textcolor{comment}{//\{"":"","":"","","",\{.......\}     }
407 
408         \textcolor{comment}{//formatting json correctly}
409         \hyperlink{class_cool_board_a427fb753dd8575bdf821c70a5c63d695}{data}.remove(\hyperlink{class_cool_board_a427fb753dd8575bdf821c70a5c63d695}{data}.lastIndexOf(\textcolor{charliteral}{'\{'}), 1);\textcolor{comment}{//\{"":"","":"","","",.......\}}
410         
411         \hyperlink{class_cool_board_a1b1d3c684a5baa56b08486e192fd8e97}{coolBoardLed}.\hyperlink{class_cool_board_led_a93d545679237e8cc858324367149775c}{fadeOut}(245,237,27,0.5);\textcolor{comment}{//shade of yellow}
412                 
413     \}   
414     \textcolor{keywordflow}{else}
415     \{
416         \textcolor{comment}{//read sensors data}
417 \textcolor{preprocessor}{    #if DEBUG == 1}
418 
419         Serial.println( F(\textcolor{stringliteral}{"Collecting sensors data "}) );
420         Serial.println();
421     
422 \textcolor{preprocessor}{    #endif}
423         \hyperlink{class_cool_board_a1b1d3c684a5baa56b08486e192fd8e97}{coolBoardLed}.\hyperlink{class_cool_board_led_af1cacbaa88db8bcf6042c1083ba41155}{fade}(190,100,150,0.5);\textcolor{comment}{//shade of violet        }
424         \hyperlink{class_cool_board_a427fb753dd8575bdf821c70a5c63d695}{data}=this->\hyperlink{class_cool_board_ad03abdce2e65f520bbf2cff0f2d083cf}{readSensors}();\textcolor{comment}{//\{..,..,..\}}
425     \}
426     
427 
428 
429 
430     \textcolor{comment}{//do action}
431 
432     \textcolor{keywordflow}{if} (\hyperlink{class_cool_board_a9be03a913d26e558328935ca3b59a75e}{jetpackActive})
433     \{
434 
435 
436 \textcolor{preprocessor}{    #if DEBUG ==1}
437 
438         Serial.println( F(\textcolor{stringliteral}{"jetpack is Active "}) );
439         Serial.println();
440 
441 \textcolor{preprocessor}{    #endif}
442     
443         \textcolor{keywordflow}{if}(this->\hyperlink{class_cool_board_a7c8e505a5804b109e112d5a03df6ea2b}{manual} == 0 )
444         \{
445 
446             Serial.println( F(\textcolor{stringliteral}{"jetpack doing action "}) );
447 
448             \hyperlink{class_cool_board_a1b1d3c684a5baa56b08486e192fd8e97}{coolBoardLed}.\hyperlink{class_cool_board_led_af1cacbaa88db8bcf6042c1083ba41155}{fade}(100,100,150,0.5);\textcolor{comment}{//dark shade of blue     }
449 
450             \hyperlink{class_cool_board_a30b1357881b01ccbec676856a91e48e9}{jetPack}.\hyperlink{class_jetpack_a9e703197093094b963f9ad57817495b8}{doAction}(\hyperlink{class_cool_board_a427fb753dd8575bdf821c70a5c63d695}{data}.c\_str());
451             
452 
453         
454         \}
455         
456         \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(this->\hyperlink{class_cool_board_a7c8e505a5804b109e112d5a03df6ea2b}{manual} == 1 )
457         \{
458         
459             Serial.println(F(\textcolor{stringliteral}{"we are in manual mode"}));
460             \hyperlink{class_cool_board_a2399f44d7c23c1149a335cb3b46d90f1}{mqtt}.\hyperlink{class_cool_m_q_t_t_aa5eaae967b562b62cbcf2b8d81f6e5d5}{mqttLoop}();
461             \hyperlink{class_cool_board_a7b835fafd449e5282f7f91d787a2dc15}{answer} = \hyperlink{class_cool_board_a2399f44d7c23c1149a335cb3b46d90f1}{mqtt}.\hyperlink{class_cool_m_q_t_t_ae3c18f6ae9723746d32765f1c8f176ca}{read}();
462             \textcolor{keyword}{this} -> \hyperlink{class_cool_board_a8612756d3f73198cdde857a66f0fe690}{update}(\hyperlink{class_cool_board_a7b835fafd449e5282f7f91d787a2dc15}{answer}.c\_str());
463         \}
464     \}
465 
466     delay(100);
467 
468     \hyperlink{class_cool_board_a4ac693895c21025b8808653f2a4316e6}{onBoardActor}.\hyperlink{class_cool_board_actor_a96a45658d32c6b95caa2f385c7da32cd}{doAction}( \hyperlink{class_cool_board_a427fb753dd8575bdf821c70a5c63d695}{data}.c\_str() );  
469 
470 
471 
472     
473     \hyperlink{class_cool_board_a1b1d3c684a5baa56b08486e192fd8e97}{coolBoardLed}.\hyperlink{class_cool_board_led_ab778f5e7bed0ab74e3906d82110493c3}{fadeIn}(128,255,50,0.5);\textcolor{comment}{//shade of green}
474 
475     \textcolor{comment}{//formatting data:}
476     String jsonData = \textcolor{stringliteral}{"\{\(\backslash\)"state\(\backslash\)":\{\(\backslash\)"reported\(\backslash\)":"};
477     jsonData += \hyperlink{class_cool_board_a427fb753dd8575bdf821c70a5c63d695}{data}; \textcolor{comment}{// \{"state":\{"reported":\{..,..,..,..,..,..,..,..\}}
478     jsonData += \textcolor{stringliteral}{" \} \}"}; \textcolor{comment}{// \{"state":\{"reported":\{..,..,..,..,..,..,..,..\}  \} \}}
479     
480     \textcolor{comment}{//mqtt client loop to allow data handling}
481     \hyperlink{class_cool_board_a2399f44d7c23c1149a335cb3b46d90f1}{mqtt}.\hyperlink{class_cool_m_q_t_t_aa5eaae967b562b62cbcf2b8d81f6e5d5}{mqttLoop}();
482 
483     \hyperlink{class_cool_board_a1b1d3c684a5baa56b08486e192fd8e97}{coolBoardLed}.\hyperlink{class_cool_board_led_a96e1ea13003eee34c9dbcef340404426}{blink}(128,255,50,0.5);\textcolor{comment}{//shade of green    }
484 
485     \textcolor{comment}{//read mqtt answer}
486     \hyperlink{class_cool_board_a7b835fafd449e5282f7f91d787a2dc15}{answer} = \hyperlink{class_cool_board_a2399f44d7c23c1149a335cb3b46d90f1}{mqtt}.\hyperlink{class_cool_m_q_t_t_ae3c18f6ae9723746d32765f1c8f176ca}{read}();
487 
488 \textcolor{preprocessor}{#if DEBUG == 1 }
489 
490     Serial.println( F(\textcolor{stringliteral}{"checking if there's an MQTT message "})  );
491     Serial.println( F(\textcolor{stringliteral}{"answer is : "}) );    
492     Serial.println(\hyperlink{class_cool_board_a7b835fafd449e5282f7f91d787a2dc15}{answer});   
493     Serial.println();
494 
495 \textcolor{preprocessor}{#endif  }
496 
497     \hyperlink{class_cool_board_a1b1d3c684a5baa56b08486e192fd8e97}{coolBoardLed}.\hyperlink{class_cool_board_led_a93d545679237e8cc858324367149775c}{fadeOut}(128,255,50,0.5);\textcolor{comment}{//shade of green    }
498 
499     \textcolor{comment}{//check if the configuration needs update }
500     \textcolor{comment}{//and update it if needed }
501     \textcolor{keyword}{this} -> \hyperlink{class_cool_board_a8612756d3f73198cdde857a66f0fe690}{update}(\hyperlink{class_cool_board_a7b835fafd449e5282f7f91d787a2dc15}{answer}.c\_str());
502     
503     \hyperlink{class_cool_board_a1b1d3c684a5baa56b08486e192fd8e97}{coolBoardLed}.\hyperlink{class_cool_board_led_ab778f5e7bed0ab74e3906d82110493c3}{fadeIn}(128,255,50,0.5);\textcolor{comment}{//shade of green  }
504 
505     \textcolor{comment}{//publishing data   }
506     \textcolor{keywordflow}{if}( this->\hyperlink{class_cool_board_a0a51b2287139f66c738101fb53139230}{sleepActive}==0 )   
507     \{   
508         \hyperlink{class_cool_board_a1b1d3c684a5baa56b08486e192fd8e97}{coolBoardLed}.\hyperlink{class_cool_board_led_ad5f0de4c628cbfbf49896042831c64ad}{strobe}(255,0,230,0.5);\textcolor{comment}{//shade of pink}
509         
510         \textcolor{comment}{//logInterval in seconds}
511         \hyperlink{class_cool_board_a2399f44d7c23c1149a335cb3b46d90f1}{mqtt}.\hyperlink{class_cool_m_q_t_t_ace977b3e90ab14b1199fe5c4fb0a13ec}{publish}( jsonData.c\_str(), this->\hyperlink{class_cool_board_a7508e029f2ee17bb747ffab599285e0d}{getLogInterval}() );
512         \hyperlink{class_cool_board_a2399f44d7c23c1149a335cb3b46d90f1}{mqtt}.\hyperlink{class_cool_m_q_t_t_aa5eaae967b562b62cbcf2b8d81f6e5d5}{mqttLoop}();
513     
514     \}
515     \textcolor{keywordflow}{else}
516     \{
517         \hyperlink{class_cool_board_a1b1d3c684a5baa56b08486e192fd8e97}{coolBoardLed}.\hyperlink{class_cool_board_led_ad5f0de4c628cbfbf49896042831c64ad}{strobe}(230,255,0,0.5);\textcolor{comment}{//shade of yellow  }
518 
519         \hyperlink{class_cool_board_a2399f44d7c23c1149a335cb3b46d90f1}{mqtt}.\hyperlink{class_cool_m_q_t_t_ace977b3e90ab14b1199fe5c4fb0a13ec}{publish}(jsonData.c\_str());      
520         \hyperlink{class_cool_board_a2399f44d7c23c1149a335cb3b46d90f1}{mqtt}.\hyperlink{class_cool_m_q_t_t_aa5eaae967b562b62cbcf2b8d81f6e5d5}{mqttLoop}();
521         \hyperlink{class_cool_board_a7b835fafd449e5282f7f91d787a2dc15}{answer} = \hyperlink{class_cool_board_a2399f44d7c23c1149a335cb3b46d90f1}{mqtt}.\hyperlink{class_cool_m_q_t_t_ae3c18f6ae9723746d32765f1c8f176ca}{read}();
522         \textcolor{keyword}{this} ->update(\hyperlink{class_cool_board_a7b835fafd449e5282f7f91d787a2dc15}{answer}.c\_str());
523 
524         \textcolor{comment}{//logInterval in seconds}
525         this->\hyperlink{class_cool_board_a069952cdcb2e7f68518aa429eceadb6e}{sleep}( this->\hyperlink{class_cool_board_a7508e029f2ee17bb747ffab599285e0d}{getLogInterval}() ) ;
526     \}
527 
528     \hyperlink{class_cool_board_a1b1d3c684a5baa56b08486e192fd8e97}{coolBoardLed}.\hyperlink{class_cool_board_led_a93d545679237e8cc858324367149775c}{fadeOut}(128,255,50,0.5);\textcolor{comment}{//shade of green        }
529 
530     \hyperlink{class_cool_board_a2399f44d7c23c1149a335cb3b46d90f1}{mqtt}.\hyperlink{class_cool_m_q_t_t_aa5eaae967b562b62cbcf2b8d81f6e5d5}{mqttLoop}();
531 
532     \textcolor{comment}{//read mqtt answer}
533     \hyperlink{class_cool_board_a7b835fafd449e5282f7f91d787a2dc15}{answer} = \hyperlink{class_cool_board_a2399f44d7c23c1149a335cb3b46d90f1}{mqtt}.\hyperlink{class_cool_m_q_t_t_ae3c18f6ae9723746d32765f1c8f176ca}{read}();
534     \textcolor{keyword}{this} -> \hyperlink{class_cool_board_a8612756d3f73198cdde857a66f0fe690}{update}(\hyperlink{class_cool_board_a7b835fafd449e5282f7f91d787a2dc15}{answer}.c\_str()); 
535 
536     \hyperlink{class_cool_board_a1b1d3c684a5baa56b08486e192fd8e97}{coolBoardLed}.\hyperlink{class_cool_board_led_a96e1ea13003eee34c9dbcef340404426}{blink}(128,255,50,0.5);\textcolor{comment}{//shade of green    }
537 
538 
539 \}
\end{DoxyCode}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d7/df9/class_cool_board_aa0bbc4bc605e35618d18e68795c61363_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{class_cool_board_a486507b8f0981d3cc671ed31c2145755}\label{class_cool_board_a486507b8f0981d3cc671ed31c2145755}} 
\index{Cool\+Board@{Cool\+Board}!print\+Conf@{print\+Conf}}
\index{print\+Conf@{print\+Conf}!Cool\+Board@{Cool\+Board}}
\subsubsection{\texorpdfstring{print\+Conf()}{printConf()}}
{\footnotesize\ttfamily void Cool\+Board\+::print\+Conf (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

\hyperlink{class_cool_board_a486507b8f0981d3cc671ed31c2145755}{Cool\+Board\+::print\+Conf()}\+: This method is provided to print the configuration to the Serial Monitor. 

Definition at line 899 of file Cool\+Board.\+cpp.


\begin{DoxyCode}
900 \{
901 
902 \textcolor{preprocessor}{#if DEBUG == 1}
903     
904     Serial.println( F(\textcolor{stringliteral}{"Entering CoolBoard.printConf() "}) );
905     Serial.println();
906 
907 \textcolor{preprocessor}{#endif}
908 
909     Serial.println( F(\textcolor{stringliteral}{"Printing Cool Board Configuration "}));
910     Serial.print( F(\textcolor{stringliteral}{"log interval       : "}));
911     Serial.println(this->\hyperlink{class_cool_board_a84bc94413b64973e4aba8c467c97006c}{logInterval});
912 
913     Serial.print( F(\textcolor{stringliteral}{"irene active       : "}));
914     Serial.println(this->\hyperlink{class_cool_board_a9c3f7ac625481ee2ae802a25d97a4ae0}{ireneActive});
915 
916     Serial.print( F(\textcolor{stringliteral}{"jetpack active     : "}));
917     Serial.println(this->\hyperlink{class_cool_board_a9be03a913d26e558328935ca3b59a75e}{jetpackActive});
918 
919     Serial.print( F(\textcolor{stringliteral}{"external sensors active    : "}));
920     Serial.println(this->\hyperlink{class_cool_board_a638b00b76aeb819ecfd4c10b8cdd7bb7}{externalSensorsActive});
921 
922     Serial.print( F(\textcolor{stringliteral}{"sleep active       : "}));
923     Serial.println(this->\hyperlink{class_cool_board_a0a51b2287139f66c738101fb53139230}{sleepActive});
924 
925     Serial.print( F(\textcolor{stringliteral}{"user active        : "}));
926     Serial.println(this->\hyperlink{class_cool_board_a6395459131d6889a3005f79c7a35e964}{userActive});
927 
928     Serial.print( F(\textcolor{stringliteral}{"manual active      : "}));
929     Serial.println(this->\hyperlink{class_cool_board_a7c8e505a5804b109e112d5a03df6ea2b}{manual});
930 
931     Serial.println();
932 
933 
934 
935 
936 \}
\end{DoxyCode}
\mbox{\Hypertarget{class_cool_board_ad03abdce2e65f520bbf2cff0f2d083cf}\label{class_cool_board_ad03abdce2e65f520bbf2cff0f2d083cf}} 
\index{Cool\+Board@{Cool\+Board}!read\+Sensors@{read\+Sensors}}
\index{read\+Sensors@{read\+Sensors}!Cool\+Board@{Cool\+Board}}
\subsubsection{\texorpdfstring{read\+Sensors()}{readSensors()}}
{\footnotesize\ttfamily String Cool\+Board\+::read\+Sensors (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

\hyperlink{class_cool_board_ad03abdce2e65f520bbf2cff0f2d083cf}{Cool\+Board\+::read\+Sensors()}\+: This method is provided to read and format all the sensors data in a single json.

\begin{DoxyReturn}{Returns}
json string of all the sensors read. 
\end{DoxyReturn}


Definition at line 1153 of file Cool\+Board.\+cpp.


\begin{DoxyCode}
1154 \{
1155 
1156     \hyperlink{class_cool_board_a1b1d3c684a5baa56b08486e192fd8e97}{coolBoardLed}.\hyperlink{class_cool_board_led_ab778f5e7bed0ab74e3906d82110493c3}{fadeIn}(128,255,0,0.5);\textcolor{comment}{//light shade of green}
1157                 
1158 \textcolor{preprocessor}{#if DEBUG == 1}
1159 
1160     Serial.println( F(\textcolor{stringliteral}{"Entering CoolBoard.readSensors()"}) );
1161     Serial.println();
1162 
1163 \textcolor{preprocessor}{#endif}
1164     \hyperlink{class_cool_board_a1b1d3c684a5baa56b08486e192fd8e97}{coolBoardLed}.\hyperlink{class_cool_board_led_ad5f0de4c628cbfbf49896042831c64ad}{strobe}(128,255,0,0.5);\textcolor{comment}{//light shade of green}
1165 
1166     String sensorsData;
1167     
1168     this->\hyperlink{class_cool_board_a397b46fadab8f530a8cf4d914c561366}{initReadI2C}();
1169 
1170     sensorsData = \hyperlink{class_cool_board_af102be5288bd7f7a8e59b13f86e26a00}{coolBoardSensors}.\hyperlink{class_cool_board_sensors_a91badb2539d91fda8679f2a597874c48}{read}(); \textcolor{comment}{// \{..,..,..\}}
1171     
1172     \textcolor{keywordflow}{if} (\hyperlink{class_cool_board_a638b00b76aeb819ecfd4c10b8cdd7bb7}{externalSensorsActive})
1173     \{
1174         sensorsData += \hyperlink{class_cool_board_a09e26264839c65873eb56af476eff6b2}{externalSensors}.\hyperlink{class_external_sensors_a53177b81eca3be89508b5511ddcd00fc}{read}(); \textcolor{comment}{// \{..,..,..\}\{..,..\}}
1175 
1176         sensorsData.setCharAt(sensorsData.lastIndexOf(\textcolor{charliteral}{'\}'}), \textcolor{charliteral}{','}); \textcolor{comment}{// \{..,..,..\}\{..,..,}
1177         sensorsData.setCharAt(sensorsData.lastIndexOf(\textcolor{charliteral}{'\{'}), \textcolor{charliteral}{','}); \textcolor{comment}{// \{..,..,..\},..,..,}
1178         sensorsData.remove(sensorsData.lastIndexOf(\textcolor{charliteral}{'\}'}), 1); \textcolor{comment}{// \{..,..,..,..,..,}
1179         sensorsData.setCharAt(sensorsData.lastIndexOf(\textcolor{charliteral}{','}), \textcolor{charliteral}{'\}'}); \textcolor{comment}{// \{..,..,..,..,..\}}
1180 
1181     \}
1182     \textcolor{keywordflow}{if} (\hyperlink{class_cool_board_a9c3f7ac625481ee2ae802a25d97a4ae0}{ireneActive})
1183     \{
1184         sensorsData += \hyperlink{class_cool_board_ad103718ce316006c4695b8eb312eaf11}{irene3000}.\hyperlink{class_irene3000_a852a170feea994ea1df01c6b245b5d9a}{read}(); \textcolor{comment}{// \{..,..,..,..,..\}\{..,..,..\}}
1185 
1186         sensorsData.setCharAt(sensorsData.lastIndexOf(\textcolor{charliteral}{'\}'}), \textcolor{charliteral}{','}); \textcolor{comment}{// \{..,..,..,..,..\}\{..,..,..,}
1187         sensorsData.setCharAt(sensorsData.lastIndexOf(\textcolor{charliteral}{'\{'}), \textcolor{charliteral}{','}); \textcolor{comment}{// \{..,..,..,..,..\},..,..,..,}
1188         sensorsData.remove(sensorsData.lastIndexOf(\textcolor{charliteral}{'\}'}), 1); \textcolor{comment}{// \{..,..,..,..,..,..,..,..,}
1189         sensorsData.setCharAt(sensorsData.lastIndexOf(\textcolor{charliteral}{','}), \textcolor{charliteral}{'\}'}); \textcolor{comment}{// \{..,..,..,..,..,..,..,..\}      }
1190         
1191         
1192     \}
1193 
1194     \textcolor{comment}{//getting Hour:}
1195     tmElements\_t tm;
1196     tm=\hyperlink{class_cool_board_a50d2a6716879d64a85f3c6b44ad63275}{rtc}.\hyperlink{class_cool_time_a7a7501c5ca77dd1248bea704c44f986c}{getTimeDate}();
1197     
1198     \textcolor{comment}{//adding Hour}
1199     sensorsData.remove(sensorsData.lastIndexOf(\textcolor{charliteral}{'\}'}), 1); \textcolor{comment}{// \{..,..,..,..,..,..,..,..,   }
1200     sensorsData+=\textcolor{stringliteral}{",\(\backslash\)"hour\(\backslash\)":"};  
1201     sensorsData+=tm.Hour;
1202     sensorsData+=\textcolor{stringliteral}{",\(\backslash\)"minute\(\backslash\)":"};
1203     sensorsData+=tm.Minute;
1204     sensorsData+=\textcolor{stringliteral}{"\}"};
1205     
1206 \textcolor{preprocessor}{#if DEBUG == 1}
1207     Serial.println();
1208     Serial.println( F(\textcolor{stringliteral}{"sensors data is "}) );
1209     Serial.println(sensorsData);
1210     Serial.println();
1211 
1212 \textcolor{preprocessor}{#endif}
1213     \hyperlink{class_cool_board_a1b1d3c684a5baa56b08486e192fd8e97}{coolBoardLed}.\hyperlink{class_cool_board_led_a93d545679237e8cc858324367149775c}{fadeOut}(128,255,0,0.5);\textcolor{comment}{//light shade of green}
1214 
1215     \textcolor{keywordflow}{return}(sensorsData);
1216 
1217 \}
\end{DoxyCode}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d7/df9/class_cool_board_ad03abdce2e65f520bbf2cff0f2d083cf_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d7/df9/class_cool_board_ad03abdce2e65f520bbf2cff0f2d083cf_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{class_cool_board_a069952cdcb2e7f68518aa429eceadb6e}\label{class_cool_board_a069952cdcb2e7f68518aa429eceadb6e}} 
\index{Cool\+Board@{Cool\+Board}!sleep@{sleep}}
\index{sleep@{sleep}!Cool\+Board@{Cool\+Board}}
\subsubsection{\texorpdfstring{sleep()}{sleep()}}
{\footnotesize\ttfamily void Cool\+Board\+::sleep (\begin{DoxyParamCaption}\item[{unsigned long}]{interval }\end{DoxyParamCaption})}

Cool\+Board\+::sleep(int interval)\+: This method is provided to allow the board to enter deep\+Sleep mode for a period of time equal to interval in s 

Definition at line 1293 of file Cool\+Board.\+cpp.


\begin{DoxyCode}
1294 \{
1295 
1296     Serial.println( F(\textcolor{stringliteral}{"Entering CoolBoard.sleep() "}) );
1297     Serial.print( F(\textcolor{stringliteral}{"going to sleep for "}) );
1298     Serial.print(interval);
1299     Serial.println(F(\textcolor{stringliteral}{"s"}) );
1300     Serial.println();
1301     
1302     \textcolor{comment}{//interval is in seconds , interval*1000*1000 in µS}
1303     ESP.deepSleep ( ( interval * 1000 * 1000 ), WAKE\_RF\_DEFAULT) ;
1304 
1305 \}
\end{DoxyCode}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=329pt]{d7/df9/class_cool_board_a069952cdcb2e7f68518aa429eceadb6e_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{class_cool_board_a8612756d3f73198cdde857a66f0fe690}\label{class_cool_board_a8612756d3f73198cdde857a66f0fe690}} 
\index{Cool\+Board@{Cool\+Board}!update@{update}}
\index{update@{update}!Cool\+Board@{Cool\+Board}}
\subsubsection{\texorpdfstring{update()}{update()}}
{\footnotesize\ttfamily void Cool\+Board\+::update (\begin{DoxyParamCaption}\item[{const char $\ast$}]{answer }\end{DoxyParamCaption})}

Cool\+Board\+::update(mqtt answer)\+: This method is provided to handle the configuration update of the different parts 

Definition at line 943 of file Cool\+Board.\+cpp.


\begin{DoxyCode}
944 \{
945     \hyperlink{class_cool_board_a1b1d3c684a5baa56b08486e192fd8e97}{coolBoardLed}.\hyperlink{class_cool_board_led_ab778f5e7bed0ab74e3906d82110493c3}{fadeIn}(153,76,0,0.5);\textcolor{comment}{//shade of brown        }
946 
947 \textcolor{preprocessor}{#if DEBUG == 1}
948 
949     Serial.println( F(\textcolor{stringliteral}{"Entering CoolBoard.update() "}) );
950     Serial.println();
951     Serial.println( F(\textcolor{stringliteral}{"message is : "}) );
952     Serial.println(\hyperlink{class_cool_board_a7b835fafd449e5282f7f91d787a2dc15}{answer});
953     Serial.println();
954 
955 \textcolor{preprocessor}{#endif}
956 
957     DynamicJsonBuffer jsonBuffer;
958     JsonObject & root = jsonBuffer.parseObject(\hyperlink{class_cool_board_a7b835fafd449e5282f7f91d787a2dc15}{answer});
959     JsonObject & stateDesired = root[\textcolor{stringliteral}{"state"}];
960 
961 \textcolor{preprocessor}{#if DEBUG == 1}
962 
963     Serial.println( F(\textcolor{stringliteral}{"root json : "}) );
964     root.printTo(Serial);
965     Serial.println();
966 
967     Serial.println( F(\textcolor{stringliteral}{"stateDesired json : "}));
968     stateDesired.printTo(Serial);
969     Serial.println();
970     
971     Serial.print( F(\textcolor{stringliteral}{"jsonBuffer size : "}));
972     Serial.println(jsonBuffer.size());
973 
974 \textcolor{preprocessor}{#endif}
975 
976     \textcolor{keywordflow}{if} (stateDesired.success())
977     \{
978     
979 \textcolor{preprocessor}{    #if DEBUG == 1}
980 
981         Serial.println( F(\textcolor{stringliteral}{"update message parsing : success"}) );
982         Serial.println();
983     
984 \textcolor{preprocessor}{    #endif}
985 
986             String answerDesired;
987         
988             stateDesired.printTo(answerDesired);
989             
990 \textcolor{preprocessor}{        #if DEBUG == 1      }
991         
992             Serial.println( F(\textcolor{stringliteral}{"update is ok "}) );
993             Serial.println( F(\textcolor{stringliteral}{"desired update is : "}) );            
994             Serial.println(answerDesired);
995             Serial.println(\textcolor{stringliteral}{"json size is : "});
996             Serial.println(jsonBuffer.size() ) ;                
997             Serial.println();
998 
999         
1000 \textcolor{preprocessor}{        #endif}
1001             \textcolor{comment}{//manual mode check}
1002             \textcolor{keywordflow}{if}(this->\hyperlink{class_cool_board_a7c8e505a5804b109e112d5a03df6ea2b}{manual} == 1 )
1003             \{ 
1004                 JsonObject & manualMode=stateDesired[\textcolor{stringliteral}{"manual"}];
1005                 \textcolor{comment}{//json parse}
1006                 \textcolor{keywordflow}{for}(\textcolor{keyword}{auto} kv : manualMode)
1007                 \{
1008 \textcolor{preprocessor}{                #if DEBUG == 1}
1009 
1010                     Serial.print(F(\textcolor{stringliteral}{"writing to "}));
1011                     Serial.println(kv.key);
1012                     Serial.print(F(\textcolor{stringliteral}{"state : "}));
1013                     Serial.println(kv.value.as<\textcolor{keywordtype}{bool}>());        
1014                     
1015 \textcolor{preprocessor}{                #endif              }
1016 
1017                     \textcolor{keywordflow}{if}( strcmp(kv.key,\textcolor{stringliteral}{"Act0"}) == 0 )
1018                     \{
1019                     
1020                         \hyperlink{class_cool_board_a30b1357881b01ccbec676856a91e48e9}{jetPack}.\hyperlink{class_jetpack_a79ae7bc3c1828a0551a7c005c4f8bd00}{writeBit}(0,kv.value.as<\textcolor{keywordtype}{bool}>() ); 
1021                         
1022                     \}
1023                     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(strcmp(kv.key,\textcolor{stringliteral}{"Act1"}) == 0)
1024                     \{
1025                         \hyperlink{class_cool_board_a30b1357881b01ccbec676856a91e48e9}{jetPack}.\hyperlink{class_jetpack_a79ae7bc3c1828a0551a7c005c4f8bd00}{writeBit}(1,kv.value.as<\textcolor{keywordtype}{bool}>() ); 
1026 
1027                     \}
1028                     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(strcmp(kv.key,\textcolor{stringliteral}{"Act2"}) == 0)
1029                     \{
1030                         \hyperlink{class_cool_board_a30b1357881b01ccbec676856a91e48e9}{jetPack}.\hyperlink{class_jetpack_a79ae7bc3c1828a0551a7c005c4f8bd00}{writeBit}(2,kv.value.as<\textcolor{keywordtype}{bool}>() ); 
1031 
1032                     \}
1033                     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(strcmp(kv.key,\textcolor{stringliteral}{"Act3"}) == 0)
1034                     \{
1035                         \hyperlink{class_cool_board_a30b1357881b01ccbec676856a91e48e9}{jetPack}.\hyperlink{class_jetpack_a79ae7bc3c1828a0551a7c005c4f8bd00}{writeBit}(3,kv.value.as<\textcolor{keywordtype}{bool}>() ); 
1036 
1037                     \}
1038                     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(strcmp(kv.key,\textcolor{stringliteral}{"Act4"}) == 0)
1039                     \{
1040                         \hyperlink{class_cool_board_a30b1357881b01ccbec676856a91e48e9}{jetPack}.\hyperlink{class_jetpack_a79ae7bc3c1828a0551a7c005c4f8bd00}{writeBit}(4,kv.value.as<\textcolor{keywordtype}{bool}>() ); 
1041 
1042                     \}
1043                     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(strcmp(kv.key,\textcolor{stringliteral}{"Act5"}) == 0)
1044                     \{
1045                         \hyperlink{class_cool_board_a30b1357881b01ccbec676856a91e48e9}{jetPack}.\hyperlink{class_jetpack_a79ae7bc3c1828a0551a7c005c4f8bd00}{writeBit}(5,kv.value.as<\textcolor{keywordtype}{bool}>() ); 
1046 
1047                     \}
1048                     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(strcmp(kv.key,\textcolor{stringliteral}{"Act6"}) == 0)
1049                     \{
1050                         \hyperlink{class_cool_board_a30b1357881b01ccbec676856a91e48e9}{jetPack}.\hyperlink{class_jetpack_a79ae7bc3c1828a0551a7c005c4f8bd00}{writeBit}(6,kv.value.as<\textcolor{keywordtype}{bool}>() ); 
1051 
1052                     \}
1053                     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (strcmp(kv.key,\textcolor{stringliteral}{"Act7"}) == 0)
1054                     \{
1055                         \hyperlink{class_cool_board_a30b1357881b01ccbec676856a91e48e9}{jetPack}.\hyperlink{class_jetpack_a79ae7bc3c1828a0551a7c005c4f8bd00}{writeBit}(7,kv.value.as<\textcolor{keywordtype}{bool}>() ); 
1056 
1057                     \}
1058                     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (strcmp(kv.key,\textcolor{stringliteral}{"ActB"}) == 0)
1059                     \{
1060                         \hyperlink{class_cool_board_a4ac693895c21025b8808653f2a4316e6}{onBoardActor}.\hyperlink{class_cool_board_actor_a958786ff01ea1056ee72c72d439f86da}{write}(kv.value.as<\textcolor{keywordtype}{bool}>() ); 
1061 
1062                     \}
1063                                 
1064                 
1065                 \}
1066 
1067                 
1068             \}
1069 
1070             \textcolor{comment}{//saving the new configuration}
1071             \hyperlink{class_cool_board_a42c2586fbb13ff7f06538e9284e8538d}{fileSystem}.\hyperlink{class_cool_file_system_adfa8e2e80641ae6f0cceabd348a9b841}{updateConfigFiles}(answerDesired);
1072 
1073                 \textcolor{comment}{//answering the update msg:}
1074             \textcolor{comment}{//reported = received configuration}
1075             \textcolor{comment}{//desired=null}
1076         
1077             String updateAnswer;
1078             String tempString;
1079             
1080             stateDesired.printTo(tempString);
1081             updateAnswer=\textcolor{stringliteral}{"\{\(\backslash\)"state\(\backslash\)":\{\(\backslash\)"reported\(\backslash\)":"};
1082             updateAnswer+=tempString;
1083             updateAnswer+=\textcolor{stringliteral}{",\(\backslash\)"desired\(\backslash\)":null\}\}"};
1084 
1085 \textcolor{preprocessor}{        #if DEBUG == 1}
1086 
1087             Serial.println( F(\textcolor{stringliteral}{"preparing answer message "}) );
1088             Serial.println();
1089             Serial.println( F(\textcolor{stringliteral}{"updateAnswer : "}) );
1090             Serial.println(updateAnswer);
1091         
1092 \textcolor{preprocessor}{        #endif  }
1093 
1094             \hyperlink{class_cool_board_a2399f44d7c23c1149a335cb3b46d90f1}{mqtt}.\hyperlink{class_cool_m_q_t_t_ace977b3e90ab14b1199fe5c4fb0a13ec}{publish}(updateAnswer.c\_str());
1095             
1096             \hyperlink{class_cool_board_a2399f44d7c23c1149a335cb3b46d90f1}{mqtt}.\hyperlink{class_cool_m_q_t_t_aa5eaae967b562b62cbcf2b8d81f6e5d5}{mqttLoop}();
1097 
1098             delay(10);
1099         
1100             \textcolor{keywordflow}{if}(\hyperlink{class_cool_board_a7c8e505a5804b109e112d5a03df6ea2b}{manual} == 0 )
1101             \{
1102                 \textcolor{comment}{//restart the esp to apply the config}
1103                 ESP.restart();
1104             \}
1105     \}
1106     \textcolor{keywordflow}{else}
1107     \{
1108     
1109 \textcolor{preprocessor}{    #if DEBUG == 1}
1110 
1111         Serial.println( F(\textcolor{stringliteral}{"Failed to parse update message( OR no message received )"}) );
1112         Serial.println();
1113     
1114 \textcolor{preprocessor}{    #endif}
1115     
1116     \}
1117 
1118     \hyperlink{class_cool_board_a1b1d3c684a5baa56b08486e192fd8e97}{coolBoardLed}.\hyperlink{class_cool_board_led_ad5f0de4c628cbfbf49896042831c64ad}{strobe}(153,76,0,0.5);\textcolor{comment}{//shade of brown}
1119     \hyperlink{class_cool_board_a1b1d3c684a5baa56b08486e192fd8e97}{coolBoardLed}.\hyperlink{class_cool_board_led_a93d545679237e8cc858324367149775c}{fadeOut}(153,76,0,0.5);\textcolor{comment}{//shade of brown                              }
1120 \}
\end{DoxyCode}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d7/df9/class_cool_board_a8612756d3f73198cdde857a66f0fe690_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=335pt]{d7/df9/class_cool_board_a8612756d3f73198cdde857a66f0fe690_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{class_cool_board_ae7358fb6e623cfc81b775f5f1734909b}\label{class_cool_board_ae7358fb6e623cfc81b775f5f1734909b}} 
\index{Cool\+Board@{Cool\+Board}!user\+Data@{user\+Data}}
\index{user\+Data@{user\+Data}!Cool\+Board@{Cool\+Board}}
\subsubsection{\texorpdfstring{user\+Data()}{userData()}}
{\footnotesize\ttfamily String Cool\+Board\+::user\+Data (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

\hyperlink{class_cool_board_ae7358fb6e623cfc81b775f5f1734909b}{Cool\+Board\+::user\+Data()}\+: This method is provided to return the user\textquotesingle{}s data.

\begin{DoxyReturn}{Returns}
json string of the user\textquotesingle{}s data 
\end{DoxyReturn}


Definition at line 1246 of file Cool\+Board.\+cpp.


\begin{DoxyCode}
1247 \{
1248 
1249 \textcolor{preprocessor}{#if DEBUG == 1}
1250 
1251     Serial.println( F(\textcolor{stringliteral}{"Entering CoolBoard.userData() "}) );
1252     Serial.println();
1253 
1254 \textcolor{preprocessor}{#endif}
1255 
1256     String tempMAC = WiFi.macAddress();
1257 
1258     tempMAC.replace(\textcolor{stringliteral}{":"}, \textcolor{stringliteral}{""});
1259 
1260     String userJson = \textcolor{stringliteral}{"\{\(\backslash\)"user\(\backslash\)":\(\backslash\)""};
1261 
1262     userJson += \hyperlink{class_cool_board_a2399f44d7c23c1149a335cb3b46d90f1}{mqtt}.\hyperlink{class_cool_m_q_t_t_a373cc92fca7760d886f02d8a6e5b3f63}{getUser}();
1263 
1264     userJson += \textcolor{stringliteral}{"\(\backslash\)",\(\backslash\)"timestamp\(\backslash\)":\(\backslash\)""};
1265 
1266     userJson += \hyperlink{class_cool_board_a50d2a6716879d64a85f3c6b44ad63275}{rtc}.\hyperlink{class_cool_time_ac4f32ee513c1328d984306645e8785a4}{getESDate}(); \textcolor{comment}{// "timestamp":"20yy-mm-ddThh:mm:ssZ"}
1267 
1268     userJson += \textcolor{stringliteral}{"\(\backslash\)",\(\backslash\)"mac\(\backslash\)":\(\backslash\)""};
1269 
1270     userJson += tempMAC;
1271 
1272     userJson += \textcolor{stringliteral}{"\(\backslash\)"\}"};
1273 
1274 \textcolor{preprocessor}{#if DEBUG == 1}
1275 
1276     Serial.println( F(\textcolor{stringliteral}{"userData is : "}) );
1277     Serial.println(userJson);
1278     Serial.println();
1279 
1280 \textcolor{preprocessor}{#endif  }
1281     
1282     \textcolor{keywordflow}{return}(userJson);
1283     
1284 \}
\end{DoxyCode}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d7/df9/class_cool_board_ae7358fb6e623cfc81b775f5f1734909b_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=346pt]{d7/df9/class_cool_board_ae7358fb6e623cfc81b775f5f1734909b_icgraph}
\end{center}
\end{figure}


\subsection{Member Data Documentation}
\mbox{\Hypertarget{class_cool_board_a7b835fafd449e5282f7f91d787a2dc15}\label{class_cool_board_a7b835fafd449e5282f7f91d787a2dc15}} 
\index{Cool\+Board@{Cool\+Board}!answer@{answer}}
\index{answer@{answer}!Cool\+Board@{Cool\+Board}}
\subsubsection{\texorpdfstring{answer}{answer}}
{\footnotesize\ttfamily String Cool\+Board\+::answer =\char`\"{}\char`\"{}\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 106 of file Cool\+Board.\+h.

\mbox{\Hypertarget{class_cool_board_a1b1d3c684a5baa56b08486e192fd8e97}\label{class_cool_board_a1b1d3c684a5baa56b08486e192fd8e97}} 
\index{Cool\+Board@{Cool\+Board}!cool\+Board\+Led@{cool\+Board\+Led}}
\index{cool\+Board\+Led@{cool\+Board\+Led}!Cool\+Board@{Cool\+Board}}
\subsubsection{\texorpdfstring{cool\+Board\+Led}{coolBoardLed}}
{\footnotesize\ttfamily \hyperlink{class_cool_board_led}{Cool\+Board\+Led} Cool\+Board\+::cool\+Board\+Led\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 74 of file Cool\+Board.\+h.

\mbox{\Hypertarget{class_cool_board_af102be5288bd7f7a8e59b13f86e26a00}\label{class_cool_board_af102be5288bd7f7a8e59b13f86e26a00}} 
\index{Cool\+Board@{Cool\+Board}!cool\+Board\+Sensors@{cool\+Board\+Sensors}}
\index{cool\+Board\+Sensors@{cool\+Board\+Sensors}!Cool\+Board@{Cool\+Board}}
\subsubsection{\texorpdfstring{cool\+Board\+Sensors}{coolBoardSensors}}
{\footnotesize\ttfamily \hyperlink{class_cool_board_sensors}{Cool\+Board\+Sensors} Cool\+Board\+::cool\+Board\+Sensors\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 72 of file Cool\+Board.\+h.

\mbox{\Hypertarget{class_cool_board_a427fb753dd8575bdf821c70a5c63d695}\label{class_cool_board_a427fb753dd8575bdf821c70a5c63d695}} 
\index{Cool\+Board@{Cool\+Board}!data@{data}}
\index{data@{data}!Cool\+Board@{Cool\+Board}}
\subsubsection{\texorpdfstring{data}{data}}
{\footnotesize\ttfamily String Cool\+Board\+::data =\char`\"{}\char`\"{}\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 104 of file Cool\+Board.\+h.

\mbox{\Hypertarget{class_cool_board_af1fe1376fc66f93dee80b327ca695377}\label{class_cool_board_af1fe1376fc66f93dee80b327ca695377}} 
\index{Cool\+Board@{Cool\+Board}!En\+I2C@{En\+I2C}}
\index{En\+I2C@{En\+I2C}!Cool\+Board@{Cool\+Board}}
\subsubsection{\texorpdfstring{En\+I2C}{EnI2C}}
{\footnotesize\ttfamily const int Cool\+Board\+::\+En\+I2C = 5\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 108 of file Cool\+Board.\+h.

\mbox{\Hypertarget{class_cool_board_a09e26264839c65873eb56af476eff6b2}\label{class_cool_board_a09e26264839c65873eb56af476eff6b2}} 
\index{Cool\+Board@{Cool\+Board}!external\+Sensors@{external\+Sensors}}
\index{external\+Sensors@{external\+Sensors}!Cool\+Board@{Cool\+Board}}
\subsubsection{\texorpdfstring{external\+Sensors}{externalSensors}}
{\footnotesize\ttfamily \hyperlink{class_external_sensors}{External\+Sensors} Cool\+Board\+::external\+Sensors\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 86 of file Cool\+Board.\+h.

\mbox{\Hypertarget{class_cool_board_a638b00b76aeb819ecfd4c10b8cdd7bb7}\label{class_cool_board_a638b00b76aeb819ecfd4c10b8cdd7bb7}} 
\index{Cool\+Board@{Cool\+Board}!external\+Sensors\+Active@{external\+Sensors\+Active}}
\index{external\+Sensors\+Active@{external\+Sensors\+Active}!Cool\+Board@{Cool\+Board}}
\subsubsection{\texorpdfstring{external\+Sensors\+Active}{externalSensorsActive}}
{\footnotesize\ttfamily bool Cool\+Board\+::external\+Sensors\+Active =0\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 96 of file Cool\+Board.\+h.

\mbox{\Hypertarget{class_cool_board_a42c2586fbb13ff7f06538e9284e8538d}\label{class_cool_board_a42c2586fbb13ff7f06538e9284e8538d}} 
\index{Cool\+Board@{Cool\+Board}!file\+System@{file\+System}}
\index{file\+System@{file\+System}!Cool\+Board@{Cool\+Board}}
\subsubsection{\texorpdfstring{file\+System}{fileSystem}}
{\footnotesize\ttfamily \hyperlink{class_cool_file_system}{Cool\+File\+System} Cool\+Board\+::file\+System\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 70 of file Cool\+Board.\+h.

\mbox{\Hypertarget{class_cool_board_ad103718ce316006c4695b8eb312eaf11}\label{class_cool_board_ad103718ce316006c4695b8eb312eaf11}} 
\index{Cool\+Board@{Cool\+Board}!irene3000@{irene3000}}
\index{irene3000@{irene3000}!Cool\+Board@{Cool\+Board}}
\subsubsection{\texorpdfstring{irene3000}{irene3000}}
{\footnotesize\ttfamily \hyperlink{class_irene3000}{Irene3000} Cool\+Board\+::irene3000\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 84 of file Cool\+Board.\+h.

\mbox{\Hypertarget{class_cool_board_a9c3f7ac625481ee2ae802a25d97a4ae0}\label{class_cool_board_a9c3f7ac625481ee2ae802a25d97a4ae0}} 
\index{Cool\+Board@{Cool\+Board}!irene\+Active@{irene\+Active}}
\index{irene\+Active@{irene\+Active}!Cool\+Board@{Cool\+Board}}
\subsubsection{\texorpdfstring{irene\+Active}{ireneActive}}
{\footnotesize\ttfamily bool Cool\+Board\+::irene\+Active =0\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 92 of file Cool\+Board.\+h.

\mbox{\Hypertarget{class_cool_board_a30b1357881b01ccbec676856a91e48e9}\label{class_cool_board_a30b1357881b01ccbec676856a91e48e9}} 
\index{Cool\+Board@{Cool\+Board}!jet\+Pack@{jet\+Pack}}
\index{jet\+Pack@{jet\+Pack}!Cool\+Board@{Cool\+Board}}
\subsubsection{\texorpdfstring{jet\+Pack}{jetPack}}
{\footnotesize\ttfamily \hyperlink{class_jetpack}{Jetpack} Cool\+Board\+::jet\+Pack\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 82 of file Cool\+Board.\+h.

\mbox{\Hypertarget{class_cool_board_a9be03a913d26e558328935ca3b59a75e}\label{class_cool_board_a9be03a913d26e558328935ca3b59a75e}} 
\index{Cool\+Board@{Cool\+Board}!jetpack\+Active@{jetpack\+Active}}
\index{jetpack\+Active@{jetpack\+Active}!Cool\+Board@{Cool\+Board}}
\subsubsection{\texorpdfstring{jetpack\+Active}{jetpackActive}}
{\footnotesize\ttfamily bool Cool\+Board\+::jetpack\+Active =0\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 94 of file Cool\+Board.\+h.

\mbox{\Hypertarget{class_cool_board_a84bc94413b64973e4aba8c467c97006c}\label{class_cool_board_a84bc94413b64973e4aba8c467c97006c}} 
\index{Cool\+Board@{Cool\+Board}!log\+Interval@{log\+Interval}}
\index{log\+Interval@{log\+Interval}!Cool\+Board@{Cool\+Board}}
\subsubsection{\texorpdfstring{log\+Interval}{logInterval}}
{\footnotesize\ttfamily unsigned long Cool\+Board\+::log\+Interval =1\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 102 of file Cool\+Board.\+h.

\mbox{\Hypertarget{class_cool_board_a7c8e505a5804b109e112d5a03df6ea2b}\label{class_cool_board_a7c8e505a5804b109e112d5a03df6ea2b}} 
\index{Cool\+Board@{Cool\+Board}!manual@{manual}}
\index{manual@{manual}!Cool\+Board@{Cool\+Board}}
\subsubsection{\texorpdfstring{manual}{manual}}
{\footnotesize\ttfamily bool Cool\+Board\+::manual =0\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 100 of file Cool\+Board.\+h.

\mbox{\Hypertarget{class_cool_board_a2399f44d7c23c1149a335cb3b46d90f1}\label{class_cool_board_a2399f44d7c23c1149a335cb3b46d90f1}} 
\index{Cool\+Board@{Cool\+Board}!mqtt@{mqtt}}
\index{mqtt@{mqtt}!Cool\+Board@{Cool\+Board}}
\subsubsection{\texorpdfstring{mqtt}{mqtt}}
{\footnotesize\ttfamily \hyperlink{class_cool_m_q_t_t}{Cool\+M\+Q\+TT} Cool\+Board\+::mqtt\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 80 of file Cool\+Board.\+h.

\mbox{\Hypertarget{class_cool_board_a4ac693895c21025b8808653f2a4316e6}\label{class_cool_board_a4ac693895c21025b8808653f2a4316e6}} 
\index{Cool\+Board@{Cool\+Board}!on\+Board\+Actor@{on\+Board\+Actor}}
\index{on\+Board\+Actor@{on\+Board\+Actor}!Cool\+Board@{Cool\+Board}}
\subsubsection{\texorpdfstring{on\+Board\+Actor}{onBoardActor}}
{\footnotesize\ttfamily \hyperlink{class_cool_board_actor}{Cool\+Board\+Actor} Cool\+Board\+::on\+Board\+Actor\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 88 of file Cool\+Board.\+h.

\mbox{\Hypertarget{class_cool_board_a50d2a6716879d64a85f3c6b44ad63275}\label{class_cool_board_a50d2a6716879d64a85f3c6b44ad63275}} 
\index{Cool\+Board@{Cool\+Board}!rtc@{rtc}}
\index{rtc@{rtc}!Cool\+Board@{Cool\+Board}}
\subsubsection{\texorpdfstring{rtc}{rtc}}
{\footnotesize\ttfamily \hyperlink{class_cool_time}{Cool\+Time} Cool\+Board\+::rtc\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 76 of file Cool\+Board.\+h.

\mbox{\Hypertarget{class_cool_board_a0a51b2287139f66c738101fb53139230}\label{class_cool_board_a0a51b2287139f66c738101fb53139230}} 
\index{Cool\+Board@{Cool\+Board}!sleep\+Active@{sleep\+Active}}
\index{sleep\+Active@{sleep\+Active}!Cool\+Board@{Cool\+Board}}
\subsubsection{\texorpdfstring{sleep\+Active}{sleepActive}}
{\footnotesize\ttfamily bool Cool\+Board\+::sleep\+Active =0\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 98 of file Cool\+Board.\+h.

\mbox{\Hypertarget{class_cool_board_a6395459131d6889a3005f79c7a35e964}\label{class_cool_board_a6395459131d6889a3005f79c7a35e964}} 
\index{Cool\+Board@{Cool\+Board}!user\+Active@{user\+Active}}
\index{user\+Active@{user\+Active}!Cool\+Board@{Cool\+Board}}
\subsubsection{\texorpdfstring{user\+Active}{userActive}}
{\footnotesize\ttfamily bool Cool\+Board\+::user\+Active =0\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 90 of file Cool\+Board.\+h.

\mbox{\Hypertarget{class_cool_board_acd88e6003606b47479ebba81e4aceeca}\label{class_cool_board_acd88e6003606b47479ebba81e4aceeca}} 
\index{Cool\+Board@{Cool\+Board}!wifi\+Manager@{wifi\+Manager}}
\index{wifi\+Manager@{wifi\+Manager}!Cool\+Board@{Cool\+Board}}
\subsubsection{\texorpdfstring{wifi\+Manager}{wifiManager}}
{\footnotesize\ttfamily \hyperlink{class_cool_wifi}{Cool\+Wifi} Cool\+Board\+::wifi\+Manager\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 78 of file Cool\+Board.\+h.



The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
/home/ashiroji/\+Arduino/libraries/\+Cool\+Board/src/\hyperlink{_cool_board_8h}{Cool\+Board.\+h}\item 
/home/ashiroji/\+Arduino/libraries/\+Cool\+Board/src/\hyperlink{_cool_board_8cpp}{Cool\+Board.\+cpp}\end{DoxyCompactItemize}
