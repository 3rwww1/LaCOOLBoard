\hypertarget{class_cool_m_q_t_t}{}\section{Cool\+M\+Q\+TT Class Reference}
\label{class_cool_m_q_t_t}\index{Cool\+M\+Q\+TT@{Cool\+M\+Q\+TT}}


This class handles the mqtt client.  




{\ttfamily \#include $<$Cool\+M\+Q\+T\+T.\+h$>$}



Collaboration diagram for Cool\+M\+Q\+TT\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=152pt]{class_cool_m_q_t_t__coll__graph}
\end{center}
\end{figure}
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
void \hyperlink{class_cool_m_q_t_t_ac9248808641ebf3054ed0620ea9d0100}{begin} ()
\item 
int \hyperlink{class_cool_m_q_t_t_a58b0b1f64b269c2681685208262fba1d}{connect} (uint16\+\_\+t keep\+Alive)
\item 
bool \hyperlink{class_cool_m_q_t_t_ace977b3e90ab14b1199fe5c4fb0a13ec}{publish} (const char $\ast$data)
\item 
bool \hyperlink{class_cool_m_q_t_t_a65a506641740ce797ceadd4fa8a286d3}{publish} (const char $\ast$data, int log\+Interval)
\item 
String \hyperlink{class_cool_m_q_t_t_ae3c18f6ae9723746d32765f1c8f176ca}{read} ()
\item 
void \hyperlink{class_cool_m_q_t_t_a9b703de4f1358f0ee7a5e8c44979c648}{config} (const char mqtt\+Server\mbox{[}$\,$\mbox{]}, const char in\+Topic\mbox{[}$\,$\mbox{]}, const char out\+Topic\mbox{[}$\,$\mbox{]}, const char user\mbox{[}$\,$\mbox{]}, int buffer\+Size)
\item 
bool \hyperlink{class_cool_m_q_t_t_a6571671781a505feca9a8a56e256c6bc}{config} ()
\item 
void \hyperlink{class_cool_m_q_t_t_a30d82ad665bfb603f46ecdbc290775df}{callback} (char $\ast$topic, byte $\ast$payload, unsigned int length)
\item 
void \hyperlink{class_cool_m_q_t_t_a40553a0ad4b5ecf1cb4411ab54ca85fb}{print\+Conf} ()
\item 
int \hyperlink{class_cool_m_q_t_t_a5d003307eff78efbd585e42b43b72b6d}{state} ()
\item 
bool \hyperlink{class_cool_m_q_t_t_aa5eaae967b562b62cbcf2b8d81f6e5d5}{mqtt\+Loop} ()
\item 
String \hyperlink{class_cool_m_q_t_t_a373cc92fca7760d886f02d8a6e5b3f63}{get\+User} ()
\end{DoxyCompactItemize}


\subsection{Detailed Description}
This class handles the mqtt client. 

Definition at line \hyperlink{_cool_m_q_t_t_8h_source_l00022}{22} of file \hyperlink{_cool_m_q_t_t_8h_source}{Cool\+M\+Q\+T\+T.\+h}.



\subsection{Member Function Documentation}
\mbox{\Hypertarget{class_cool_m_q_t_t_ac9248808641ebf3054ed0620ea9d0100}\label{class_cool_m_q_t_t_ac9248808641ebf3054ed0620ea9d0100}} 
\index{Cool\+M\+Q\+TT@{Cool\+M\+Q\+TT}!begin@{begin}}
\index{begin@{begin}!Cool\+M\+Q\+TT@{Cool\+M\+Q\+TT}}
\subsubsection{\texorpdfstring{begin()}{begin()}}
{\footnotesize\ttfamily void Cool\+M\+Q\+T\+T\+::begin (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

\hyperlink{class_cool_m_q_t_t_ac9248808641ebf3054ed0620ea9d0100}{Cool\+M\+Q\+T\+T\+::begin()}\+: This method is provided to set the mqtt client\textquotesingle{}s parameters\+: -\/client -\/server -\/callback method -\/buffer size 

Definition at line \hyperlink{_cool_m_q_t_t_8cpp_source_l00026}{26} of file \hyperlink{_cool_m_q_t_t_8cpp_source}{Cool\+M\+Q\+T\+T.\+cpp}.



References \hyperlink{_cool_m_q_t_t_8cpp_source_l00160}{callback()}.



Referenced by \hyperlink{_cool_board_8cpp_source_l00021}{Cool\+Board\+::begin()}, and \hyperlink{_cool_board_8cpp_source_l00411}{Cool\+Board\+::update()}.


\begin{DoxyCode}
00027 \{ 
00028     client.setClient(espClient);
00029     client.setServer(mqttServer, 1883); 
00030     client.setCallback([\textcolor{keyword}{this}] (\textcolor{keywordtype}{char}* topic, byte* payload, \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} length) \{ this->
      \hyperlink{class_cool_m_q_t_t_a30d82ad665bfb603f46ecdbc290775df}{callback}(topic, payload, length); \});
00031     client.setBufferSize((\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{short})bufferSize);
00032 
00033 \}
\end{DoxyCode}
Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=317pt]{class_cool_m_q_t_t_ac9248808641ebf3054ed0620ea9d0100_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{class_cool_m_q_t_t_ac9248808641ebf3054ed0620ea9d0100_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{class_cool_m_q_t_t_a30d82ad665bfb603f46ecdbc290775df}\label{class_cool_m_q_t_t_a30d82ad665bfb603f46ecdbc290775df}} 
\index{Cool\+M\+Q\+TT@{Cool\+M\+Q\+TT}!callback@{callback}}
\index{callback@{callback}!Cool\+M\+Q\+TT@{Cool\+M\+Q\+TT}}
\subsubsection{\texorpdfstring{callback()}{callback()}}
{\footnotesize\ttfamily void Cool\+M\+Q\+T\+T\+::callback (\begin{DoxyParamCaption}\item[{char $\ast$}]{topic,  }\item[{byte $\ast$}]{payload,  }\item[{unsigned int}]{length }\end{DoxyParamCaption})}

Cool\+M\+Q\+T\+T\+::callback(in topic, incoming message , message length)\+: This method is provided to handle incoming messages from the subscribed in\+Topic.

Arguments are automatically assigned in client.\+set\+Callback() 

Definition at line \hyperlink{_cool_m_q_t_t_8cpp_source_l00160}{160} of file \hyperlink{_cool_m_q_t_t_8cpp_source}{Cool\+M\+Q\+T\+T.\+cpp}.



References \hyperlink{_irene3000_8h_source_l00025}{temp}.



Referenced by \hyperlink{_cool_m_q_t_t_8cpp_source_l00026}{begin()}.


\begin{DoxyCode}
00161 \{
00162     \textcolor{keywordtype}{char} \hyperlink{_irene3000_8h_a5905d48604152cf57aa6bfa087b49173}{temp}[length+1];
00163 
00164     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < length; i++) 
00165     \{
00166         temp[i]=(char)payload[i]; 
00167 
00168     \}
00169 
00170     this->newMsg=\textcolor{keyword}{true};
00171 
00172     temp[length+1]=\textcolor{charliteral}{'\(\backslash\)0'};
00173 
00174     msg=String(temp);
00175     msg.remove(length,1);
00176     Serial.println(\textcolor{stringliteral}{"received"});
00177     Serial.println(msg);
00178 
00179 \}
\end{DoxyCode}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{class_cool_m_q_t_t_a30d82ad665bfb603f46ecdbc290775df_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{class_cool_m_q_t_t_a9b703de4f1358f0ee7a5e8c44979c648}\label{class_cool_m_q_t_t_a9b703de4f1358f0ee7a5e8c44979c648}} 
\index{Cool\+M\+Q\+TT@{Cool\+M\+Q\+TT}!config@{config}}
\index{config@{config}!Cool\+M\+Q\+TT@{Cool\+M\+Q\+TT}}
\subsubsection{\texorpdfstring{config()}{config()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily void Cool\+M\+Q\+T\+T\+::config (\begin{DoxyParamCaption}\item[{const char}]{mqtt\+Server\mbox{[}$\,$\mbox{]},  }\item[{const char}]{in\+Topic\mbox{[}$\,$\mbox{]},  }\item[{const char}]{out\+Topic\mbox{[}$\,$\mbox{]},  }\item[{const char}]{user\mbox{[}$\,$\mbox{]},  }\item[{int}]{buffer\+Size }\end{DoxyParamCaption})}

Cool\+M\+Q\+T\+T\+::config(server,in topic, out topic , user Id, buffer size)\+: This method is provided to manually configure the mqtt client 

Definition at line \hyperlink{_cool_m_q_t_t_8cpp_source_l00340}{340} of file \hyperlink{_cool_m_q_t_t_8cpp_source}{Cool\+M\+Q\+T\+T.\+cpp}.



Referenced by \hyperlink{_cool_board_8cpp_source_l00021}{Cool\+Board\+::begin()}, and \hyperlink{_cool_board_8cpp_source_l00411}{Cool\+Board\+::update()}.


\begin{DoxyCode}
00341 \{
00342     \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int} i =0;i< 50 ;i++)
00343     \{
00344         this->mqttServer[i]=mqttServer[i];
00345         this->inTopic[i]=inTopic[i];
00346         this->outTopic[i]=outTopic[i];
00347         this->user[i]=user[i];
00348     \}
00349     this->bufferSize=bufferSize;
00350 
00351 \}
\end{DoxyCode}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{class_cool_m_q_t_t_a9b703de4f1358f0ee7a5e8c44979c648_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{class_cool_m_q_t_t_a6571671781a505feca9a8a56e256c6bc}\label{class_cool_m_q_t_t_a6571671781a505feca9a8a56e256c6bc}} 
\index{Cool\+M\+Q\+TT@{Cool\+M\+Q\+TT}!config@{config}}
\index{config@{config}!Cool\+M\+Q\+TT@{Cool\+M\+Q\+TT}}
\subsubsection{\texorpdfstring{config()}{config()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily bool Cool\+M\+Q\+T\+T\+::config (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

\hyperlink{class_cool_m_q_t_t_a6571671781a505feca9a8a56e256c6bc}{Cool\+M\+Q\+T\+T\+::config()}\+: This method is provided to configure the mqtt\+Client \+: -\/server -\/in\+Topic -\/out\+Topic -\/client Id -\/buffer size

\begin{DoxyReturn}{Returns}
true if successful,false otherwise 
\end{DoxyReturn}


Definition at line \hyperlink{_cool_m_q_t_t_8cpp_source_l00208}{208} of file \hyperlink{_cool_m_q_t_t_8cpp_source}{Cool\+M\+Q\+T\+T.\+cpp}.


\begin{DoxyCode}
00209 \{
00210     \textcolor{comment}{//read config file}
00211     \textcolor{comment}{//update data}
00212     File configFile = SPIFFS.open(\textcolor{stringliteral}{"/mqttConfig.json"}, \textcolor{stringliteral}{"r"});
00213 
00214     \textcolor{keywordflow}{if} (!configFile) 
00215     \{
00216         \textcolor{keywordflow}{return}(\textcolor{keyword}{false});
00217     \}
00218     \textcolor{keywordflow}{else}
00219     \{
00220         \textcolor{keywordtype}{size\_t} size = configFile.size();
00221         \textcolor{comment}{// Allocate a buffer to store contents of the file.}
00222         std::unique\_ptr<char[]> buf(\textcolor{keyword}{new} \textcolor{keywordtype}{char}[size]);
00223 
00224         configFile.readBytes(buf.get(), size);
00225         DynamicJsonBuffer jsonBuffer;
00226         JsonObject& json = jsonBuffer.parseObject(buf.get());
00227         \textcolor{keywordflow}{if} (!json.success()) 
00228         \{
00229               \textcolor{keywordflow}{return}(\textcolor{keyword}{false});
00230         \} 
00231         \textcolor{keywordflow}{else}
00232         \{               
00233                 \textcolor{keywordflow}{if}(json[\textcolor{stringliteral}{"mqttServer"}].success() )
00234                 \{           
00235                     \textcolor{keyword}{const} \textcolor{keywordtype}{char}* tempmqttServer = json[\textcolor{stringliteral}{"mqttServer"}]; \textcolor{comment}{// "inTopic"}
00236                     \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int} i =0;i< 50 ;i++)
00237                     \{
00238                         mqttServer[i]=tempmqttServer[i];
00239                     \}
00240                 \}
00241                 \textcolor{keywordflow}{else}
00242                 \{
00243                     \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int} i =0;i< 50 ;i++)
00244                     \{
00245                         this->mqttServer[i]=this->mqttServer[i];
00246                     \}
00247 
00248                 \}
00249                 json[\textcolor{stringliteral}{"mqttServer"}]=this->mqttServer;
00250 
00251                 
00252                 \textcolor{keywordflow}{if}(json[\textcolor{stringliteral}{"inTopic"}].success() )
00253                 \{
00254                     \textcolor{keyword}{const} \textcolor{keywordtype}{char}* tempInTopic = json[\textcolor{stringliteral}{"inTopic"}]; \textcolor{comment}{// "inTopic"}
00255                     \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int} i =0;i< 50;i++)
00256                     \{
00257                         inTopic[i]=tempInTopic[i];
00258                     \}
00259                 \}
00260                 \textcolor{keywordflow}{else}
00261                 \{
00262                     String tempMAC = WiFi.macAddress();
00263                     tempMAC.replace(\textcolor{stringliteral}{":"},\textcolor{stringliteral}{""});
00264                     snprintf(inTopic, 50, \textcolor{stringliteral}{"$aws/things/%s/shadow/update/delta"}, tempMAC.c\_str());   
00265                     Serial.print(\textcolor{stringliteral}{"Set Incomming MQTT Channel to : "});
00266                     Serial.println(inTopic);    
00267                 \}
00268                 json[\textcolor{stringliteral}{"inTopic"}]=this->inTopic;
00269                 
00270                 
00271                 \textcolor{keywordflow}{if}(json[\textcolor{stringliteral}{"outTopic"}].success() )
00272                 \{
00273                     \textcolor{keyword}{const} \textcolor{keywordtype}{char}* tempOutTopic = json[\textcolor{stringliteral}{"outTopic"}]; \textcolor{comment}{// "outTopic"}
00274                     \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int} i =0;i<50;i++)
00275                     \{
00276                         outTopic[i]=tempOutTopic[i];
00277                     \}
00278                 \}
00279                 \textcolor{keywordflow}{else}
00280                 \{
00281                     String tempMAC = WiFi.macAddress();
00282                     tempMAC.replace(\textcolor{stringliteral}{":"},\textcolor{stringliteral}{""});
00283                     snprintf(outTopic, 50, \textcolor{stringliteral}{"$aws/things/%s/shadow/update"}, tempMAC.c\_str());
00284                     Serial.print(\textcolor{stringliteral}{"Set Outgoing MQTT Channel to : "});
00285                     Serial.println(outTopic);
00286                 \}
00287                 json[\textcolor{stringliteral}{"outTopic"}]=this->outTopic;
00288             
00289                 
00290                 \textcolor{keywordflow}{if}(json[\textcolor{stringliteral}{"user"}].success() )
00291                 \{               
00292                     \textcolor{keyword}{const} \textcolor{keywordtype}{char}* tempUser = json[\textcolor{stringliteral}{"user"}]; 
00293                     \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int} i =0;i<50;i++)
00294                     \{
00295                         user[i]=tempUser[i];
00296                     \}
00297                 \}
00298                 \textcolor{keywordflow}{else}
00299                 \{
00300                     \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int} i=0;i<50;i++)
00301                     \{
00302                         this->user[i]=this->user[i];
00303                     \}               
00304                 \}
00305                 json[\textcolor{stringliteral}{"user"}]=this->user;
00306                 
00307                 \textcolor{keywordflow}{if}(json[\textcolor{stringliteral}{"bufferSize"}].success() )
00308                 \{
00309                     \textcolor{keywordtype}{int} tempBufferSize = json[\textcolor{stringliteral}{"bufferSize"}]; \textcolor{comment}{// 512}
00310                     bufferSize=tempBufferSize;
00311                 \}
00312                 \textcolor{keywordflow}{else}
00313                 \{
00314                     this->bufferSize=this->bufferSize;
00315                 \}
00316                 json[\textcolor{stringliteral}{"bufferSize"}]=this->bufferSize;
00317 
00318                 configFile.close();
00319                 configFile = SPIFFS.open(\textcolor{stringliteral}{"/mqttConfig.json"}, \textcolor{stringliteral}{"w"});
00320                 \textcolor{keywordflow}{if}(!configFile)
00321                 \{
00322                     \textcolor{keywordflow}{return}(\textcolor{keyword}{false});              
00323                 \}
00324                 
00325                 json.printTo(configFile);
00326                 configFile.close();
00327               
00328               \textcolor{keywordflow}{return}(\textcolor{keyword}{true}); 
00329         \}
00330     \}   
00331     
00332 
00333 \}
\end{DoxyCode}
\mbox{\Hypertarget{class_cool_m_q_t_t_a58b0b1f64b269c2681685208262fba1d}\label{class_cool_m_q_t_t_a58b0b1f64b269c2681685208262fba1d}} 
\index{Cool\+M\+Q\+TT@{Cool\+M\+Q\+TT}!connect@{connect}}
\index{connect@{connect}!Cool\+M\+Q\+TT@{Cool\+M\+Q\+TT}}
\subsubsection{\texorpdfstring{connect()}{connect()}}
{\footnotesize\ttfamily int Cool\+M\+Q\+T\+T\+::connect (\begin{DoxyParamCaption}\item[{uint16\+\_\+t}]{keep\+Alive }\end{DoxyParamCaption})}

Cool\+M\+Q\+T\+T\+::connect( time to keep the connection alive )\+: This method is provided to connect the client to the server, publish to the out topic , subscribe to the in topic and set the keep\+Alive time.

\begin{DoxyReturn}{Returns}
mqtt client state 
\end{DoxyReturn}


Definition at line \hyperlink{_cool_m_q_t_t_8cpp_source_l00064}{64} of file \hyperlink{_cool_m_q_t_t_8cpp_source}{Cool\+M\+Q\+T\+T.\+cpp}.



Referenced by \hyperlink{_cool_board_8cpp_source_l00071}{Cool\+Board\+::connect()}.


\begin{DoxyCode}
00065 \{       
00066     \textcolor{keywordtype}{int} i=0;
00067     Serial.println(\textcolor{stringliteral}{"MQTT connecting..."});
00068     \textcolor{keywordflow}{while} ((!client.connected())&&(i<100)) 
00069     \{
00070         \textcolor{comment}{// Attempt to connect}
00071         \textcolor{keywordflow}{if} (client.connect(user,keepAlive)) \{
00072             Serial.println(\textcolor{stringliteral}{"connected"});
00073             \textcolor{comment}{// Once connected, publish an announcement...}
00074             \textcolor{comment}{//client.publish(outTopic, "hello world by Ash");}
00075             \textcolor{comment}{// ... and resubscribe}
00076             client.subscribe(inTopic);
00077             Serial.println(\textcolor{stringliteral}{"published and subscribed , leavin "}) ;
00078             \textcolor{keywordflow}{return}(client.state());
00079         \}
00080         \textcolor{keywordflow}{else}
00081         \{
00082             Serial.println(\textcolor{stringliteral}{"not connected , leaving"});
00083             \textcolor{keywordflow}{return}(client.state());
00084             
00085         \}
00086     delay(5);
00087     i++;
00088     \}
00089     
00090     \textcolor{keywordflow}{return}(1);
00091 
00092 \}
\end{DoxyCode}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=324pt]{class_cool_m_q_t_t_a58b0b1f64b269c2681685208262fba1d_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{class_cool_m_q_t_t_a373cc92fca7760d886f02d8a6e5b3f63}\label{class_cool_m_q_t_t_a373cc92fca7760d886f02d8a6e5b3f63}} 
\index{Cool\+M\+Q\+TT@{Cool\+M\+Q\+TT}!get\+User@{get\+User}}
\index{get\+User@{get\+User}!Cool\+M\+Q\+TT@{Cool\+M\+Q\+TT}}
\subsubsection{\texorpdfstring{get\+User()}{getUser()}}
{\footnotesize\ttfamily String Cool\+M\+Q\+T\+T\+::get\+User (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

\hyperlink{class_cool_m_q_t_t_a373cc92fca7760d886f02d8a6e5b3f63}{Cool\+M\+Q\+T\+T\+::get\+User()}\+: This method is provided to get the user name 

Definition at line \hyperlink{_cool_m_q_t_t_8cpp_source_l00375}{375} of file \hyperlink{_cool_m_q_t_t_8cpp_source}{Cool\+M\+Q\+T\+T.\+cpp}.



Referenced by \hyperlink{_cool_board_8cpp_source_l00548}{Cool\+Board\+::user\+Data()}.


\begin{DoxyCode}
00376 \{
00377     \textcolor{keywordflow}{return} String(user);
00378 \}
\end{DoxyCode}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{class_cool_m_q_t_t_a373cc92fca7760d886f02d8a6e5b3f63_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{class_cool_m_q_t_t_aa5eaae967b562b62cbcf2b8d81f6e5d5}\label{class_cool_m_q_t_t_aa5eaae967b562b62cbcf2b8d81f6e5d5}} 
\index{Cool\+M\+Q\+TT@{Cool\+M\+Q\+TT}!mqtt\+Loop@{mqtt\+Loop}}
\index{mqtt\+Loop@{mqtt\+Loop}!Cool\+M\+Q\+TT@{Cool\+M\+Q\+TT}}
\subsubsection{\texorpdfstring{mqtt\+Loop()}{mqttLoop()}}
{\footnotesize\ttfamily bool Cool\+M\+Q\+T\+T\+::mqtt\+Loop (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

\hyperlink{class_cool_m_q_t_t_aa5eaae967b562b62cbcf2b8d81f6e5d5}{Cool\+M\+Q\+T\+T\+::mqtt\+Loop()}\+: This method is provided to allow the client to process the data

\begin{DoxyReturn}{Returns}
true if successful,false otherwise 
\end{DoxyReturn}


Definition at line \hyperlink{_cool_m_q_t_t_8cpp_source_l00147}{147} of file \hyperlink{_cool_m_q_t_t_8cpp_source}{Cool\+M\+Q\+T\+T.\+cpp}.



Referenced by \hyperlink{_cool_board_8cpp_source_l00097}{Cool\+Board\+::on\+Line\+Mode()}, and \hyperlink{_cool_board_8cpp_source_l00411}{Cool\+Board\+::update()}.


\begin{DoxyCode}
00148 \{
00149     this->client.loop();
00150     \textcolor{keywordflow}{return}(client.loop());
00151 \}
\end{DoxyCode}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{class_cool_m_q_t_t_aa5eaae967b562b62cbcf2b8d81f6e5d5_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{class_cool_m_q_t_t_a40553a0ad4b5ecf1cb4411ab54ca85fb}\label{class_cool_m_q_t_t_a40553a0ad4b5ecf1cb4411ab54ca85fb}} 
\index{Cool\+M\+Q\+TT@{Cool\+M\+Q\+TT}!print\+Conf@{print\+Conf}}
\index{print\+Conf@{print\+Conf}!Cool\+M\+Q\+TT@{Cool\+M\+Q\+TT}}
\subsubsection{\texorpdfstring{print\+Conf()}{printConf()}}
{\footnotesize\ttfamily void Cool\+M\+Q\+T\+T\+::print\+Conf (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

\hyperlink{class_cool_m_q_t_t_a40553a0ad4b5ecf1cb4411ab54ca85fb}{Cool\+M\+Q\+T\+T\+::print\+Conf()}\+: This method is provided to print the configuration to the Serial Monitor 

Definition at line \hyperlink{_cool_m_q_t_t_8cpp_source_l00358}{358} of file \hyperlink{_cool_m_q_t_t_8cpp_source}{Cool\+M\+Q\+T\+T.\+cpp}.



Referenced by \hyperlink{_cool_board_8cpp_source_l00021}{Cool\+Board\+::begin()}.


\begin{DoxyCode}
00359 \{
00360     Serial.println(\textcolor{stringliteral}{"MQTT conf "});
00361     Serial.println(mqttServer);
00362     Serial.println(inTopic);
00363     Serial.println(outTopic);
00364     Serial.println(user);
00365     Serial.println(bufferSize);
00366     Serial.println(\textcolor{stringliteral}{" "});
00367 
00368 
00369 \}
\end{DoxyCode}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=318pt]{class_cool_m_q_t_t_a40553a0ad4b5ecf1cb4411ab54ca85fb_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{class_cool_m_q_t_t_ace977b3e90ab14b1199fe5c4fb0a13ec}\label{class_cool_m_q_t_t_ace977b3e90ab14b1199fe5c4fb0a13ec}} 
\index{Cool\+M\+Q\+TT@{Cool\+M\+Q\+TT}!publish@{publish}}
\index{publish@{publish}!Cool\+M\+Q\+TT@{Cool\+M\+Q\+TT}}
\subsubsection{\texorpdfstring{publish()}{publish()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily bool Cool\+M\+Q\+T\+T\+::publish (\begin{DoxyParamCaption}\item[{const char $\ast$}]{data }\end{DoxyParamCaption})}

Cool\+M\+Q\+T\+T\+::publish(data)\+: This method is provided to publish data to the out topic

\begin{DoxyReturn}{Returns}
true if publish successful, false otherwise 
\end{DoxyReturn}


Definition at line \hyperlink{_cool_m_q_t_t_8cpp_source_l00102}{102} of file \hyperlink{_cool_m_q_t_t_8cpp_source}{Cool\+M\+Q\+T\+T.\+cpp}.



Referenced by \hyperlink{_cool_board_8cpp_source_l00097}{Cool\+Board\+::on\+Line\+Mode()}, \hyperlink{_cool_m_q_t_t_8cpp_source_l00125}{publish()}, and \hyperlink{_cool_board_8cpp_source_l00411}{Cool\+Board\+::update()}.


\begin{DoxyCode}
00103 \{
00104 
00105     \textcolor{comment}{//data is in JSON, publish it directly}
00106 
00107     Serial.println(\textcolor{stringliteral}{"data to publish"});
00108     Serial.println(data);
00109     Serial.print(\textcolor{stringliteral}{"data size "});Serial.println(strlen(data));
00110     \textcolor{keywordtype}{bool} pub=client.publish( outTopic, data,strlen(data) );
00111 
00112 
00113     \textcolor{keywordflow}{return}( pub);
00114 
00115 \}
\end{DoxyCode}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{class_cool_m_q_t_t_ace977b3e90ab14b1199fe5c4fb0a13ec_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{class_cool_m_q_t_t_a65a506641740ce797ceadd4fa8a286d3}\label{class_cool_m_q_t_t_a65a506641740ce797ceadd4fa8a286d3}} 
\index{Cool\+M\+Q\+TT@{Cool\+M\+Q\+TT}!publish@{publish}}
\index{publish@{publish}!Cool\+M\+Q\+TT@{Cool\+M\+Q\+TT}}
\subsubsection{\texorpdfstring{publish()}{publish()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily bool Cool\+M\+Q\+T\+T\+::publish (\begin{DoxyParamCaption}\item[{const char $\ast$}]{data,  }\item[{int}]{log\+Interval }\end{DoxyParamCaption})}

Cool\+M\+Q\+T\+T\+::publish(data)\+: This method is provided to publish data to the out topic every log\+Interval ms

\begin{DoxyReturn}{Returns}
true if publish successful, false otherwise 
\end{DoxyReturn}


Definition at line \hyperlink{_cool_m_q_t_t_8cpp_source_l00125}{125} of file \hyperlink{_cool_m_q_t_t_8cpp_source}{Cool\+M\+Q\+T\+T.\+cpp}.



References \hyperlink{_cool_m_q_t_t_8cpp_source_l00102}{publish()}.


\begin{DoxyCode}
00126 \{
00127     \textcolor{keywordflow}{if}( (millis()-this->previousLogTime) >=( logInterval ) )
00128     \{
00129         this->\hyperlink{class_cool_m_q_t_t_ace977b3e90ab14b1199fe5c4fb0a13ec}{publish}(data);
00130 
00131         this->previousLogTime=millis();
00132 
00133         \textcolor{keywordflow}{return}(\textcolor{keyword}{true});
00134     \}
00135     
00136     \textcolor{keywordflow}{return}(\textcolor{keyword}{false});
00137 \}
\end{DoxyCode}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=318pt]{class_cool_m_q_t_t_a65a506641740ce797ceadd4fa8a286d3_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{class_cool_m_q_t_t_ae3c18f6ae9723746d32765f1c8f176ca}\label{class_cool_m_q_t_t_ae3c18f6ae9723746d32765f1c8f176ca}} 
\index{Cool\+M\+Q\+TT@{Cool\+M\+Q\+TT}!read@{read}}
\index{read@{read}!Cool\+M\+Q\+TT@{Cool\+M\+Q\+TT}}
\subsubsection{\texorpdfstring{read()}{read()}}
{\footnotesize\ttfamily String Cool\+M\+Q\+T\+T\+::read (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

\hyperlink{class_cool_m_q_t_t_ae3c18f6ae9723746d32765f1c8f176ca}{Cool\+M\+Q\+T\+T\+::read()}\+: This method is provided to return the last read message. 

Definition at line \hyperlink{_cool_m_q_t_t_8cpp_source_l00186}{186} of file \hyperlink{_cool_m_q_t_t_8cpp_source}{Cool\+M\+Q\+T\+T.\+cpp}.



Referenced by \hyperlink{_cool_board_8cpp_source_l00097}{Cool\+Board\+::on\+Line\+Mode()}.


\begin{DoxyCode}
00187 \{   
00188     \textcolor{keywordflow}{if}(this->newMsg==\textcolor{keyword}{true})
00189     \{
00190         \textcolor{keywordflow}{return}(this->msg);
00191         this->newMsg=\textcolor{keyword}{false};
00192     \}
00193     \textcolor{keywordflow}{return}(\textcolor{stringliteral}{" "});
00194 
00195 \}
\end{DoxyCode}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=326pt]{class_cool_m_q_t_t_ae3c18f6ae9723746d32765f1c8f176ca_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{class_cool_m_q_t_t_a5d003307eff78efbd585e42b43b72b6d}\label{class_cool_m_q_t_t_a5d003307eff78efbd585e42b43b72b6d}} 
\index{Cool\+M\+Q\+TT@{Cool\+M\+Q\+TT}!state@{state}}
\index{state@{state}!Cool\+M\+Q\+TT@{Cool\+M\+Q\+TT}}
\subsubsection{\texorpdfstring{state()}{state()}}
{\footnotesize\ttfamily int Cool\+M\+Q\+T\+T\+::state (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

\hyperlink{class_cool_m_q_t_t_a5d003307eff78efbd585e42b43b72b6d}{Cool\+M\+Q\+T\+T\+::state()}\+: This method is provided to return the mqtt client\textquotesingle{}s state. \begin{DoxyReturn}{Returns}
mqtt client state\+: -\/4 \+: M\+Q\+T\+T\+\_\+\+C\+O\+N\+N\+E\+C\+T\+I\+O\+N\+\_\+\+T\+I\+M\+E\+O\+UT -\/ the server didn\textquotesingle{}t respond within the keepalive time -\/3 \+: M\+Q\+T\+T\+\_\+\+C\+O\+N\+N\+E\+C\+T\+I\+O\+N\+\_\+\+L\+O\+ST -\/ the network connection was broken -\/2 \+: M\+Q\+T\+T\+\_\+\+C\+O\+N\+N\+E\+C\+T\+\_\+\+F\+A\+I\+L\+ED -\/ the network connection failed -\/1 \+: M\+Q\+T\+T\+\_\+\+D\+I\+S\+C\+O\+N\+N\+E\+C\+T\+ED -\/ the client is disconnected cleanly 0 \+: M\+Q\+T\+T\+\_\+\+C\+O\+N\+N\+E\+C\+T\+ED -\/ the cient is connected 1 \+: M\+Q\+T\+T\+\_\+\+C\+O\+N\+N\+E\+C\+T\+\_\+\+B\+A\+D\+\_\+\+P\+R\+O\+T\+O\+C\+OL -\/ the server doesn\textquotesingle{}t support the requested version of M\+Q\+TT 2 \+: M\+Q\+T\+T\+\_\+\+C\+O\+N\+N\+E\+C\+T\+\_\+\+B\+A\+D\+\_\+\+C\+L\+I\+E\+N\+T\+\_\+\+ID -\/ the server rejected the client identifier 3 \+: M\+Q\+T\+T\+\_\+\+C\+O\+N\+N\+E\+C\+T\+\_\+\+U\+N\+A\+V\+A\+I\+L\+A\+B\+LE -\/ the server was unable to accept the connection 4 \+: M\+Q\+T\+T\+\_\+\+C\+O\+N\+N\+E\+C\+T\+\_\+\+B\+A\+D\+\_\+\+C\+R\+E\+D\+E\+N\+T\+I\+A\+LS -\/ the username/password were rejected 5 \+: M\+Q\+T\+T\+\_\+\+C\+O\+N\+N\+E\+C\+T\+\_\+\+U\+N\+A\+U\+T\+H\+O\+R\+I\+Z\+ED -\/ the client was not authorized to connect 
\end{DoxyReturn}


Definition at line \hyperlink{_cool_m_q_t_t_8cpp_source_l00051}{51} of file \hyperlink{_cool_m_q_t_t_8cpp_source}{Cool\+M\+Q\+T\+T.\+cpp}.



Referenced by \hyperlink{_cool_board_8cpp_source_l00071}{Cool\+Board\+::connect()}.


\begin{DoxyCode}
00052 \{
00053     \textcolor{keywordflow}{return}(client.state());
00054 \}
\end{DoxyCode}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=311pt]{class_cool_m_q_t_t_a5d003307eff78efbd585e42b43b72b6d_icgraph}
\end{center}
\end{figure}


The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
\hyperlink{_cool_m_q_t_t_8h}{Cool\+M\+Q\+T\+T.\+h}\item 
\hyperlink{_cool_m_q_t_t_8cpp}{Cool\+M\+Q\+T\+T.\+cpp}\end{DoxyCompactItemize}
