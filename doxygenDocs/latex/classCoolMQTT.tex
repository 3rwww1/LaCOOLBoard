\hypertarget{classCoolMQTT}{}\section{Cool\+M\+Q\+TT Class Reference}
\label{classCoolMQTT}\index{Cool\+M\+Q\+TT@{Cool\+M\+Q\+TT}}


This class handles the mqtt client.  




{\ttfamily \#include $<$Cool\+M\+Q\+T\+T.\+h$>$}



Collaboration diagram for Cool\+M\+Q\+TT\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=152pt]{classCoolMQTT__coll__graph}
\end{center}
\end{figure}
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
void \hyperlink{classCoolMQTT_ac9248808641ebf3054ed0620ea9d0100}{begin} ()
\item 
void \hyperlink{classCoolMQTT_a30d82ad665bfb603f46ecdbc290775df}{callback} (char $\ast$topic, byte $\ast$payload, unsigned int length)
\item 
void \hyperlink{classCoolMQTT_a0158596b9a2297c8ba609b56ce6bace1}{config} (const char \hyperlink{classCoolMQTT_ab8bb951f87ddbf92db74c2ad16a3e53e}{mqtt\+Server}\mbox{[}$\,$\mbox{]}, const char \hyperlink{classCoolMQTT_a4492f52a441e83cc5151010317fdb52d}{in\+Topic}\mbox{[}$\,$\mbox{]}, const char \hyperlink{classCoolMQTT_a109c786a17b463f9eeba046194279522}{out\+Topic}\mbox{[}$\,$\mbox{]}, const char \hyperlink{classCoolMQTT_af01bc6160c5a191e90df1b6e7318828d}{client\+Id}\mbox{[}$\,$\mbox{]}, int \hyperlink{classCoolMQTT_a7f3cf26b51d6770f216e42c5ef13ca9f}{buffer\+Size})
\item 
bool \hyperlink{classCoolMQTT_a6571671781a505feca9a8a56e256c6bc}{config} ()
\item 
int \hyperlink{classCoolMQTT_a58b0b1f64b269c2681685208262fba1d}{connect} (uint16\+\_\+t keep\+Alive)
\item 
bool \hyperlink{classCoolMQTT_aa5eaae967b562b62cbcf2b8d81f6e5d5}{mqtt\+Loop} ()
\item 
void \hyperlink{classCoolMQTT_a40553a0ad4b5ecf1cb4411ab54ca85fb}{print\+Conf} ()
\item 
bool \hyperlink{classCoolMQTT_ace977b3e90ab14b1199fe5c4fb0a13ec}{publish} (const char $\ast$data)
\item 
String \hyperlink{classCoolMQTT_ae3c18f6ae9723746d32765f1c8f176ca}{read} ()
\item 
int \hyperlink{classCoolMQTT_a5d003307eff78efbd585e42b43b72b6d}{state} ()
\end{DoxyCompactItemize}
\subsection*{Private Attributes}
\begin{DoxyCompactItemize}
\item 
int \hyperlink{classCoolMQTT_a7f3cf26b51d6770f216e42c5ef13ca9f}{buffer\+Size}
\item 
Pub\+Sub\+Client \hyperlink{classCoolMQTT_a4ca71e4f76ef868692a297efd45b1415}{client}
\item 
char \hyperlink{classCoolMQTT_af01bc6160c5a191e90df1b6e7318828d}{client\+Id} \mbox{[}50\mbox{]}
\item 
Wi\+Fi\+Client \hyperlink{classCoolMQTT_acc30a0200967374a524092a8a806502a}{esp\+Client}
\item 
char \hyperlink{classCoolMQTT_a4492f52a441e83cc5151010317fdb52d}{in\+Topic} \mbox{[}50\mbox{]}
\item 
char \hyperlink{classCoolMQTT_ab8bb951f87ddbf92db74c2ad16a3e53e}{mqtt\+Server} \mbox{[}50\mbox{]}
\item 
String \hyperlink{classCoolMQTT_af6b19e7074dbbb4ae493c44dcb53f7ff}{msg}
\item 
bool \hyperlink{classCoolMQTT_a3240388137b885775aadf38e96b24c6b}{new\+Msg}
\item 
char \hyperlink{classCoolMQTT_a109c786a17b463f9eeba046194279522}{out\+Topic} \mbox{[}50\mbox{]}
\end{DoxyCompactItemize}


\subsection{Detailed Description}
This class handles the mqtt client. 

Definition at line 22 of file Cool\+M\+Q\+T\+T.\+h.



\subsection{Member Function Documentation}
\mbox{\Hypertarget{classCoolMQTT_ac9248808641ebf3054ed0620ea9d0100}\label{classCoolMQTT_ac9248808641ebf3054ed0620ea9d0100}} 
\index{Cool\+M\+Q\+TT@{Cool\+M\+Q\+TT}!begin@{begin}}
\index{begin@{begin}!Cool\+M\+Q\+TT@{Cool\+M\+Q\+TT}}
\subsubsection{\texorpdfstring{begin()}{begin()}}
{\footnotesize\ttfamily void Cool\+M\+Q\+T\+T\+::begin (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

\hyperlink{classCoolMQTT_ac9248808641ebf3054ed0620ea9d0100}{Cool\+M\+Q\+T\+T\+::begin()}\+: This method is provided to set the mqtt client\textquotesingle{}s parameters\+: -\/client -\/server -\/callback method -\/buffer size 

Definition at line 26 of file Cool\+M\+Q\+T\+T.\+cpp.



References buffer\+Size, callback(), client, esp\+Client, and mqtt\+Server.



Referenced by Cool\+Board\+::begin().


\begin{DoxyCode}
27 \{ 
28     \hyperlink{classCoolMQTT_a4ca71e4f76ef868692a297efd45b1415}{client}.setClient(\hyperlink{classCoolMQTT_acc30a0200967374a524092a8a806502a}{espClient});
29     \hyperlink{classCoolMQTT_a4ca71e4f76ef868692a297efd45b1415}{client}.setServer(\hyperlink{classCoolMQTT_ab8bb951f87ddbf92db74c2ad16a3e53e}{mqttServer}, 1883); 
30     \hyperlink{classCoolMQTT_a4ca71e4f76ef868692a297efd45b1415}{client}.setCallback([\textcolor{keyword}{this}] (\textcolor{keywordtype}{char}* topic, byte* payload, \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} length) \{ this->
      \hyperlink{classCoolMQTT_a30d82ad665bfb603f46ecdbc290775df}{callback}(topic, payload, length); \});
31     \hyperlink{classCoolMQTT_a4ca71e4f76ef868692a297efd45b1415}{client}.setBufferSize((\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{short})\hyperlink{classCoolMQTT_a7f3cf26b51d6770f216e42c5ef13ca9f}{bufferSize});
32 
33 \}
\end{DoxyCode}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=317pt]{classCoolMQTT_ac9248808641ebf3054ed0620ea9d0100_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=302pt]{classCoolMQTT_ac9248808641ebf3054ed0620ea9d0100_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classCoolMQTT_a30d82ad665bfb603f46ecdbc290775df}\label{classCoolMQTT_a30d82ad665bfb603f46ecdbc290775df}} 
\index{Cool\+M\+Q\+TT@{Cool\+M\+Q\+TT}!callback@{callback}}
\index{callback@{callback}!Cool\+M\+Q\+TT@{Cool\+M\+Q\+TT}}
\subsubsection{\texorpdfstring{callback()}{callback()}}
{\footnotesize\ttfamily void Cool\+M\+Q\+T\+T\+::callback (\begin{DoxyParamCaption}\item[{char $\ast$}]{topic,  }\item[{byte $\ast$}]{payload,  }\item[{unsigned int}]{length }\end{DoxyParamCaption})}

Cool\+M\+Q\+T\+T\+::callback(in topic, incoming message , message length)\+: This method is provided to handle incoming messages from the subscribed in\+Topic.

Arguments are automatically assigned in client.\+set\+Callback() 

Definition at line 134 of file Cool\+M\+Q\+T\+T.\+cpp.



References msg, new\+Msg, and temp.



Referenced by begin().


\begin{DoxyCode}
135 \{
136     \textcolor{keywordtype}{char} \hyperlink{Irene3000_8h_a5905d48604152cf57aa6bfa087b49173}{temp}[length+1];
137 
138     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < length; i++) 
139     \{
140         temp[i]=(char)payload[i]; 
141 
142     \}
143 
144     this->\hyperlink{classCoolMQTT_a3240388137b885775aadf38e96b24c6b}{newMsg}=\textcolor{keyword}{true};
145 
146     temp[length+1]=\textcolor{charliteral}{'\(\backslash\)0'};
147 
148     \hyperlink{classCoolMQTT_af6b19e7074dbbb4ae493c44dcb53f7ff}{msg}=String(temp);
149     \hyperlink{classCoolMQTT_af6b19e7074dbbb4ae493c44dcb53f7ff}{msg}.remove(length,1);
150     Serial.println(\textcolor{stringliteral}{"received"});
151     Serial.println(\hyperlink{classCoolMQTT_af6b19e7074dbbb4ae493c44dcb53f7ff}{msg});
152 
153 \}
\end{DoxyCode}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classCoolMQTT_a30d82ad665bfb603f46ecdbc290775df_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classCoolMQTT_a0158596b9a2297c8ba609b56ce6bace1}\label{classCoolMQTT_a0158596b9a2297c8ba609b56ce6bace1}} 
\index{Cool\+M\+Q\+TT@{Cool\+M\+Q\+TT}!config@{config}}
\index{config@{config}!Cool\+M\+Q\+TT@{Cool\+M\+Q\+TT}}
\subsubsection{\texorpdfstring{config()}{config()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily void Cool\+M\+Q\+T\+T\+::config (\begin{DoxyParamCaption}\item[{const char}]{mqtt\+Server\mbox{[}$\,$\mbox{]},  }\item[{const char}]{in\+Topic\mbox{[}$\,$\mbox{]},  }\item[{const char}]{out\+Topic\mbox{[}$\,$\mbox{]},  }\item[{const char}]{client\+Id\mbox{[}$\,$\mbox{]},  }\item[{int}]{buffer\+Size }\end{DoxyParamCaption})}

Cool\+M\+Q\+T\+T\+::config(server,in topic, out topic , client id , buffer size)\+: This method is provided to manually configure the mqtt client 

Definition at line 312 of file Cool\+M\+Q\+T\+T.\+cpp.



References buffer\+Size.



Referenced by Cool\+Board\+::begin(), and Cool\+Board\+::update().


\begin{DoxyCode}
313 \{
314     \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int} i =0;i< 50 ;i++)
315     \{
316         this->\hyperlink{classCoolMQTT_ab8bb951f87ddbf92db74c2ad16a3e53e}{mqttServer}[i]=\hyperlink{classCoolMQTT_ab8bb951f87ddbf92db74c2ad16a3e53e}{mqttServer}[i];
317         this->\hyperlink{classCoolMQTT_a4492f52a441e83cc5151010317fdb52d}{inTopic}[i]=\hyperlink{classCoolMQTT_a4492f52a441e83cc5151010317fdb52d}{inTopic}[i];
318         this->\hyperlink{classCoolMQTT_a109c786a17b463f9eeba046194279522}{outTopic}[i]=\hyperlink{classCoolMQTT_a109c786a17b463f9eeba046194279522}{outTopic}[i];
319         this->\hyperlink{classCoolMQTT_af01bc6160c5a191e90df1b6e7318828d}{clientId}[i]=\hyperlink{classCoolMQTT_af01bc6160c5a191e90df1b6e7318828d}{clientId}[i];
320     \}
321     this->\hyperlink{classCoolMQTT_a7f3cf26b51d6770f216e42c5ef13ca9f}{bufferSize}=\hyperlink{classCoolMQTT_a7f3cf26b51d6770f216e42c5ef13ca9f}{bufferSize};
322 
323 \}
\end{DoxyCode}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classCoolMQTT_a0158596b9a2297c8ba609b56ce6bace1_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classCoolMQTT_a6571671781a505feca9a8a56e256c6bc}\label{classCoolMQTT_a6571671781a505feca9a8a56e256c6bc}} 
\index{Cool\+M\+Q\+TT@{Cool\+M\+Q\+TT}!config@{config}}
\index{config@{config}!Cool\+M\+Q\+TT@{Cool\+M\+Q\+TT}}
\subsubsection{\texorpdfstring{config()}{config()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily bool Cool\+M\+Q\+T\+T\+::config (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

\hyperlink{classCoolMQTT_a6571671781a505feca9a8a56e256c6bc}{Cool\+M\+Q\+T\+T\+::config()}\+: This method is provided to configure the mqtt\+Client \+: -\/server -\/in\+Topic -\/out\+Topic -\/client Id -\/buffer size

\begin{DoxyReturn}{Returns}
true if successful,false otherwise 
\end{DoxyReturn}


Definition at line 182 of file Cool\+M\+Q\+T\+T.\+cpp.



References buffer\+Size, client\+Id, in\+Topic, mqtt\+Server, and out\+Topic.


\begin{DoxyCode}
183 \{
184     \textcolor{comment}{//read config file}
185     \textcolor{comment}{//update data}
186     File configFile = SPIFFS.open(\textcolor{stringliteral}{"/mqttConfig.json"}, \textcolor{stringliteral}{"r"});
187 
188     \textcolor{keywordflow}{if} (!configFile) 
189     \{
190         \textcolor{keywordflow}{return}(\textcolor{keyword}{false});
191     \}
192     \textcolor{keywordflow}{else}
193     \{
194         \textcolor{keywordtype}{size\_t} size = configFile.size();
195         \textcolor{comment}{// Allocate a buffer to store contents of the file.}
196         std::unique\_ptr<char[]> buf(\textcolor{keyword}{new} \textcolor{keywordtype}{char}[size]);
197 
198         configFile.readBytes(buf.get(), size);
199         DynamicJsonBuffer jsonBuffer;
200         JsonObject& json = jsonBuffer.parseObject(buf.get());
201         \textcolor{keywordflow}{if} (!json.success()) 
202         \{
203               \textcolor{keywordflow}{return}(\textcolor{keyword}{false});
204         \} 
205         \textcolor{keywordflow}{else}
206         \{               
207                 \textcolor{keywordflow}{if}(json[\textcolor{stringliteral}{"mqttServer"}].success() )
208                 \{           
209                     \textcolor{keyword}{const} \textcolor{keywordtype}{char}* tempmqttServer = json[\textcolor{stringliteral}{"mqttServer"}]; \textcolor{comment}{// "inTopic"}
210                     \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int} i =0;i< 50 ;i++)
211                     \{
212                         \hyperlink{classCoolMQTT_ab8bb951f87ddbf92db74c2ad16a3e53e}{mqttServer}[i]=tempmqttServer[i];
213                     \}
214                 \}
215                 \textcolor{keywordflow}{else}
216                 \{
217                     \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int} i =0;i< 50 ;i++)
218                     \{
219                         this->\hyperlink{classCoolMQTT_ab8bb951f87ddbf92db74c2ad16a3e53e}{mqttServer}[i]=this->\hyperlink{classCoolMQTT_ab8bb951f87ddbf92db74c2ad16a3e53e}{mqttServer}[i];
220                     \}
221 
222                 \}
223                 json[\textcolor{stringliteral}{"mqttServer"}]=this->\hyperlink{classCoolMQTT_ab8bb951f87ddbf92db74c2ad16a3e53e}{mqttServer};
224 
225                 
226                 \textcolor{keywordflow}{if}(json[\textcolor{stringliteral}{"inTopic"}].success() )
227                 \{
228                     \textcolor{keyword}{const} \textcolor{keywordtype}{char}* tempInTopic = json[\textcolor{stringliteral}{"inTopic"}]; \textcolor{comment}{// "inTopic"}
229                     \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int} i =0;i< 50;i++)
230                     \{
231                         \hyperlink{classCoolMQTT_a4492f52a441e83cc5151010317fdb52d}{inTopic}[i]=tempInTopic[i];
232                     \}
233                 \}
234                 \textcolor{keywordflow}{else}
235                 \{
236                     \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int} i=0;i<50;i++)
237                     \{
238                         this->\hyperlink{classCoolMQTT_a4492f52a441e83cc5151010317fdb52d}{inTopic}[i]=this->\hyperlink{classCoolMQTT_a4492f52a441e83cc5151010317fdb52d}{inTopic}[i];
239                     \}               
240                 \}
241                 json[\textcolor{stringliteral}{"inTopic"}]=this->\hyperlink{classCoolMQTT_a4492f52a441e83cc5151010317fdb52d}{inTopic};
242                 
243                 
244                 \textcolor{keywordflow}{if}(json[\textcolor{stringliteral}{"outTopic"}].success() )
245                 \{
246                     \textcolor{keyword}{const} \textcolor{keywordtype}{char}* tempOutTopic = json[\textcolor{stringliteral}{"outTopic"}]; \textcolor{comment}{// "outTopic"}
247                     \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int} i =0;i<50;i++)
248                     \{
249                         \hyperlink{classCoolMQTT_a109c786a17b463f9eeba046194279522}{outTopic}[i]=tempOutTopic[i];
250                     \}
251                 \}
252                 \textcolor{keywordflow}{else}
253                 \{
254                     \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int} i=0;i<50;i++)
255                     \{
256                         this->\hyperlink{classCoolMQTT_a109c786a17b463f9eeba046194279522}{outTopic}[i]=this->\hyperlink{classCoolMQTT_a109c786a17b463f9eeba046194279522}{outTopic}[i];
257                     \}
258                 \}
259                 json[\textcolor{stringliteral}{"outTopic"}]=this->\hyperlink{classCoolMQTT_a109c786a17b463f9eeba046194279522}{outTopic};
260             
261                 
262                 \textcolor{keywordflow}{if}(json[\textcolor{stringliteral}{"clientId"}].success() )
263                 \{               
264                     \textcolor{keyword}{const} \textcolor{keywordtype}{char}* tempClientId = json[\textcolor{stringliteral}{"clientId"}]; \textcolor{comment}{// "espAshiroji"}
265                     \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int} i =0;i<50;i++)
266                     \{
267                         \hyperlink{classCoolMQTT_af01bc6160c5a191e90df1b6e7318828d}{clientId}[i]=tempClientId[i];
268                     \}
269                 \}
270                 \textcolor{keywordflow}{else}
271                 \{
272                     \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int} i=0;i<50;i++)
273                     \{
274                         this->\hyperlink{classCoolMQTT_af01bc6160c5a191e90df1b6e7318828d}{clientId}[i]=this->\hyperlink{classCoolMQTT_af01bc6160c5a191e90df1b6e7318828d}{clientId}[i];
275                     \}               
276                 \}
277                 json[\textcolor{stringliteral}{"clientId"}]=this->\hyperlink{classCoolMQTT_af01bc6160c5a191e90df1b6e7318828d}{clientId};
278                 
279                 \textcolor{keywordflow}{if}(json[\textcolor{stringliteral}{"bufferSize"}].success() )
280                 \{
281                     \textcolor{keywordtype}{int} tempBufferSize = json[\textcolor{stringliteral}{"bufferSize"}]; \textcolor{comment}{// 512}
282                     \hyperlink{classCoolMQTT_a7f3cf26b51d6770f216e42c5ef13ca9f}{bufferSize}=tempBufferSize;
283                 \}
284                 \textcolor{keywordflow}{else}
285                 \{
286                     this->\hyperlink{classCoolMQTT_a7f3cf26b51d6770f216e42c5ef13ca9f}{bufferSize}=this->\hyperlink{classCoolMQTT_a7f3cf26b51d6770f216e42c5ef13ca9f}{bufferSize};
287                 \}
288                 json[\textcolor{stringliteral}{"bufferSize"}]=this->\hyperlink{classCoolMQTT_a7f3cf26b51d6770f216e42c5ef13ca9f}{bufferSize};
289 
290                 configFile.close();
291                 configFile = SPIFFS.open(\textcolor{stringliteral}{"/mqttConfig.json"}, \textcolor{stringliteral}{"w"});
292                 \textcolor{keywordflow}{if}(!configFile)
293                 \{
294                     \textcolor{keywordflow}{return}(\textcolor{keyword}{false});              
295                 \}
296                 
297                 json.printTo(configFile);
298                 configFile.close();
299               
300               \textcolor{keywordflow}{return}(\textcolor{keyword}{true}); 
301         \}
302     \}   
303     
304 
305 \}
\end{DoxyCode}
\mbox{\Hypertarget{classCoolMQTT_a58b0b1f64b269c2681685208262fba1d}\label{classCoolMQTT_a58b0b1f64b269c2681685208262fba1d}} 
\index{Cool\+M\+Q\+TT@{Cool\+M\+Q\+TT}!connect@{connect}}
\index{connect@{connect}!Cool\+M\+Q\+TT@{Cool\+M\+Q\+TT}}
\subsubsection{\texorpdfstring{connect()}{connect()}}
{\footnotesize\ttfamily int Cool\+M\+Q\+T\+T\+::connect (\begin{DoxyParamCaption}\item[{uint16\+\_\+t}]{keep\+Alive }\end{DoxyParamCaption})}

Cool\+M\+Q\+T\+T\+::connect( time to keep the connection alive )\+: This method is provided to connect the client to the server, publish to the out topic , subscribe to the in topic and set the keep\+Alive time.

\begin{DoxyReturn}{Returns}
mqtt client state 
\end{DoxyReturn}


Definition at line 64 of file Cool\+M\+Q\+T\+T.\+cpp.



References client, client\+Id, in\+Topic, and out\+Topic.



Referenced by Cool\+Board\+::connect().


\begin{DoxyCode}
65 \{       
66     \textcolor{keywordtype}{int} i=0;
67     Serial.println(\textcolor{stringliteral}{"MQTT connecting..."});
68     \textcolor{keywordflow}{while} ((!\hyperlink{classCoolMQTT_a4ca71e4f76ef868692a297efd45b1415}{client}.connected())&&(i<100)) 
69     \{
70         \textcolor{comment}{// Attempt to connect}
71         \textcolor{keywordflow}{if} (\hyperlink{classCoolMQTT_a4ca71e4f76ef868692a297efd45b1415}{client}.connect(\hyperlink{classCoolMQTT_af01bc6160c5a191e90df1b6e7318828d}{clientId},keepAlive)) \{
72             Serial.println(\textcolor{stringliteral}{"connected"});
73             \textcolor{comment}{// Once connected, publish an announcement...}
74             \hyperlink{classCoolMQTT_a4ca71e4f76ef868692a297efd45b1415}{client}.publish(\hyperlink{classCoolMQTT_a109c786a17b463f9eeba046194279522}{outTopic}, \textcolor{stringliteral}{"hello world by Ash"});
75             \textcolor{comment}{// ... and resubscribe}
76             \hyperlink{classCoolMQTT_a4ca71e4f76ef868692a297efd45b1415}{client}.subscribe(\hyperlink{classCoolMQTT_a4492f52a441e83cc5151010317fdb52d}{inTopic});
77             Serial.println(\textcolor{stringliteral}{"published and subscribed , leavin "}) ;
78             \textcolor{keywordflow}{return}(\hyperlink{classCoolMQTT_a4ca71e4f76ef868692a297efd45b1415}{client}.state());
79         \}
80         \textcolor{keywordflow}{else}
81         \{
82             Serial.println(\textcolor{stringliteral}{"not connected , leaving"});
83             \textcolor{keywordflow}{return}(\hyperlink{classCoolMQTT_a4ca71e4f76ef868692a297efd45b1415}{client}.state());
84             
85         \}
86     delay(5);
87     i++;
88     \}
89     
90     \textcolor{keywordflow}{return}(1);
91 
92 \}
\end{DoxyCode}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=324pt]{classCoolMQTT_a58b0b1f64b269c2681685208262fba1d_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classCoolMQTT_aa5eaae967b562b62cbcf2b8d81f6e5d5}\label{classCoolMQTT_aa5eaae967b562b62cbcf2b8d81f6e5d5}} 
\index{Cool\+M\+Q\+TT@{Cool\+M\+Q\+TT}!mqtt\+Loop@{mqtt\+Loop}}
\index{mqtt\+Loop@{mqtt\+Loop}!Cool\+M\+Q\+TT@{Cool\+M\+Q\+TT}}
\subsubsection{\texorpdfstring{mqtt\+Loop()}{mqttLoop()}}
{\footnotesize\ttfamily bool Cool\+M\+Q\+T\+T\+::mqtt\+Loop (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

\hyperlink{classCoolMQTT_aa5eaae967b562b62cbcf2b8d81f6e5d5}{Cool\+M\+Q\+T\+T\+::mqtt\+Loop()}\+: This method is provided to allow the client to process the data

\begin{DoxyReturn}{Returns}
true if successful,false otherwise 
\end{DoxyReturn}


Definition at line 121 of file Cool\+M\+Q\+T\+T.\+cpp.



References client.



Referenced by Cool\+Board\+::on\+Line\+Mode().


\begin{DoxyCode}
122 \{
123     this->\hyperlink{classCoolMQTT_a4ca71e4f76ef868692a297efd45b1415}{client}.loop();
124     \textcolor{keywordflow}{return}(\hyperlink{classCoolMQTT_a4ca71e4f76ef868692a297efd45b1415}{client}.loop());
125 \}
\end{DoxyCode}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=348pt]{classCoolMQTT_aa5eaae967b562b62cbcf2b8d81f6e5d5_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classCoolMQTT_a40553a0ad4b5ecf1cb4411ab54ca85fb}\label{classCoolMQTT_a40553a0ad4b5ecf1cb4411ab54ca85fb}} 
\index{Cool\+M\+Q\+TT@{Cool\+M\+Q\+TT}!print\+Conf@{print\+Conf}}
\index{print\+Conf@{print\+Conf}!Cool\+M\+Q\+TT@{Cool\+M\+Q\+TT}}
\subsubsection{\texorpdfstring{print\+Conf()}{printConf()}}
{\footnotesize\ttfamily void Cool\+M\+Q\+T\+T\+::print\+Conf (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

\hyperlink{classCoolMQTT_a40553a0ad4b5ecf1cb4411ab54ca85fb}{Cool\+M\+Q\+T\+T\+::print\+Conf()}\+: This method is provided to print the configuration to the Serial Monitor 

Definition at line 330 of file Cool\+M\+Q\+T\+T.\+cpp.



References buffer\+Size, client\+Id, in\+Topic, mqtt\+Server, and out\+Topic.



Referenced by Cool\+Board\+::begin().


\begin{DoxyCode}
331 \{
332     Serial.println(\textcolor{stringliteral}{"MQTT conf "});
333     Serial.println(\hyperlink{classCoolMQTT_ab8bb951f87ddbf92db74c2ad16a3e53e}{mqttServer});
334     Serial.println(\hyperlink{classCoolMQTT_a4492f52a441e83cc5151010317fdb52d}{inTopic});
335     Serial.println(\hyperlink{classCoolMQTT_a109c786a17b463f9eeba046194279522}{outTopic});
336     Serial.println(\hyperlink{classCoolMQTT_af01bc6160c5a191e90df1b6e7318828d}{clientId});
337     Serial.println(\hyperlink{classCoolMQTT_a7f3cf26b51d6770f216e42c5ef13ca9f}{bufferSize});
338     Serial.println(\textcolor{stringliteral}{" "});
339 
340 
341 \}
\end{DoxyCode}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=318pt]{classCoolMQTT_a40553a0ad4b5ecf1cb4411ab54ca85fb_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classCoolMQTT_ace977b3e90ab14b1199fe5c4fb0a13ec}\label{classCoolMQTT_ace977b3e90ab14b1199fe5c4fb0a13ec}} 
\index{Cool\+M\+Q\+TT@{Cool\+M\+Q\+TT}!publish@{publish}}
\index{publish@{publish}!Cool\+M\+Q\+TT@{Cool\+M\+Q\+TT}}
\subsubsection{\texorpdfstring{publish()}{publish()}}
{\footnotesize\ttfamily bool Cool\+M\+Q\+T\+T\+::publish (\begin{DoxyParamCaption}\item[{const char $\ast$}]{data }\end{DoxyParamCaption})}

Cool\+M\+Q\+T\+T\+::publish(data)\+: This method is provided to publish data to the out topic

\begin{DoxyReturn}{Returns}
true if publish successful, false otherwise 
\end{DoxyReturn}


Definition at line 102 of file Cool\+M\+Q\+T\+T.\+cpp.



References client, and out\+Topic.



Referenced by Cool\+Board\+::on\+Line\+Mode().


\begin{DoxyCode}
103 \{
104 
105     \textcolor{comment}{//data is in JSON, publish it directly}
106     Serial.println(\textcolor{stringliteral}{"data to publish"});
107     Serial.println(data);
108     \textcolor{keywordtype}{bool} pub=\hyperlink{classCoolMQTT_a4ca71e4f76ef868692a297efd45b1415}{client}.publish( \hyperlink{classCoolMQTT_a109c786a17b463f9eeba046194279522}{outTopic}, data,\textcolor{keyword}{sizeof}(data) );
109     \textcolor{keywordflow}{return}( pub);
110 
111 \}
\end{DoxyCode}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=338pt]{classCoolMQTT_ace977b3e90ab14b1199fe5c4fb0a13ec_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classCoolMQTT_ae3c18f6ae9723746d32765f1c8f176ca}\label{classCoolMQTT_ae3c18f6ae9723746d32765f1c8f176ca}} 
\index{Cool\+M\+Q\+TT@{Cool\+M\+Q\+TT}!read@{read}}
\index{read@{read}!Cool\+M\+Q\+TT@{Cool\+M\+Q\+TT}}
\subsubsection{\texorpdfstring{read()}{read()}}
{\footnotesize\ttfamily String Cool\+M\+Q\+T\+T\+::read (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

\hyperlink{classCoolMQTT_ae3c18f6ae9723746d32765f1c8f176ca}{Cool\+M\+Q\+T\+T\+::read()}\+: This method is provided to return the last read message. 

Definition at line 160 of file Cool\+M\+Q\+T\+T.\+cpp.



References msg, and new\+Msg.



Referenced by Cool\+Board\+::on\+Line\+Mode().


\begin{DoxyCode}
161 \{   
162     \textcolor{keywordflow}{if}(this->\hyperlink{classCoolMQTT_a3240388137b885775aadf38e96b24c6b}{newMsg}==\textcolor{keyword}{true})
163     \{
164         \textcolor{keywordflow}{return}(this->\hyperlink{classCoolMQTT_af6b19e7074dbbb4ae493c44dcb53f7ff}{msg});
165         this->\hyperlink{classCoolMQTT_a3240388137b885775aadf38e96b24c6b}{newMsg}=\textcolor{keyword}{false};
166     \}
167     \textcolor{keywordflow}{return}(\textcolor{stringliteral}{" "});
168 
169 \}
\end{DoxyCode}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=326pt]{classCoolMQTT_ae3c18f6ae9723746d32765f1c8f176ca_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classCoolMQTT_a5d003307eff78efbd585e42b43b72b6d}\label{classCoolMQTT_a5d003307eff78efbd585e42b43b72b6d}} 
\index{Cool\+M\+Q\+TT@{Cool\+M\+Q\+TT}!state@{state}}
\index{state@{state}!Cool\+M\+Q\+TT@{Cool\+M\+Q\+TT}}
\subsubsection{\texorpdfstring{state()}{state()}}
{\footnotesize\ttfamily int Cool\+M\+Q\+T\+T\+::state (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

\hyperlink{classCoolMQTT_a5d003307eff78efbd585e42b43b72b6d}{Cool\+M\+Q\+T\+T\+::state()}\+: This method is provided to return the mqtt client\textquotesingle{}s state. \begin{DoxyReturn}{Returns}
mqtt client state\+: -\/4 \+: M\+Q\+T\+T\+\_\+\+C\+O\+N\+N\+E\+C\+T\+I\+O\+N\+\_\+\+T\+I\+M\+E\+O\+UT -\/ the server didn\textquotesingle{}t respond within the keepalive time -\/3 \+: M\+Q\+T\+T\+\_\+\+C\+O\+N\+N\+E\+C\+T\+I\+O\+N\+\_\+\+L\+O\+ST -\/ the network connection was broken -\/2 \+: M\+Q\+T\+T\+\_\+\+C\+O\+N\+N\+E\+C\+T\+\_\+\+F\+A\+I\+L\+ED -\/ the network connection failed -\/1 \+: M\+Q\+T\+T\+\_\+\+D\+I\+S\+C\+O\+N\+N\+E\+C\+T\+ED -\/ the client is disconnected cleanly 0 \+: M\+Q\+T\+T\+\_\+\+C\+O\+N\+N\+E\+C\+T\+ED -\/ the cient is connected 1 \+: M\+Q\+T\+T\+\_\+\+C\+O\+N\+N\+E\+C\+T\+\_\+\+B\+A\+D\+\_\+\+P\+R\+O\+T\+O\+C\+OL -\/ the server doesn\textquotesingle{}t support the requested version of M\+Q\+TT 2 \+: M\+Q\+T\+T\+\_\+\+C\+O\+N\+N\+E\+C\+T\+\_\+\+B\+A\+D\+\_\+\+C\+L\+I\+E\+N\+T\+\_\+\+ID -\/ the server rejected the client identifier 3 \+: M\+Q\+T\+T\+\_\+\+C\+O\+N\+N\+E\+C\+T\+\_\+\+U\+N\+A\+V\+A\+I\+L\+A\+B\+LE -\/ the server was unable to accept the connection 4 \+: M\+Q\+T\+T\+\_\+\+C\+O\+N\+N\+E\+C\+T\+\_\+\+B\+A\+D\+\_\+\+C\+R\+E\+D\+E\+N\+T\+I\+A\+LS -\/ the username/password were rejected 5 \+: M\+Q\+T\+T\+\_\+\+C\+O\+N\+N\+E\+C\+T\+\_\+\+U\+N\+A\+U\+T\+H\+O\+R\+I\+Z\+ED -\/ the client was not authorized to connect 
\end{DoxyReturn}


Definition at line 51 of file Cool\+M\+Q\+T\+T.\+cpp.



References client.



Referenced by Cool\+Board\+::connect().


\begin{DoxyCode}
52 \{
53     \textcolor{keywordflow}{return}(\hyperlink{classCoolMQTT_a4ca71e4f76ef868692a297efd45b1415}{client}.state());
54 \}
\end{DoxyCode}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=311pt]{classCoolMQTT_a5d003307eff78efbd585e42b43b72b6d_icgraph}
\end{center}
\end{figure}


\subsection{Member Data Documentation}
\mbox{\Hypertarget{classCoolMQTT_a7f3cf26b51d6770f216e42c5ef13ca9f}\label{classCoolMQTT_a7f3cf26b51d6770f216e42c5ef13ca9f}} 
\index{Cool\+M\+Q\+TT@{Cool\+M\+Q\+TT}!buffer\+Size@{buffer\+Size}}
\index{buffer\+Size@{buffer\+Size}!Cool\+M\+Q\+TT@{Cool\+M\+Q\+TT}}
\subsubsection{\texorpdfstring{buffer\+Size}{bufferSize}}
{\footnotesize\ttfamily int Cool\+M\+Q\+T\+T\+::buffer\+Size\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 52 of file Cool\+M\+Q\+T\+T.\+h.



Referenced by begin(), config(), and print\+Conf().

\mbox{\Hypertarget{classCoolMQTT_a4ca71e4f76ef868692a297efd45b1415}\label{classCoolMQTT_a4ca71e4f76ef868692a297efd45b1415}} 
\index{Cool\+M\+Q\+TT@{Cool\+M\+Q\+TT}!client@{client}}
\index{client@{client}!Cool\+M\+Q\+TT@{Cool\+M\+Q\+TT}}
\subsubsection{\texorpdfstring{client}{client}}
{\footnotesize\ttfamily Pub\+Sub\+Client Cool\+M\+Q\+T\+T\+::client\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 54 of file Cool\+M\+Q\+T\+T.\+h.



Referenced by begin(), connect(), mqtt\+Loop(), publish(), and state().

\mbox{\Hypertarget{classCoolMQTT_af01bc6160c5a191e90df1b6e7318828d}\label{classCoolMQTT_af01bc6160c5a191e90df1b6e7318828d}} 
\index{Cool\+M\+Q\+TT@{Cool\+M\+Q\+TT}!client\+Id@{client\+Id}}
\index{client\+Id@{client\+Id}!Cool\+M\+Q\+TT@{Cool\+M\+Q\+TT}}
\subsubsection{\texorpdfstring{client\+Id}{clientId}}
{\footnotesize\ttfamily char Cool\+M\+Q\+T\+T\+::client\+Id\mbox{[}50\mbox{]}\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 51 of file Cool\+M\+Q\+T\+T.\+h.



Referenced by config(), connect(), and print\+Conf().

\mbox{\Hypertarget{classCoolMQTT_acc30a0200967374a524092a8a806502a}\label{classCoolMQTT_acc30a0200967374a524092a8a806502a}} 
\index{Cool\+M\+Q\+TT@{Cool\+M\+Q\+TT}!esp\+Client@{esp\+Client}}
\index{esp\+Client@{esp\+Client}!Cool\+M\+Q\+TT@{Cool\+M\+Q\+TT}}
\subsubsection{\texorpdfstring{esp\+Client}{espClient}}
{\footnotesize\ttfamily Wi\+Fi\+Client Cool\+M\+Q\+T\+T\+::esp\+Client\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 53 of file Cool\+M\+Q\+T\+T.\+h.



Referenced by begin().

\mbox{\Hypertarget{classCoolMQTT_a4492f52a441e83cc5151010317fdb52d}\label{classCoolMQTT_a4492f52a441e83cc5151010317fdb52d}} 
\index{Cool\+M\+Q\+TT@{Cool\+M\+Q\+TT}!in\+Topic@{in\+Topic}}
\index{in\+Topic@{in\+Topic}!Cool\+M\+Q\+TT@{Cool\+M\+Q\+TT}}
\subsubsection{\texorpdfstring{in\+Topic}{inTopic}}
{\footnotesize\ttfamily char Cool\+M\+Q\+T\+T\+::in\+Topic\mbox{[}50\mbox{]}\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 49 of file Cool\+M\+Q\+T\+T.\+h.



Referenced by config(), connect(), and print\+Conf().

\mbox{\Hypertarget{classCoolMQTT_ab8bb951f87ddbf92db74c2ad16a3e53e}\label{classCoolMQTT_ab8bb951f87ddbf92db74c2ad16a3e53e}} 
\index{Cool\+M\+Q\+TT@{Cool\+M\+Q\+TT}!mqtt\+Server@{mqtt\+Server}}
\index{mqtt\+Server@{mqtt\+Server}!Cool\+M\+Q\+TT@{Cool\+M\+Q\+TT}}
\subsubsection{\texorpdfstring{mqtt\+Server}{mqttServer}}
{\footnotesize\ttfamily char Cool\+M\+Q\+T\+T\+::mqtt\+Server\mbox{[}50\mbox{]}\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 47 of file Cool\+M\+Q\+T\+T.\+h.



Referenced by begin(), config(), and print\+Conf().

\mbox{\Hypertarget{classCoolMQTT_af6b19e7074dbbb4ae493c44dcb53f7ff}\label{classCoolMQTT_af6b19e7074dbbb4ae493c44dcb53f7ff}} 
\index{Cool\+M\+Q\+TT@{Cool\+M\+Q\+TT}!msg@{msg}}
\index{msg@{msg}!Cool\+M\+Q\+TT@{Cool\+M\+Q\+TT}}
\subsubsection{\texorpdfstring{msg}{msg}}
{\footnotesize\ttfamily String Cool\+M\+Q\+T\+T\+::msg\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 48 of file Cool\+M\+Q\+T\+T.\+h.



Referenced by callback(), and read().

\mbox{\Hypertarget{classCoolMQTT_a3240388137b885775aadf38e96b24c6b}\label{classCoolMQTT_a3240388137b885775aadf38e96b24c6b}} 
\index{Cool\+M\+Q\+TT@{Cool\+M\+Q\+TT}!new\+Msg@{new\+Msg}}
\index{new\+Msg@{new\+Msg}!Cool\+M\+Q\+TT@{Cool\+M\+Q\+TT}}
\subsubsection{\texorpdfstring{new\+Msg}{newMsg}}
{\footnotesize\ttfamily bool Cool\+M\+Q\+T\+T\+::new\+Msg\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 55 of file Cool\+M\+Q\+T\+T.\+h.



Referenced by callback(), and read().

\mbox{\Hypertarget{classCoolMQTT_a109c786a17b463f9eeba046194279522}\label{classCoolMQTT_a109c786a17b463f9eeba046194279522}} 
\index{Cool\+M\+Q\+TT@{Cool\+M\+Q\+TT}!out\+Topic@{out\+Topic}}
\index{out\+Topic@{out\+Topic}!Cool\+M\+Q\+TT@{Cool\+M\+Q\+TT}}
\subsubsection{\texorpdfstring{out\+Topic}{outTopic}}
{\footnotesize\ttfamily char Cool\+M\+Q\+T\+T\+::out\+Topic\mbox{[}50\mbox{]}\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 50 of file Cool\+M\+Q\+T\+T.\+h.



Referenced by config(), connect(), print\+Conf(), and publish().



The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
\hyperlink{CoolMQTT_8h}{Cool\+M\+Q\+T\+T.\+h}\item 
\hyperlink{CoolMQTT_8cpp}{Cool\+M\+Q\+T\+T.\+cpp}\end{DoxyCompactItemize}
